(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-geek-editor"],{9207:function(e,t,n){!function(t,r){e.exports=r(n("2b0e"),n("3b2f"),n("56b3"))}(window,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=158)}([function(e,t,n){"use strict";n.r(t),n.d(t,"DOC",(function(){return r})),n.d(t,"PARAGRAPH",(function(){return i})),n.d(t,"BLOCK_QUOTE",(function(){return o})),n.d(t,"HORIZONTAL_RULE",(function(){return a})),n.d(t,"HEADING",(function(){return s})),n.d(t,"CODE_BLOCK",(function(){return c})),n.d(t,"CODE_BLOCK_PREVIEW",(function(){return l})),n.d(t,"CODE_BLOCK_PREVIEW_LINE",(function(){return u})),n.d(t,"KATEX_BLOCK",(function(){return f})),n.d(t,"KATEX_INLINE",(function(){return d})),n.d(t,"IMAGE",(function(){return h})),n.d(t,"VIDEO",(function(){return p})),n.d(t,"EMBED_COMPONENT",(function(){return v})),n.d(t,"NUMBERED_LIST",(function(){return m})),n.d(t,"BULLETED_LIST",(function(){return g})),n.d(t,"LIST_ITEM",(function(){return y})),n.d(t,"LINK",(function(){return b})),n.d(t,"MARK_CLASS",(function(){return w})),n.d(t,"ITALIC",(function(){return k})),n.d(t,"DEL",(function(){return x})),n.d(t,"UNDERLINE",(function(){return E})),n.d(t,"STRONG",(function(){return O})),n.d(t,"SIZE",(function(){return _})),n.d(t,"COLOR",(function(){return S})),n.d(t,"BG_COLOR",(function(){return M})),n.d(t,"INDENT",(function(){return N})),n.d(t,"ALIGN",(function(){return C})),n.d(t,"CODE_INLINE",(function(){return T})),n.d(t,"SUP",(function(){return A})),n.d(t,"SUB",(function(){return D})),n.d(t,"TEXT",(function(){return I})),n.d(t,"ZERO_WIDTH",(function(){return L})),n.d(t,"D_NOTE",(function(){return R})),n.d(t,"D_MARK",(function(){return P})),n.d(t,"D_PUBLIC",(function(){return B})),n.d(t,"TABLE",(function(){return z})),n.d(t,"TABLE_ROW",(function(){return $})),n.d(t,"TABLE_HEADER",(function(){return j})),n.d(t,"TABLE_CELL",(function(){return H})),n.d(t,"LEAF_BLOCK_TYPES",(function(){return F}));var r="doc",i="paragraph",o="blockquote",a="horizontalrule",s="heading",c="codeblock",l="pre",u="codeline",f="katexblock",d="katexinline",h="image",p="video",v="embedcomp",m="numberedlist",g="bulletedlist",y="listitem",b="link",w="markclass",k="italic",x="del",E="underline",O="strong",_="size",S="color",M="bgcolor",N="indent",C="align",T="codeinline",A="sup",D="sub",I="text",L="zerowidth",R="note",P="mark",B="public",z="table",$="row",j="headercell",H="cell",F=[i,a,s,u,f,h,v,p]},function(e,t,n){"use strict";function r(e,t,n){for(var i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(i),a=t.child(i);if(o!=a){if(!o.sameMarkup(a))return n;if(o.isText&&o.text!=a.text){for(var s=0;o.text[s]==a.text[s];s++)n++;return n}if(o.content.size||a.content.size){var c=r(o.content,a.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function i(e,t,n,r){for(var o=e.childCount,a=t.childCount;;){if(0==o||0==a)return o==a?null:{a:n,b:r};var s=e.child(--o),c=t.child(--a),l=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:n,b:r};if(s.isText&&s.text!=c.text){for(var u=0,f=Math.min(s.text.length,c.text.length);u<f&&s.text[s.text.length-u-1]==c.text[c.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||c.content.size){var d=i(s.content,c.content,n-1,r-1);if(d)return d}n-=l,r-=l}else n-=l,r-=l}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t,this.size=n||0,null==n)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize}var t,n,a;return t=e,a=[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return e.empty;for(var n,r=0,i=0;i<t.length;i++){var o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(n||(n=t.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new e(n||t,r)}},{key:"from",value:function(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}],(n=[{key:"nodesBetween",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=0,a=0;a<t;o++){var s=this.content[o],c=a+s.nodeSize;if(c>e&&!1!==n(s,r+a,i,o)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,e-l),Math.min(s.content.size,t-l),n,r+l)}a=c}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,t,n,r){var i="",o=!0;return this.nodesBetween(e,t,(function(a,s){a.isText?(i+=a.text.slice(Math.max(e,s)-s,t-s),o=!n):a.isLeaf&&r?(i+=r,o=!n):!o&&a.isBlock&&(i+=n,o=!0)}),0),i}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new e(i,this.size+t.size)}},{key:"cut",value:function(t,n){if(null==n&&(n=this.size),0==t&&n==this.size)return this;var r=[],i=0;if(n>t)for(var o=0,a=0;a<n;o++){var s=this.content[o],c=a+s.nodeSize;c>t&&((a<t||c>n)&&(s=s.isText?s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),i+=s.nodeSize),a=c}return new e(r,i)}},{key:"cutByIndex",value:function(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var r=this.content[t];if(r==n)return this;var i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new e(i,o)}},{key:"addToStart",value:function(t){return new e([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new e(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(this,e,t)}},{key:"findDiffEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return i(this,e,t,n)}},{key:"findIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e||t>0?c(n+1,o):c(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}}])&&o(t.prototype,n),a&&o(t,a),e}(),s={index:0,offset:0};function c(e,t){return s.index=e,s.offset=t,s}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(e===t)return!0;if(!e||"object"!=l(e)||!t||"object"!=l(t))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!u(e[r],t[r]))return!1}else{for(var i in e)if(!(i in t)||!u(e[i],t[i]))return!1;for(var o in t)if(!(o in e))return!1}return!0}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.empty=new a([],0);var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.attrs=n}var t,n,r;return t=e,r=[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));return n.create(t.attrs)}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||0==t.length)return e.none;if(t instanceof e)return[t];var n=t.slice();return n.sort((function(e,t){return e.type.rank-t.type.rank})),n}}],(n=[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&u(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e}}])&&f(t.prototype,n),r&&f(t,r),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){var t=Error.call(this,e);return t.__proto__=p.prototype,t}d.none=[],p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="ReplaceError";var v=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t,this.openStart=n,this.openEnd=r}var t,n,r;return t=e,r=[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;var r=n.openStart||0,i=n.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new e(a.fromJSON(t,n.content),n.openStart||0,n.openEnd||0)}},{key:"maxOpen",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,i=0,o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)i++;return new e(t,r,i)}}],(n=[{key:"insertAt",value:function(t,n){var r=function e(t,n,r,i){var o=t.findIndex(n),a=o.index,s=o.offset,c=t.maybeChild(a);if(s==n||c.isText)return i&&!i.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));var l=e(c.content,n-s-1,r);return l&&t.replaceChild(a,c.copy(l))}(this.content,t+this.openStart,n,null);return r&&new e(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new e(function e(t,n,r){var i=t.findIndex(n),o=i.index,a=i.offset,s=t.maybeChild(o),c=t.findIndex(r),l=c.index,u=c.offset;if(a==n||s.isText){if(u!=r&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(o!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(e(s.content,n-a-1,r-a-1)))}(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}},{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}}])&&h(t.prototype,n),r&&h(t,r),e}();function m(e,t,n){if(n.openStart>e.depth)throw new p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new p("Inconsistent open depths");return function e(t,n,r,i){var o=t.index(i),s=t.node(i);if(o==n.index(i)&&i<t.depth-r.openStart){var c=e(t,n,r,i+1);return s.copy(s.content.replaceChild(o,c))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=i||n.depth!=i){var l=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),i=n-1;i>=0;i--)r=t.node(i).copy(a.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t),u=l.start,f=l.end;return k(s,function e(t,n,r,i,o){var s=t.depth>o&&y(t,n,o+1),c=i.depth>o&&y(r,i,o+1),l=[];return w(null,t,o,l),s&&c&&n.index(o)==r.index(o)?(g(s,c),b(k(s,e(t,n,r,i,o+1)),l)):(s&&b(k(s,x(t,n,o+1)),l),w(n,r,o,l),c&&b(k(c,x(r,i,o+1)),l)),w(i,null,o,l),new a(l)}(t,u,f,n,i))}var d=t.parent,h=d.content;return k(d,h.cut(0,t.parentOffset).append(r.content).append(h.cut(n.parentOffset)))}return k(s,x(t,n,i))}(e,t,n,0)}function g(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function y(e,t,n){var r=e.node(n);return g(r,t.node(n)),r}function b(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function w(e,t,n,r){var i=(t||e).node(n),o=0,a=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(b(e.nodeAfter,r),o++));for(var s=o;s<a;s++)b(i.child(s),r);t&&t.depth==n&&t.textOffset&&b(t.nodeBefore,r)}function k(e,t){if(!e.type.validContent(t))throw new p("Invalid content for node "+e.type.name);return e.copy(t)}function x(e,t,n){var r=[];return w(null,e,n,r),e.depth>n&&b(k(y(e,t,n+1),x(e,t,n+1)),r),w(t,null,n,r),new a(r)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}v.empty=new v(a.empty,0,0);var S=function(){function e(t,n,r){E(this,e),this.pos=t,this.path=n,this.depth=n.length/3-1,this.parentOffset=r}return _(e,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return d.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var i=n;n=r,r=i}for(var o=n.marks,a=0;a<o.length;a++)!1!==o[a].type.spec.inclusive||r&&o[a].isInSet(r.marks)||(o=o[a--].removeFromSet(o));return o}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new T(this,e,n)}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],i=0,o=n,a=t;;){var s=a.content.findIndex(o),c=s.index,l=s.offset,u=o-l;if(r.push(a,c,i+l),!u)break;if((a=a.child(c)).isText)break;o=u-1,i+=l+1}return new e(n,r,o)}},{key:"resolveCached",value:function(t,n){for(var r=0;r<M.length;r++){var i=M[r];if(i.pos==n&&i.doc==t)return i}var o=M[N]=e.resolve(t,n);return N=(N+1)%C,o}}]),e}(),M=[],N=0,C=12,T=function(){function e(t,n,r){E(this,e),this.$from=t,this.$to=n,this.depth=r}return _(e,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),e}();function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,n){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),e}var j=Object.create(null),H=function(){function e(t,n,r,i){B(this,e),this.type=t,this.attrs=n,this.content=r||a.empty,this.marks=i||d.none}return $(e,[{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&u(this.attrs,t||e.defaultAttrs||j)&&d.sameSet(this.marks,n||d.none)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return v.empty;var r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),a=r.start(o),s=r.node(o),c=s.content.cut(r.pos-a,i.pos-a);return new v(c,r.depth-o,i.depth-o)}},{key:"replace",value:function(e,t,n){return m(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,i=n.offset;if(!(t=t.maybeChild(r)))return null;if(i==e||t.isText)return t;e-=i+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}},{key:"resolve",value:function(e){return S.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return S.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),U(this.marks,e)}},{key:"contentMatchAt",value:function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}},{key:"canReplace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var c=r;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node ".concat(this.type.name,": ").concat(this.content.toString().slice(0,50)));this.content.forEach((function(e){return e.check()}))}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e}},{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"textContent",get:function(){return this.textBetween(0,this.content.size,"")}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=a.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}]),e}(),F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(n,e);var t=L(n);function n(e,r,i,o){var a;if(B(this,n),a=t.call(this,e,r,null,o),!i)throw new RangeError("Empty text nodes are not allowed");return a.text=i,a}return $(n,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):U(this.marks,JSON.stringify(this.text))}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"mark",value:function(e){return e==this.marks?this:new n(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new n(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e=D(P(n.prototype),"toJSON",this).call(this);return e.text=this.text,e}},{key:"textContent",get:function(){return this.text}},{key:"nodeSize",get:function(){return this.text.length}}]),n}(H);function U(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}function K(e){this.content=e}K.prototype={constructor:K,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return-1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new K(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new K(n)},addToStart:function(e,t){return new K([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new K(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new K(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=K.from(e)).size?new K(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=K.from(e)).size?new K(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=K.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},K.from=function(e){if(e instanceof K)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new K(t)};var V=K;function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}var J=function(){function e(t){W(this,e),this.validEnd=t,this.next=[],this.wrapCache=[]}return q(e,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null}},{key:"matchFragment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1}},{key:"fillBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function i(o,s){var c=o.matchFragment(e,n);if(c&&(!t||c.validEnd))return a.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var u=o.next[l],f=o.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(f)){r.push(f);var d=i(f,s.concat(u));if(d)return d}}}return i(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(e)){for(var o=[],a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(var s=0;s<i.next.length;s+=2){var c=i.next[s];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!i.next[s+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}}},{key:"edge",value:function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return{type:this.next[t],next:this.next[t+1]}}},{key:"toString",value:function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",i=0;i<t.next.length;i+=2)r+=(i?", ":"")+t.next[i].name+"->"+e.indexOf(t.next[i+1]);return r})).join("\n")}},{key:"inlineContent",get:function(){var e=this.next[0];return!!e&&e.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}}},{key:"edgeCount",get:function(){return this.next.length>>1}}],[{key:"parse",value:function(t,n){var r=new X(t,n);if(null==r.next)return e.empty;var i=Z(r);r.next&&r.err("Unexpected trailing text");var o=function(e){var t=Object.create(null);return function n(r){var i=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var o=i.indexOf(n),a=o>-1&&i[o+1];re(e,r).forEach((function(e){a||i.push(n,a=[]),-1==a.indexOf(e)&&a.push(e)}))}}))}));for(var o=t[r.join(",")]=new J(r.indexOf(e.length-1)>-1),a=0;a<i.length;a+=2){var s=i[a+1].sort(ne);o.next.push(i[a],t[s.join(",")]||n(s))}return o}(re(e,0))}(function(e){var t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,o))}),[]);if("seq"==t.type)for(var a=0;;a++){var s=e(t.exprs[a],o);if(a==t.exprs.length-1)return s;i(s,o=n())}else{if("star"==t.type){var c=n();return r(o,c),i(e(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return i(e(t.expr,o),l),i(e(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(o)].concat(e(t.expr,o));if("range"==t.type){for(var u=o,f=0;f<t.min;f++){var d=n();i(e(t.expr,u),d),u=d}if(-1==t.max)i(e(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var p=n();r(u,p),i(e(t.expr,u),p),u=p}return[r(u)]}if("name"==t.type)return[r(o,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((function(e){return e.to=t}))}}(i));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var i=r[n],o=!i.validEnd,a=[],s=0;s<i.next.length;s+=2){var c=i.next[s],l=i.next[s+1];a.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,r),o}}]),e}();J.empty=new J(!0);var X=function(){function e(t,n){W(this,e),this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()}return q(e,[{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}},{key:"next",get:function(){return this.tokens[this.pos]}}]),e}();function Z(e){var t=[];do{t.push(Q(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Q(e){var t=[];do{t.push(Y(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Y(e){for(var t=function(e){if(e.eat("(")){var t=Z(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var i=[];for(var o in n){var a=n[o];a.groups.indexOf(t)>-1&&i.push(a)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=te(e,t)}return t}function ee(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function te(e,t){var n=ee(e),r=n;return e.eat(",")&&(r="}"!=e.next?ee(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function ne(e,t){return t-e}function re(e,t){var n=[];return function t(r){var i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var a=i[o],s=a.term,c=a.to;s||-1!=n.indexOf(c)||t(c)}}(t),n.sort(ne)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),e}function se(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function ce(e,t){var n=Object.create(null);for(var r in e){var i=t&&t[r];if(void 0===i){var o=e[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function le(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new fe(e[n]);return t}var ue=function(){function e(t,n,r){ie(this,e),this.name=t,this.schema=n,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=le(r.attrs),this.defaultAttrs=se(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}return ae(e,[{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:ce(this.attrs,e)}},{key:"create",value:function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new H(this,this.computeAttrs(e),a.from(t),d.setFrom(n))}},{key:"createChecked",value:function(e,t,n){if(t=a.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new H(this,this.computeAttrs(e),t,d.setFrom(n))}},{key:"createAndFill",value:function(e,t,n){if(e=this.computeAttrs(e),(t=a.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(a.empty,!0);return i?new H(this,e,t.append(i),d.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"allowsMarkType",value:function(e){return null==this.markSet||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:d.empty:e}},{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==J.empty}},{key:"isAtom",get:function(){return this.isLeaf||this.spec.atom}}],[{key:"compile",value:function(t,n){var r=Object.create(null);t.forEach((function(t,i){return r[t]=new e(t,n,i)}));var i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),e}(),fe=function(){function e(t){ie(this,e),this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}return ae(e,[{key:"isRequired",get:function(){return!this.hasDefault}}]),e}(),de=function(){function e(t,n,r,i){ie(this,e),this.name=t,this.schema=r,this.spec=i,this.attrs=le(i.attrs),this.rank=n,this.excluded=null;var o=se(this.attrs);this.instance=o&&new d(this,o)}return ae(e,[{key:"create",value:function(e){return!e&&this.instance?this.instance:new d(this,ce(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(t,n){var r=Object.create(null),i=0;return t.forEach((function(t,o){return r[t]=new e(t,i++,n,o)})),r}}]),e}(),he=function(){function e(t){for(var n in ie(this,e),this.spec={},t)this.spec[n]=t[n];this.spec.nodes=V.from(t.nodes),this.spec.marks=V.from(t.marks),this.nodes=ue.compile(this.spec.nodes,this),this.marks=de.compile(this.spec.marks,this);var r=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var o=this.nodes[i],a=o.spec.content||"",s=o.spec.marks;o.contentMatch=r[a]||(r[a]=J.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?pe(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:pe(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)}return ae(e,[{key:"node",value:function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ue))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new F(n,n.defaultAttrs,e,d.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return H.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return d.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}]),e}();function pe(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=e.marks[i],a=o;if(o)n.push(o);else for(var s in e.marks){var c=e.marks[s];("_"==i||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}var be=function(){function e(t,n){var r=this;me(this,e),this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(e){e.tag?r.tags.push(e):e.style&&r.styles.push(e)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}return ye(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new _e(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new _e(this,t,!0);return n.addAll(e,null,t.from,t.to),v.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(Se(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var i=r.getAttrs(e);if(!1===i)continue;r.attrs=i}return r}}}},{key:"matchStyle",value:function(e,t,n){for(var r=0;r<this.styles.length;r++){var i=this.styles[r];if(!(0!=i.style.indexOf(e)||i.context&&!n.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var o=i.getAttrs(t);if(!1===o)continue;i.attrs=o}return i}}}}],[{key:"schemaRules",value:function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var i=t[r];if((null==i.priority?50:i.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Me(e)),e.mark=t}))};for(var i in e.marks)r(i);var o=function(t){var r=e.nodes[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Me(e)),e.node=t}))};for(var a in e.nodes)o(a);return t}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}}]),e}(),we={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ke={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},xe={ol:!0,ul:!0};function Ee(e){return(e?1:0)|("full"===e?2:0)}var Oe=function(){function e(t,n,r,i,o,a,s){me(this,e),this.type=t,this.attrs=n,this.solid=o,this.match=a||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=r,this.activeMarks=d.none,this.pendingMarks=i}return ye(e,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(a.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=a.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}},{key:"applyPending",value:function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):Ne(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}}]),e}(),_e=function(){function e(t,n,r){me(this,e),this.parser=t,this.options=n,this.isOpen=r;var i,o=n.topNode,a=Ee(n.preserveWhitespace)|(r?4:0);i=o?new Oe(o.type,o.attrs,d.none,d.none,!0,n.topMatch||o.type.contentMatch,a):new Oe(r?null:t.schema.topNodeType,null,d.none,d.none,!0,null,a),this.nodes=[i],this.open=0,this.find=n.findPositions,this.needsBlock=!1}return ye(e,[{key:"addDOM",value:function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){for(var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}}},{key:"addTextNode",value:function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e){var t=e.nodeName.toLowerCase();xe.hasOwnProperty(t)&&this.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&xe.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:ke.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(e=n.skip);var r,i=this.top,o=this.needsBlock;if(we.hasOwnProperty(t))r=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),r&&this.sync(i),this.needsBlock=o}else this.addElementByRule(e,n)}},{key:"leafFallback",value:function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}},{key:"readStyles",value:function(e){for(var t=d.none,n=0;n<e.length;n+=2){var r=this.parser.matchStyle(e[n],e[n+1],this);if(r){if(r.ignore)return null;t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t)}}return t}},{key:"addElementByRule",value:function(e,t){var n,r,i,o=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):n=this.enter(r,t.attrs,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return o.insertNode(e)}));else{var s=t.contentElement;"string"==typeof s?s=e.querySelector(s):"function"==typeof s&&(s=s(e)),s||(s=e),this.findAround(e,s,!0),this.addAll(s,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)}},{key:"addAll",value:function(e,t,n,r){for(var i=n||0,o=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o),t&&we.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,i)}},{key:"findPlace",value:function(e){for(var t,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(var a=0;a<t.length;a++)this.enterInner(t[a],null,!1);return!0}},{key:"insertNode",value:function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,i=0;i<e.marks.length;i++)n.type&&!n.type.allowsMarkType(e.marks[i].type)||(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}},{key:"enter",value:function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}},{key:"enterInner",value:function(e,t,n,r){this.closeExtra();var i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e,t);var o=null==r?-5&i.options:Ee(r);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new Oe(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}},{key:"closeExtra",value:function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1);return function e(a,s){for(;a>=0;a--){var c=n[a];if(""==c){if(a==n.length-1||0==a)continue;for(;s>=o;s--)if(e(a-1,s))return!0;return!1}var l=s>0||0==s&&i?t.nodes[s].type:r&&s>=o?r.node(s-o).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;s--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}}},{key:"addPendingMark",value:function(e){this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1?r.pendingMarks=e.removeFromSet(r.pendingMarks):r.activeMarks=e.removeFromSet(r.activeMarks),r==t)break}}},{key:"top",get:function(){return this.nodes[this.open]}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}}]),e}();function Se(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Me(e){var t={};for(var n in e)t[n]=e[n];return t}function Ne(e,t){var n=t.schema.nodes,r=function(r){var i=n[r];if(!i.allowsMarkType(e))return"continue";var o=[];return function e(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var i=n.edge(r),a=i.type,s=i.next;if(a==t)return!0;if(o.indexOf(s)<0&&e(s))return!0}}(i.contentMatch)?{v:!0}:void 0};for(var i in n){var o=r(i);switch(o){case"continue":continue;default:if("object"===ve(o))return o.v}}}function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ae=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodes=t||{},this.marks=n||{}}var t,n,r;return t=e,r=[{key:"renderSpec",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof n)return{dom:t.createTextNode(n)};if(null!=n.nodeType)return{dom:n};var i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));var a=null,s=r?t.createElementNS(r,i):t.createElement(i),c=n[1],l=1;if(c&&"object"==Ce(c)&&null==c.nodeType&&!Array.isArray(c))for(var u in l=2,c)if(null!=c[u]){var f=u.indexOf(" ");f>0?s.setAttributeNS(u.slice(0,f),u.slice(f+1),c[u]):s.setAttribute(u,c[u])}for(var d=l;d<n.length;d++){var h=n[d];if(0===h){if(d<n.length-1||d>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=e.renderSpec(t,h,r),v=p.dom,m=p.contentDOM;if(s.appendChild(v),m){if(a)throw new RangeError("Multiple content holes");a=m}}return{dom:s,contentDOM:a}}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(e){var t=De(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return De(e.marks)}}],(n=[{key:"serializeFragment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Ie(n).createDocumentFragment());var i=r,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);for(var r=0,a=0;r<o.length&&a<e.marks.length;){var s=e.marks[a];if(t.marks[s.type.name]){if(!s.eq(o[r])||!1===s.type.spec.spanning)break;r+=2,a++}else a++}for(;r<o.length;)i=o.pop(),o.pop();for(;a<e.marks.length;){var c=e.marks[a++],l=t.serializeMark(c,e.isInline,n);l&&(o.push(c,i),i.appendChild(l.dom),i=l.contentDOM||l.dom)}}i.appendChild(t.serializeNode(e,n))})),r}},{key:"serializeNode",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.renderSpec(Ie(n),this.nodes[t.type.name](t)),i=r.dom,o=r.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");n.onContent?n.onContent(t,o,n):this.serializeFragment(t.content,n,o)}return i}},{key:"serializeNodeAndMarks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}},{key:"serializeMark",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.marks[t.type.name];return i&&e.renderSpec(Ie(r),i(t,n))}}])&&Te(t.prototype,n),r&&Te(t,r),e}();function De(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Ie(e){return e.document||window.document}n.d(t,"f",(function(){return H})),n.d(t,"c",(function(){return a})),n.d(t,"i",(function(){return v})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return he})),n.d(t,"e",(function(){return de})),n.d(t,"a",(function(){return be})),n.d(t,"b",(function(){return Ae}))},function(e,t,n){"use strict";var r=n(1),i=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var v=Object.create(null),m=function(){function e(t,n,r){d(this,e),this.ranges=r||[new g(t.min(n),t.max(n))],this.$anchor=t,this.$head=n}return p(e,[{key:"content",value:function(){return this.$from.node(0).slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.i.empty,n=t.content.lastChild,i=null,o=0;o<t.openEnd;o++)i=n,n=n.lastChild;for(var a=e.steps.length,s=this.ranges,c=0;c<s.length;c++){var l=s[c],u=l.$from,f=l.$to,d=e.mapping.slice(a);e.replaceRange(d.map(u.pos),d.map(f.pos),c?r.i.empty:t),0==c&&_(e,a,(n?n.isInline:i&&i.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],a=o.$from,s=o.$to,c=e.mapping.slice(n),l=c.map(a.pos),u=c.map(s.pos);i?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),_(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return y.between(this.$anchor,this.$head).getBookmark()}},{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}}],[{key:"findFrom",value:function(e,t,n){var r=e.parent.inlineContent?new y(e):O(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var i=e.depth-1;i>=0;i--){var o=t<0?O(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):O(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}}},{key:"near",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new x(e.node(0))}},{key:"atStart",value:function(e){return O(e,e,0,0,1)||new x(e)}},{key:"atEnd",value:function(e){return O(e,e,e.content.size,e.childCount,-1)||new x(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=v[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in v)throw new RangeError("Duplicate use of selection JSON ID "+e);return v[e]=t,t.prototype.jsonID=e,t}}]),e}();m.prototype.visible=!0;var g=function e(t,n){d(this,e),this.$from=t,this.$to=n},y=function(e){s(n,e);var t=l(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return d(this,n),t.call(this,e,r)}return p(n,[{key:"map",value:function(e,t){var r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return m.near(r);var i=e.resolve(t.map(this.anchor));return new n(i.parent.inlineContent?i:r,r)}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.i.empty;if(a(f(n.prototype),"replace",this).call(this,e,t),t==r.i.empty){var i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new b(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}},{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,t,r){var i=e.pos-t.pos;if(r&&!i||(r=i>=0?1:-1),!t.parent.inlineContent){var o=m.findFrom(t,r,!0)||m.findFrom(t,-r,!0);if(!o)return m.near(t,r);t=o.$head}return e.parent.inlineContent||(0==i||(e=(m.findFrom(e,-r,!0)||m.findFrom(e,r,!0)).$anchor).pos<t.pos!=i<0)&&(e=t),new n(e,t)}}]),n}(m);m.jsonID("text",y);var b=function(){function e(t,n){d(this,e),this.anchor=t,this.head=n}return p(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){return y.between(e.resolve(this.anchor),e.resolve(this.head))}}]),e}(),w=function(e){s(n,e);var t=l(n);function n(e){var r;d(this,n);var i=e.nodeAfter,o=e.node(0).resolve(e.pos+i.nodeSize);return(r=t.call(this,e,o)).node=i,r}return p(n,[{key:"map",value:function(e,t){var r=t.mapResult(this.anchor),i=r.deleted,o=r.pos,a=e.resolve(o);return i?m.near(a):new n(a)}},{key:"content",value:function(){return new r.i(r.c.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new k(this.anchor)}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))}},{key:"create",value:function(e,t){return new this(e.resolve(t))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}]),n}(m);w.prototype.visible=!1,m.jsonID("node",w);var k=function(){function e(t){d(this,e),this.anchor=t}return p(e,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),r=n.deleted,i=n.pos;return r?new b(i,i):new e(i)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&w.isSelectable(n)?new w(t):m.near(t)}}]),e}(),x=function(e){s(n,e);var t=l(n);function n(e){return d(this,n),t.call(this,e.resolve(0),e.resolve(e.content.size))}return p(n,[{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.i.empty;if(t==r.i.empty){e.delete(0,e.doc.content.size);var i=m.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else a(f(n.prototype),"replace",this).call(this,e,t)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new n(e)}},{key:"eq",value:function(e){return e instanceof n}},{key:"getBookmark",value:function(){return E}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(m);m.jsonID("all",x);var E={map:function(){return this},resolve:function(e){return new x(e)}};function O(e,t,n,r,i,o){if(t.inlineContent)return y.create(e,n);for(var a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){var s=t.child(a);if(s.isAtom){if(!o&&w.isSelectable(s))return w.create(e,n-(i<0?s.nodeSize:0))}else{var c=O(e,s,n+i,i<0?s.childCount:0,i,o);if(c)return c}n+=s.nodeSize*i}}function _(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,a=e.steps[r];(a instanceof i.c||a instanceof i.b)&&(e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(m.near(e.doc.resolve(o),n)))}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,i,o=T(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e.doc)).time=Date.now(),t.curSelection=e.selection,t.curSelectionFor=0,t.storedMarks=e.storedMarks,t.updated=0,t.meta=Object.create(null),t}return t=a,(n=[{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=2,this}},{key:"ensureMarks",value:function(e){return r.d.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"addStep",value:function(e,t){N(D(a.prototype),"addStep",this).call(this,e,t),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.d.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(t);i=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(m.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}])&&M(t.prototype,n),i&&M(t,i),a}(i.e);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){return t&&e?e.bind(t):e}var z=function e(t,n,r){P(this,e),this.name=t,this.init=B(n.init,r),this.apply=B(n.apply,r)},$=[new z("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new z("selection",{init:function(e,t){return e.selection||m.atStart(t.doc)},apply:function(e){return e.selection}}),new z("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new z("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],j=function e(t,n){var r=this;P(this,e),this.schema=t,this.fields=$.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),n&&n.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new z(e.key,e.spec.state,e))}))},H=function(){function e(t){P(this,e),this.config=t}var t,n,i;return t=e,i=[{key:"create",value:function(t){for(var n=new j(t.schema||t.doc.type.schema,t.plugins),r=new e(n),i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}},{key:"fromJSON",value:function(t,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new j(t.schema,t.plugins),a=new e(o);return o.fields.forEach((function(e){if("doc"==e.name)a.doc=r.f.fromJSON(t.schema,n.doc);else if("selection"==e.name)a.selection=m.fromJSON(a.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(a.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(i)for(var o in i){var s=i[o],c=s.spec.state;if(s.key==e.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(a[e.name]=c.fromJSON.call(s,t,n[o],a))}a[e.name]=e.init(t,a)}})),a}},{key:"addApplyListener",value:function(e){F.push(e)}},{key:"removeApplyListener",value:function(e){var t=F.indexOf(e);t>-1&&F.splice(t,1)}}],(n=[{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var a=this.config.plugins[o];if(a.spec.appendTransaction){var s=r?r[o].n:0,c=r?r[o].state:this,l=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,c,n);if(l&&n.filterTransaction(l,o)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<o?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new e(this.config),r=this.config.fields,i=0;i<r.length;i++){var o=r[i];n[o.name]=o.apply(t,this[o.name],this,n)}for(var a=0;a<F.length;a++)F[a](this,t,n);return n}},{key:"reconfigure",value:function(t){for(var n=new j(t.schema||this.schema,t.plugins),r=n.fields,i=new e(n),o=0;o<r.length;o++){var a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(t,i)}return i}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==L(e))for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}},{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"tr",get:function(){return new I(this)}}])&&R(t.prototype,n),i&&R(t,i),e}(),F=[];function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}var W=function(){function e(t){U(this,e),this.props={},t.props&&function e(t,n,r){for(var i in t){var o=t[i];o instanceof Function?o=o.bind(n):"handleDOMEvents"==i&&(o=e(o,n,{})),r[i]=o}return r}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:q("plugin")}return V(e,[{key:"getState",value:function(e){return e[this.key]}}]),e}(),G=Object.create(null);function q(e){return e in G?e+"$"+ ++G[e]:(G[e]=0,e+"$")}var J=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";U(this,e),this.key=q(t)}return V(e,[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}]),e}();n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return H})),n.d(t,"d",(function(){return W})),n.d(t,"e",(function(){return J}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=Math.pow(2,16);function s(e){return 65535&e}var c=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),this.pos=t,this.deleted=n,this.recover=r},l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,e),this.ranges=t,this.inverted=n}return i(e,[{key:"recover",value:function(e){var t=0,n=s(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/a}(e)}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var l=this.ranges[s]-(this.inverted?r:0);if(l>e)break;var u=this.ranges[s+i],f=this.ranges[s+o],d=l+u;if(e<=d){var h=l+r+((u?e==l?-1:e==d?1:t:t)<0?0:f);if(n)return h;var p=e==(t<0?l:d)?null:s/3+(e-l)*a;return new c(h,t<0?e!=l:e!=d,p)}r+=f-u}return n?e+r:new c(e+r)}},{key:"touches",value:function(e,t){for(var n=0,r=s(t),i=this.inverted?2:1,o=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[a+i];if(e<=c+l&&a==3*r)return!0;n+=this.ranges[a+o]-l}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],a=o-(this.inverted?i:0),s=o+(this.inverted?0:i),c=this.ranges[r+t],l=this.ranges[r+n];e(a,a+c,s,s+l),i+=l-c}}},{key:"invert",value:function(){return new e(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}}]),e}();l.empty=new l([]);var u=function(){function e(t,n,r,i){o(this,e),this.maps=t||[],this.from=r||0,this.to=null==i?this.maps.length:i,this.mirror=n}return i(e,[{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e(this.maps,this.mirror,t,n)}},{key:"copy",value:function(){return new e(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}}},{key:"invert",value:function(){var t=new e;return t.appendMappingInverted(this),t}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i].mapResult(e,t);if(null!=o.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,e=this.maps[a].recover(o.recover);continue}}o.deleted&&(r=!0),e=o.pos}return n?e:new c(e,r)}}]),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){var t=Error.call(this,e);return t.__proto__=d.prototype,t}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="TransformError";var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=t,this.steps=[],this.docs=[],this.mapping=new u}var t,n,r;return t=e,(n=[{key:"step",value:function(e){var t=this.maybeStep(e);if(t.failed)throw new d(t.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"docChanged",get:function(){return this.steps.length>0}}])&&f(t.prototype,n),r&&f(t,r),e}(),p=n(1);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(){throw new Error("Override me")}var b=Object.create(null),w=function(){function e(){v(this,e)}return g(e,[{key:"apply",value:function(e){return y()}},{key:"getMap",value:function(){return l.empty}},{key:"invert",value:function(e){return y()}},{key:"map",value:function(e){return y()}},{key:"merge",value:function(e){return null}},{key:"toJSON",value:function(){return y()}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=b[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in b)throw new RangeError("Duplicate use of step JSON ID "+e);return b[e]=t,t.prototype.jsonID=e,t}}]),e}(),k=function(){function e(t,n){v(this,e),this.doc=t,this.failed=n}return g(e,null,[{key:"ok",value:function(t){return new e(t,null)}},{key:"fail",value:function(t){return new e(null,t)}},{key:"fromReplace",value:function(t,n,r,i){try{return e.ok(t.replace(n,r,i))}catch(t){if(t instanceof p.g)return e.fail(t.message);throw t}}}]),e}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){S(n,e);var t=N(n);function n(e,r,i,o){var a;return E(this,n),(a=t.call(this)).from=e,a.to=r,a.slice=i,a.structure=!!o,a}return _(n,[{key:"apply",value:function(e){return this.structure&&I(e,this.from,this.to)?k.fail("Structure replace would overwrite content"):k.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new l([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted?null:new n(t.pos,Math.max(t.pos,r.pos),this.slice)}},{key:"merge",value:function(e){if(!(e instanceof n)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?p.i.empty:new p.i(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new n(e.from,this.to,t,this.structure)}var r=this.slice.size+e.slice.size==0?p.i.empty:new p.i(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new n(this.from,this.to+(e.to-e.from),r,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(t.from,t.to,p.i.fromJSON(e,t.slice),!!t.structure)}}]),n}(w);w.jsonID("replace",A);var D=function(e){S(n,e);var t=N(n);function n(e,r,i,o,a,s,c){var l;return E(this,n),(l=t.call(this)).from=e,l.to=r,l.gapFrom=i,l.gapTo=o,l.slice=a,l.insert=s,l.structure=!!c,l}return _(n,[{key:"apply",value:function(e){if(this.structure&&(I(e,this.from,this.gapFrom)||I(e,this.gapTo,this.to)))return k.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return k.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?k.fromReplace(e,this.from,this.to,n):k.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var t=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deleted&&r.deleted||i<t.pos||o>r.pos?null:new n(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(t.from,t.to,t.gapFrom,t.gapTo,p.i.fromJSON(e,t.slice),t.insert,!!t.structure)}}]),n}(w);function I(e,t,n){for(var r=e.resolve(t),i=n-t,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var a=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}return!1}function L(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function R(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!L(r,i,o))break}}function P(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=z(e,t),o=i&&$(r,t);return o?i.map(B).concat({type:t,attrs:n}).concat(o.map(B)):null}function B(e){return{type:e,attrs:null}}function z(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;var a=o.length?o[0]:t;return n.canReplaceWith(r,i,a)?o:null}function $(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,c=r;s&&c<i;c++)s=s.matchType(n.child(c).type);return s&&s.validEnd?a:null}function j(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function H(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var c=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(c>0?1:0);if(1==a?r.node(s).canReplace(l,l,i):r.node(s).contentMatchAt(l).findWrapping(i.firstChild.type))return 0==c?r.pos:c<0?r.before(s+1):r.after(s+1)}return null}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var i=X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){for(var r=[],i=0;i<e.childCount;i++){var o=e.child(i);o.content.size&&(o=o.copy(Z(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return p.c.fromArray(r)}w.jsonID("replaceAround",D),h.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,i=e.depth,o=n.before(i+1),a=r.after(i+1),s=o,c=a,l=p.c.empty,u=0,f=i,d=!1;f>t;f--)d||n.index(f)>0?(d=!0,l=p.c.from(n.node(f).copy(l)),u++):s--;for(var h=p.c.empty,v=0,m=i,g=!1;m>t;m--)g||r.after(m+1)<r.end(m)?(g=!0,h=p.c.from(r.node(m).copy(h)),v++):c++;return this.step(new D(s,c,o,a,new p.i(l.append(h),u,v),l.size-u,!0))},h.prototype.wrap=function(e,t){for(var n=p.c.empty,r=t.length-1;r>=0;r--)n=p.c.from(t[r].type.create(t[r].attrs,n));var i=e.start,o=e.end;return this.step(new D(i,o,i,o,new p.i(n,0,0),t.length,!0))},h.prototype.setBlockType=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,n,(function(e,n){if(e.isTextblock&&!e.hasMarkup(r,i)&&j(t.doc,t.mapping.slice(o).map(n),r)){t.clearIncompatible(t.mapping.slice(o).map(n,1),r);var a=t.mapping.slice(o),s=a.map(n,1),c=a.map(n+e.nodeSize,1);return t.step(new D(s,c,s+1,c-1,new p.i(p.c.from(r.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},h.prototype.setNodeMarkup=function(e,t,n,r){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var o=t.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new D(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new p.i(p.c.from(o),0,0),1,!0))},h.prototype.split=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=this.doc.resolve(e),i=p.c.empty,o=p.c.empty,a=r.depth,s=r.depth-t,c=t-1;a>s;a--,c--){i=p.c.from(r.node(a).copy(i));var l=n&&n[c];o=p.c.from(l?l.type.create(l.attrs,o):r.node(a).copy(o))}return this.step(new A(e,e,new p.i(i.append(o),t,t),!0))},h.prototype.join=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new A(e-t,e+t,p.i.empty,!0);return this.step(n)};var Q=function(e){W(n,e);var t=q(n);function n(e,r,i){var o;return U(this,n),(o=t.call(this)).from=e,o.to=r,o.mark=i,o}return V(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new p.i(Z(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return k.fromReplace(e,this.from,this.to,o)}},{key:"invert",value:function(){return new Y(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){if(e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(w);w.jsonID("addMark",Q);var Y=function(e){W(n,e);var t=q(n);function n(e,r,i){var o;return U(this,n),(o=t.call(this)).from=e,o.to=r,o.mark=i,o}return V(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=new p.i(Z(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return k.fromReplace(e,this.from,this.to,r)}},{key:"invert",value:function(){return new Q(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){if(e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(w);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.i.empty;if(t==n&&!r.size)return null;var i=e.resolve(t),o=e.resolve(n);return ne(i,o,r)?new A(t,n,r):new re(i,o,r).fit()}function ne(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}w.jsonID("removeMark",Y),h.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],a=null,s=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var f=Math.max(c,e),d=Math.min(c+r.nodeSize,t),h=n.addToSet(u),p=0;p<u.length;p++)u[p].isInSet(h)||(a&&a.to==f&&a.mark.eq(u[p])?a.to=d:i.push(a=new Y(f,d,u[p])));s&&s.to==f?s.to=d:o.push(s=new Q(f,d,n))}}})),i.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},h.prototype.removeMark=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[],o=0;return this.doc.nodesBetween(e,t,(function(n,a){if(n.isInline){o++;var s=null;if(r instanceof p.e){var c=r.isInSet(n.marks);c&&(s=[c])}else r?r.isInSet(n.marks)&&(s=[r]):s=n.marks;if(s&&s.length)for(var l=Math.min(a+n.nodeSize,t),u=0;u<s.length;u++){for(var f=s[u],d=void 0,h=0;h<i.length;h++){var v=i[h];v.step==o-1&&f.eq(i[h].style)&&(d=v)}d?(d.to=l,d.step=o):i.push({style:f,from:Math.max(a,e),to:l,step:o})}}})),i.forEach((function(e){return n.step(new Y(e.from,e.to,e.style))})),this},h.prototype.clearIncompatible=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.contentMatch,r=this.doc.nodeAt(e),i=[],o=e+1,a=0;a<r.childCount;a++){var s=r.child(a),c=o+s.nodeSize,l=n.matchType(s.type,s.attrs);if(l){n=l;for(var u=0;u<s.marks.length;u++)t.allowsMarkType(s.marks[u].type)||this.step(new Y(o,c,s.marks[u]))}else i.push(new A(o,c,p.i.empty));o=c}if(!n.validEnd){var f=n.fillBefore(p.c.empty,!0);this.replace(o,o,new p.i(f,0,0))}for(var d=i.length-1;d>=0;d--)this.step(i[d]);return this},h.prototype.replace=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.i.empty,r=te(this.doc,e,t,n);return r&&this.step(r),this},h.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new p.i(p.c.from(n),0,0))},h.prototype.delete=function(e,t){return this.replace(e,t,p.i.empty)},h.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var re=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$to=n,this.$from=t,this.unplaced=r,this.frontier=[];for(var i=0;i<=t.depth;i++){var o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}this.placed=p.c.empty;for(var a=t.depth;a>0;a--)this.placed=p.c.from(t.node(a).copy(this.placed))}var t,n,r;return t=e,(n=[{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=t<0?this.$to:r.doc.resolve(t);if(this.close(i)){for(var o=this.placed,a=r.depth,s=i.depth;a&&s&&1==o.childCount;)o=o.firstChild.content,a--,s--;var c=new p.i(o,a,s);if(t>-1)return new D(r.pos,t,this.$to.pos,this.$to.end(),c,n);if(c.size||r.pos!=this.$to.pos)return new A(r.pos,i.pos,c)}return null}},{key:"findFittable",value:function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,r=(t?(n=ae(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var o=this.frontier[i],a=o.type,s=o.match,c=void 0,l=void 0;if(1==e&&(r?s.matchType(r.type)||(l=s.fillBefore(p.c.from(r),!1)):a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:i,parent:n,inject:l};if(2==e&&r&&(c=s.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:i,parent:n,wrap:c};if(n&&s.matchType(n.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=ae(t,n);return!(!i.childCount||i.firstChild.isLeaf||(this.unplaced=new p.i(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=ae(t,n);if(i.childCount<=1&&n>0){var o=t.size-n<=n+i.size;this.unplaced=new p.i(ie(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new p.i(ie(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,i=e.inject,o=e.wrap;this.depth>n;)this.closeFrontierNode();if(o)for(var a=0;a<o.length;a++)this.openFrontierNode(o[a]);var s=this.unplaced,c=r?r.content:s.content,l=s.openStart-t,u=0,f=[],d=this.frontier[n],h=d.match,v=d.type;if(i){for(var m=0;m<i.childCount;m++)f.push(i.child(m));h=h.matchFragment(i)}for(var g=c.size+t-(s.content.size-s.openEnd);u<c.childCount;){var y=c.child(u),b=h.matchType(y.type);if(!b)break;(++u>1||0==l||y.content.size)&&(h=b,f.push(se(y.mark(v.allowedMarks(y.marks)),1==u?l:0,u==c.childCount?g:-1)))}var w=u==c.childCount;w||(g=-1),w&&g<0&&r&&r.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=h;for(var k=0,x=c;k<g;k++){var E=x.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),x=E.content}this.unplaced=w?0==t?p.i.empty:new p.i(ie(s.content,t-1,1),t-1,g<0?s.openEnd:t-1):new p.i(ie(s.content,t,u),s.openStart,s.openEnd),this.placed=oe(this.placed,n,p.c.from(f))}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ce(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,i=ce(e,t,n.type,r,!1);if(i){for(var o=t-1;o>=0;o--){var a=this.frontier[o],s=a.match,c=ce(e,o,a.type,s,!0);if(!c||c.childCount)continue e}return{depth:t,fit:i}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return!1;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=oe(this.placed,t.depth,t.fit));for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,i)}return!0}},{key:"openFrontierNode",value:function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=oe(this.placed,this.depth,p.c.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore(p.c.empty,!0);e.childCount&&(this.placed=oe(this.placed,this.frontier.length,e))}},{key:"depth",get:function(){return this.frontier.length-1}}])&&ee(t.prototype,n),r&&ee(t,r),e}();function ie(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(ie(e.firstChild.content,t-1,n)))}function oe(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(oe(e.lastChild.content,t-1,n)))}function ae(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function se(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,se(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(p.c.empty,!0)))),e.copy(r)}function ce(e,t,n,r,i){var o=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==o.childCount&&!n.compatibleContent(o.type))return null;var s=r.fillBefore(o.content,!0,a);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,a)?s:null}function le(e,t,n,r,i){if(t<n){var o=e.firstChild;e=e.replaceChild(0,o.copy(le(o.content,t+1,n,r,o)))}if(t>r){var a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(p.c.empty,!0))}return e}function ue(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;i==t.start(r)&&n.push(r)}return n}h.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),i=this.doc.resolve(t);if(ne(r,i,n))return this.step(new A(e,t,n));var o=ue(r,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var a=-(r.depth+1);o.unshift(a);for(var s=r.depth,c=r.pos-1;s>0;s--,c--){var l=r.node(s).type.spec;if(l.defining||l.isolating)break;o.indexOf(s)>-1?a=s:r.before(s)==c&&o.splice(1,0,-s)}for(var u=o.indexOf(a),f=[],d=n.openStart,h=n.content,v=0;;v++){var m=h.firstChild;if(f.push(m),v==n.openStart)break;h=m.content}d>0&&f[d-1].type.spec.defining&&r.node(u).type!=f[d-1].type?d-=1:d>=2&&f[d-1].isTextblock&&f[d-2].type.spec.defining&&r.node(u).type!=f[d-2].type&&(d-=2);for(var g=n.openStart;g>=0;g--){var y=(g+d+1)%(n.openStart+1),b=f[y];if(b)for(var w=0;w<o.length;w++){var k=o[(w+u)%o.length],x=!0;k<0&&(x=!1,k=-k);var E=r.node(k-1),O=r.index(k-1);if(E.canReplaceWith(O,O,b.type,b.marks))return this.replace(r.before(k),x?i.after(k):t,new p.i(le(n.content,0,n.openStart,y),y,n.openEnd))}}for(var _=this.steps.length,S=o.length-1;S>=0&&(this.replace(e,t,n),!(this.steps.length>_));S--){var M=o[S];S<0||(e=r.before(M),t=i.after(M))}return this},h.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new p.i(p.c.from(n),0,0))},h.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=ue(n,r),o=0;o<i.length;o++){var a=i[o],s=o==i.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)},n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return H})),n.d(t,"h",(function(){return R})),n.d(t,"g",(function(){return P})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return A})),n.d(t,"b",(function(){return D}))},function(t,n){t.exports=e},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(22))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(5),i=n(74),o=n(8),a=n(46),s=n(81),c=n(116),l=i("wks"),u=r.Symbol,f=c?u:u&&u.withoutSetter||a;e.exports=function(e){return o(l,e)||(s&&o(u,e)?l[e]=u[e]:l[e]=f("Symbol."+e)),l[e]}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,n){e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r=n(16),i=n(17),o=n(42);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[0],s={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},f=null,d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,i){l=n,f=i||{};var a=r(e,t);return p(a),function(t){for(var n=[],i=0;i<a.length;i++){var s=a[i];(c=o[s.id]).refs--,n.push(c)}for(t?p(a=r(e,t)):a=[],i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function p(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(m(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(m(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function m(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(d){var i=c++;r=s||(s=v()),t=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=v(),t=w.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var g,y=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function b(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function w(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),f.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},function(e,t,n){var r=n(5),i=n(66).f,o=n(13),a=n(20),s=n(43),c=n(108),l=n(77);e.exports=function(e,t){var n,u,f,d,h,p=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[p]||s(p,{}):(r[p]||{}).prototype)for(u in t){if(d=t[u],f=e.noTargetGet?(h=i(n,u))&&h.value:n[u],!l(v?u:p+(m?".":"#")+u,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;c(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),a(n,u,d,e)}}},function(e,t,n){var r=n(6);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(16),i=n(69),o=n(10),a=n(68),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r,i,o=n(1),a=n(0);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(s(r={},a.DOC,{content:"block+"}),s(r,a.PARAGRAPH,{content:"inline*",group:"block",attrs:{indent:{default:0},number:{default:0},align:{default:null},origin:{default:null}},isBase:!0,parseDOM:[{tag:"p"},{tag:"br",attrs:{origin:"br"}}],toDOM:function(e){var t=e.attrs,n=t.indent,r=t.number,i=t.align,o={};return"number"==typeof n&&n>0&&n<9&&(o["data-indent-".concat(n)]=""),"number"==typeof r&&r>0&&(o["data-number"]=r),["center","right"].indexOf(i)>-1&&(o["data-align-".concat(i)]=""),["p",o,0]}}),s(r,a.BLOCK_QUOTE,{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"},{tag:".listtype-quote"}],toDOM:function(){return["blockquote",0]}}),s(r,a.HORIZONTAL_RULE,{group:"block",atom:!0,parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}),s(r,a.HEADING,{attrs:{align:{default:null},level:{default:1}},marks:"".concat(a.COLOR," ").concat(a.BG_COLOR," ").concat(a.ITALIC," ").concat(a.UNDERLINE," ").concat(a.DEL),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}}],toDOM:function(e){var t={},n=e.attrs.align,r=e.attrs.level;return[1,2,3,4,5].indexOf(r)<0&&(r=5),["center","right"].indexOf(n)>-1&&(t["data-align-".concat(n)]=""),["h"+r,t,0]}}),s(r,a.CODE_BLOCK,{attrs:{lang:{default:"text"}},content:"text*",marks:"",group:"block",code:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){return{lang:e.getAttribute("lang")}}}],toDOM:function(){return["pre",["code",0]]}}),s(r,a.KATEX_BLOCK,{attrs:{mathString:{default:null}},marks:"",group:"block",atom:!0,toDOM:function(){return["div",0]}}),s(r,a.KATEX_INLINE,{attrs:{mathString:{default:null}},marks:"",group:"inline",inline:!0,atom:!0,toDOM:function(){return["span",0]}}),s(r,a.TEXT,{group:"inline"}),s(r,a.IMAGE,{attrs:{src:{default:null},alt:{default:null},title:{default:null},style:{default:null},href:{default:null},fromPaste:{default:!1},pastePass:{default:!1}},group:"block",atom:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(){return["div",0]}}),s(r,a.VIDEO,{attrs:{videoHTML:{default:null}},group:"block",atom:!0,toDOM:function(){return["div"]}}),s(r,a.EMBED_COMPONENT,{attrs:{type:{default:""},data:{default:null}},group:"block",atom:!0,toDOM:function(){return["div"]}}),s(r,a.LINK,{inline:!0,content:"text*",group:"inline",marks:"".concat(a.BG_COLOR," ").concat(a.ITALIC," ").concat(a.UNDERLINE," ").concat(a.DEL),attrs:{href:{},title:{default:""}},parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=e.getAttribute("href");return!!(t&&t.length>1)&&{href:t,title:e.getAttribute("title")}}}],toDOM:function(e){var t=e.attrs,n=t.href,r=t.title,i=a.LINK+String((new Date).getTime()).slice(-6);return["a",{href:n,title:r,"data-type":a.LINK,"data-id":i},0]}}),s(r,a.CODE_INLINE,{inline:!0,content:"text*",group:"inline",parseDOM:[{tag:"code"},{tag:".inline-code"},{tag:"a",getAttrs:function(e){return e.getAttribute("data-type")===a.CODE_INLINE&&{}}}],toDOM:function(){return["a",{href:"#","data-type":a.CODE_INLINE},0]}}),s(r,a.SUP,{inline:!0,content:"text*",group:"inline",parseDOM:[{tag:"sup"}],toDOM:function(){return["a",{href:"#","data-type":a.SUP},0]}}),s(r,a.SUB,{inline:!0,content:"text*",group:"inline",parseDOM:[{tag:"sub"}],toDOM:function(){return["a",{href:"#","data-type":a.SUB},0]}}),s(r,a.ZERO_WIDTH,{marks:"",group:"inline",selectable:!1,inline:!0,atom:!0,toDOM:function(){return["span",0]}}),r),l=(s(i={},a.ITALIC,{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["i",0]}}),s(i,a.DEL,{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:function(){return["s",0]}}),s(i,a.UNDERLINE,{parseDOM:[{tag:"u"},{style:"text-decoration=underline"}],toDOM:function(){return["u",0]}}),s(i,a.SIZE,{attrs:{size:{}},toDOM:function(e){var t=e.attrs.size;return"number"==typeof t&&t>8&&t<99?["span",{"data-size":"".concat(t)},0]:["span",0]}}),s(i,a.COLOR,{attrs:{color:{},name:{}},parseDOM:[{style:"color",getAttrs:function(e){return!!/^#[a-f0-9]{6}$/i.test(e)&&{name:"user",color:e}}}],toDOM:function(e){var t=e.attrs.color,n=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(t)&&/^[a-z_]{1,20}$/i.test(n)?["span",{style:"color: ".concat(t),"data-name":n},0]:["span",0]}}),s(i,a.BG_COLOR,{attrs:{color:{},name:{}},parseDOM:[{style:"background",getAttrs:function(e){return!!/^#[a-f0-9]{6}$/i.test(e)&&{name:"user",color:e}}},{style:"background-color",getAttrs:function(e){return!!/^#[a-f0-9]{6}$/i.test(e)&&{name:"user",color:e}}}],toDOM:function(e){var t=e.attrs.color,n=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(t)&&/^[a-z_]{1,20}$/i.test(n)?["span",{style:"background: ".concat(t),"data-name":n},0]:["span",0]}}),s(i,a.STRONG,{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)}}],toDOM:function(){return["strong",0]}}),i);function u(e){var t={};return 1!==e.attrs.colspan&&(t.colspan=e.attrs.colspan),1!==e.attrs.rowspan&&(t.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(t["data-colwidth"]=e.attrs.colwidth.join(",")),e.attrs.background&&(t.style=(t.style||"")+"background-color: ".concat(e.attrs.background,";")),t}c[a.NUMBERED_LIST]={content:"".concat(a.LIST_ITEM,"+"),group:"block",attrs:{start:{default:1},normalizeStart:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{start:e.getAttribute("start")}}}],toDOM:function(e){var t=e.attrs.start,n={};return"number"==typeof t&&t>1&&(n.start=t),["ol",n,0]}},c[a.BULLETED_LIST]={content:"".concat(a.LIST_ITEM,"+"),group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}},c[a.LIST_ITEM]={content:"(".concat(a.PARAGRAPH,"|").concat(a.IMAGE,")+"),group:"block",attrs:{listStyle:{default:null}},parseDOM:[{tag:"li",context:"".concat(a.BULLETED_LIST,"/|").concat(a.NUMBERED_LIST,"/")}],toDOM:function(e){var t=e.attrs.listStyle,n={};return"string"==typeof t&&(n["data-liststyle"]=t),["li",n,0]}},c[a.TABLE]={content:"".concat(a.TABLE_ROW,"+"),group:"block",isolating:!0,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},c[a.TABLE_ROW]={content:"(".concat(a.TABLE_CELL," | ").concat(a.TABLE_HEADER,")*"),tableRole:a.TABLE_ROW,parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},c[a.TABLE_CELL]={content:"(".concat(a.PARAGRAPH," | ").concat(a.BULLETED_LIST," | ").concat(a.NUMBERED_LIST,")*"),attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:a.TABLE_CELL,isolating:!0,parseDOM:[{tag:"td"}],toDOM:function(e){return["td",u(e),0]}},c[a.TABLE_HEADER]={content:"(".concat(a.PARAGRAPH," | ").concat(a.BULLETED_LIST," | ").concat(a.NUMBERED_LIST,")*"),attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:a.TABLE_HEADER,isolating:!0,parseDOM:[{tag:"th"}],toDOM:function(e){return["th",u(e),0]}},t.a=function(){return new o.h({nodes:c,marks:l})}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(5),i=n(13),o=n(8),a=n(43),s=n(71),c=n(23),l=c.get,u=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),u(n).source=f.join("string"==typeof t?t:"")),e!==r?(c?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:i(e,t,n)):l?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},function(e,t,n){var r=n(30),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r,i,o,a=n(73),s=n(5),c=n(9),l=n(13),u=n(8),f=n(44),d=n(29),h=s.WeakMap;if(a){var p=new h,v=p.get,m=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return v.call(p,e)||{}},o=function(e){return m.call(p,e)}}else{var y=f("state");d[y]=!0,r=function(e,t){return l(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},o=function(e){return u(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(19);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports={}},function(e,t,n){var r=n(27),i=n(19);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(6),i=n(28),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports={}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(103);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("499131c3",r,!0,{})},function(e,t,n){var r=n(104);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("739c9740",r,!0,{})},function(e,t,n){var r=n(105);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("7bfbb791",r,!0,{})},function(e,t,n){var r=n(106);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("8db00e1e",r,!0,{})},function(e,t,n){var r=n(153);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("42abccc8",r,!0,{})},function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("4bb715a3",r,!0,{})},function(e,t,n){var r=n(155);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("4ab0a19e",r,!0,{})},function(e,t,n){var r=n(156);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("1e848eea",r,!0,{})},function(e,t,n){var r=n(157);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(14).default)("778ba594",r,!0,{})},function(e,t){e.exports=n},function(e,t){var n=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=n},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(5),i=n(13);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(74),i=n(46),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){e.exports=!1},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(110),i=n(5),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(79),i=n(27),o=n(24),a=n(21),s=n(114),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,f=6==e,d=5==e||f;return function(h,p,v,m){for(var g,y,b=o(h),w=i(b),k=r(p,v,3),x=a(w.length),E=0,O=m||s,_=t?O(h,x):n?O(h,0):void 0;x>E;E++)if((d||E in w)&&(y=k(g=w[E],E,b),e))if(t)_[E]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return E;case 2:c.call(_,g)}else if(u)return!1;return f?-1:l||u?u:_}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(e,t,n){var r=n(16),i=n(6),o=n(8),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(o(s,e))return s[e];t||(t={});var n=[][e],l=!!o(t,"ACCESSORS")&&t.ACCESSORS,u=o(t,0)?t[0]:c,f=o(t,1)?t[1]:void 0;return s[e]=!!n&&!i((function(){if(l&&!r)return!0;var e={length:-1};l?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,u,f)}))}},function(e,t,n){var r=n(17).f,i=n(8),o=n(7)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r={};r[n(7)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(29),i=n(9),o=n(8),a=n(17).f,s=n(46),c=n(137),l=s("meta"),u=0,f=Object.isExtensible||function(){return!0},d=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,l)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[l].objectID},getWeakData:function(e,t){if(!o(e,l)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[l].weakData},onFreeze:function(e){return c&&h.REQUIRED&&f(e)&&!o(e,l)&&d(e),e}};r[l]=!0},function(e,t,n){"use strict";var r,i,o=n(149),a=n(150),s=RegExp.prototype.exec,c=String.prototype.replace,l=s,u=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||f)&&(l=function(e){var t,n,r,i,a=this,l=f&&a.sticky,h=o.call(a),p=a.source,v=0,m=e;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),m=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,v++),n=new RegExp("^(?:"+p+")",h)),d&&(n=new RegExp("^"+p+"$(?!\\s)",h)),u&&(t=a.lastIndex),r=s.call(l?n:a,m),l?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:u&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),d&&r&&r.length>1&&c.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t,n){"use strict";var r=n(31),i=n.n(r);t.default=i.a},function(e,t,n){"use strict";var r=n(32),i=n.n(r);t.default=i.a},function(e,t,n){"use strict";var r=n(33),i=n.n(r);t.default=i.a},function(e,t,n){"use strict";var r=n(34),i=n.n(r);t.default=i.a},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,f=Math.max,d=Math.min,h=function(){return l.Date.now()};function p(e,t,n){var r,i,o,a,s,c,l=0,u=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function b(e){return l=e,s=setTimeout(k,t),u?y(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-l>=o}function k(){var e=h();if(w(e))return x(e);s=setTimeout(k,function(e){var n=t-(e-c);return p?d(n,o-(e-l)):n}(e))}function x(e){return s=void 0,g&&r?y(e):(r=i=void 0,a)}function E(){var e=h(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return b(c);if(p)return s=setTimeout(k,t),y(c)}return void 0===s&&(s=setTimeout(k,t)),a}return t=m(t)||0,v(n)&&(u=!!n.leading,o=(p="maxWait"in n)?f(m(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},E.flush=function(){return void 0===s?a:x(h())},E}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return v(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),p(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,n(22))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,f=Math.max,d=Math.min,h=function(){return l.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,l=0,u=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function b(e){return l=e,s=setTimeout(k,t),u?y(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||m&&e-l>=o}function k(){var e=h();if(w(e))return x(e);s=setTimeout(k,function(e){var n=t-(e-c);return m?d(n,o-(e-l)):n}(e))}function x(e){return s=void 0,g&&r?y(e):(r=i=void 0,a)}function E(){var e=h(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return b(c);if(m)return s=setTimeout(k,t),y(c)}return void 0===s&&(s=setTimeout(k,t)),a}return t=v(t)||0,p(n)&&(u=!!n.leading,o=(m="maxWait"in n)?f(v(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},E.flush=function(){return void 0===s?a:x(h())},E}}).call(this,n(22))},function(e,t,n){"use strict";var r=n(35),i=n.n(r);t.default=i.a},function(e,t,n){"use strict";var r=n(36),i=n.n(r);t.default=i.a},function(e,t,n){"use strict";var r=n(37),i=n.n(r);t.default=i.a},function(e,t,n){"use strict";var r=n(38),i=n.n(r);t.default=i.a},function(e,t,n){"use strict";var r=n(39),i=n.n(r);t.default=i.a},function(e,t,n){var r=n(16),i=n(67),o=n(42),a=n(26),s=n(68),c=n(8),l=n(69),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(16),i=n(6),o=n(70);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(5),i=n(9),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(72),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(5),i=n(43),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(5),i=n(71),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t,n){var r=n(45),i=n(72);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(8),i=n(26),o=n(112).indexOf,a=n(29);e.exports=function(e,t){var n,s=i(e),c=0,l=[];for(n in s)!r(a,n)&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(l,n)||l.push(n));return l}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(6),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==l||n!=c&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},function(e,t,n){"use strict";var r=n(49).forEach,i=n(82),o=n(50),a=i("forEach"),s=o("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){var r=n(80);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(6);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var r=n(26),i=n(122),o=n(25),a=n(23),s=n(87),c=a.set,l=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var r,i=n(10),o=n(123),a=n(48),s=n(29),c=n(124),l=n(70),u=n(44),f=u("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=i(e),n=new d,d.prototype=null,n[f]=e):n=p(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(75),i=n(48);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(15),i=n(125),o=n(89),a=n(90),s=n(51),c=n(13),l=n(20),u=n(7),f=n(45),d=n(25),h=n(88),p=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,m=u("iterator"),g=function(){return this};e.exports=function(e,t,n,u,h,y,b){i(n,t,u);var w,k,x,E=function(e){if(e===h&&N)return N;if(!v&&e in S)return S[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},O=t+" Iterator",_=!1,S=e.prototype,M=S[m]||S["@@iterator"]||h&&S[h],N=!v&&M||E(h),C="Array"==t&&S.entries||M;if(C&&(w=o(C.call(new e)),p!==Object.prototype&&w.next&&(f||o(w)===p||(a?a(w,p):"function"!=typeof w[m]&&c(w,m,g)),s(w,O,!0,!0),f&&(d[O]=g))),"values"==h&&M&&"values"!==M.name&&(_=!0,N=function(){return M.call(this)}),f&&!b||S[m]===N||c(S,m,N),d[t]=N,h)if(k={values:E("values"),keys:y?N:E("keys"),entries:E("entries")},b)for(x in k)(v||_||!(x in S))&&l(S,x,k[x]);else r({target:t,proto:!0,forced:v||_},k);return k}},function(e,t,n){"use strict";var r,i,o,a=n(89),s=n(13),c=n(8),l=n(7),u=n(45),f=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):d=!0),null==r&&(r={}),u||c(r,f)||s(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(e,t,n){var r=n(8),i=n(24),o=n(44),a=n(126),s=o("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(10),i=n(127);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var r=n(52),i=n(28),o=n(7)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){var r=n(30),i=n(19),o=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){var r=n(20);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(10),i=n(139),o=n(21),a=n(79),s=n(140),c=n(141),l=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,u,f){var d,h,p,v,m,g,y,b=a(t,n,u?2:1);if(f)d=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,v=o(e.length);v>p;p++)if((m=u?b(r(y=e[p])[0],y[1]):b(e[p]))&&m instanceof l)return m;return new l(!1)}d=h.call(e)}for(g=d.next;!(y=g.call(d)).done;)if("object"==typeof(m=c(d,b,y.value,u))&&m&&m instanceof l)return m;return new l(!1)}).stop=function(e){return new l(!0,e)}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){"use strict";var r=n(15),i=n(54);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){"use strict";n(97);var r=n(20),i=n(6),o=n(7),a=n(54),s=n(13),c=o("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),f=o("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=o(e),v=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=v&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!v||!m||"replace"===e&&(!l||!u||d)||"split"===e&&!h){var g=/./[p],y=n(p,""[e],(function(e,t,n,r,i){return t.exec===a?v&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=y[0],w=y[1];r(String.prototype,e,b),r(RegExp.prototype,p,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}f&&s(RegExp.prototype[p],"sham",!0)}},function(e,t,n){"use strict";var r=n(93).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(28),i=n(54);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){(function(t){var n,r=/^\[object .+?Constructor\]$/,i="object"==typeof t&&t&&t.Object===Object&&t,o="object"==typeof self&&self&&self.Object===Object&&self,a=i||o||Function("return this")(),s=Array.prototype,c=Function.prototype,l=Object.prototype,u=a["__core-js_shared__"],f=(n=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",d=c.toString,h=l.hasOwnProperty,p=l.toString,v=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=s.splice,g=_(a,"Map"),y=_(Object,"create");function b(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function x(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function E(e){return!(!M(e)||(t=e,f&&f in t))&&(function(e){var t=M(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?v:r).test(function(e){if(null!=e){try{return d.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function O(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function _(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return E(n)?n:void 0}function S(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(S.Cache||k),n}function M(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}b.prototype.clear=function(){this.__data__=y?y(null):{}},b.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},b.prototype.get=function(e){var t=this.__data__;if(y){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return h.call(t,e)?t[e]:void 0},b.prototype.has=function(e){var t=this.__data__;return y?void 0!==t[e]:h.call(t,e)},b.prototype.set=function(e,t){return this.__data__[e]=y&&void 0===t?"__lodash_hash_undefined__":t,this},w.prototype.clear=function(){this.__data__=[]},w.prototype.delete=function(e){var t=this.__data__,n=x(t,e);return!(n<0)&&(n==t.length-1?t.pop():m.call(t,n,1),!0)},w.prototype.get=function(e){var t=this.__data__,n=x(t,e);return n<0?void 0:t[n][1]},w.prototype.has=function(e){return x(this.__data__,e)>-1},w.prototype.set=function(e,t){var n=this.__data__,r=x(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new b,map:new(g||w),string:new b}},k.prototype.delete=function(e){return O(this,e).delete(e)},k.prototype.get=function(e){return O(this,e).get(e)},k.prototype.has=function(e){return O(this,e).has(e)},k.prototype.set=function(e,t){return O(this,e).set(e,t),this},S.Cache=k,e.exports=S}).call(this,n(22))},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&c()}function s(){o(a)}function c(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},f=g(0,0,0,0);function d(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function p(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=u(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=d(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=d(r.width),c=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=h(r,"left","right")+o),Math.round(c+a)!==n&&(c-=h(r,"top","bottom")+a)),!function(e){return e===u(e).document.documentElement}(e)){var l=Math.round(s+o)-t,p=Math.round(c+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(p)&&(c-=p)}return g(i.left,i.top,s,c)}var v="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function m(e){return r?v(e)?function(e){var t=e.getBBox();return g(0,0,t.width,t.height)}(e):p(e):f}function g(e,t,n,r){return{x:e,y:t,width:n,height:r}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,i,o,a,s,c,u=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),l(c,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),c);l(this,{target:e,contentRect:u})},w=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),k="undefined"!=typeof WeakMap?new WeakMap:new n,x=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new w(t,n,this);k.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){x.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}}));var E=void 0!==i.ResizeObserver?i.ResizeObserver:x;t.a=E}).call(this,n(22))},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,".ewAHQnkq {\n  white-space: normal;\n  position: relative;\n  border-radius: 4px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.ewAHQnkq:hover ._1QDKlxfV {\n  display: flex;\n}\n._1QDKlxfV {\n  user-select: none;\n  position: absolute;\n  z-index: 10;\n  width: 200px;\n  top: -30px;\n  padding-bottom: 6px;\n  left: 0px;\n  display: none;\n}\n._314BQAa9 {\n  line-height: 0;\n  height: 0;\n  width: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n}\n._1ywKB5zQ {\n  left: 50%;\n  transform: translateX(-50%);\n  justify-content: center;\n}\n.TZBEPzll {\n  flex: 0 0 58px;\n  text-align: center;\n  height: 24px;\n  line-height: 24px;\n  color: #444;\n  cursor: pointer;\n  font-size: 12px;\n  margin-right: 10px;\n  background: #fff;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n}\n._3C0zKJ2b {\n  padding: 2px;\n  position: relative;\n  user-select: none;\n  border-radius: 3px;\n}\n._3C0zKJ2b:hover {\n  box-shadow: 0 0 1px 2px rgba(20,88,212,0.4);\n}\n._1sd45Sm0 {\n  box-shadow: 0 0 1px 2px rgba(20,88,212,0.7);\n}\n._1sd45Sm0 ._1QDKlxfV {\n  display: flex;\n}\n",""]),t.locals={main:"ewAHQnkq",btns:"_1QDKlxfV",emptyChar:"_314BQAa9",center:"_1ywKB5zQ",btn:"TZBEPzll",node:"_3C0zKJ2b",on:"_1sd45Sm0"}},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,".CodeMirror {\n/* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: auto;\n  color: #000;\n  direction: ltr;\n}\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line, .CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px 0 10px; /* Horizontal padding of content */\n}\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: #fff; /* The little square between H and V scrollbars */\n}\n.CodeMirror-gutters {\n/* border-right: 1px solid #ddd; */\n/* background-color: #f7f7f7; */\n  white-space: nowrap;\n}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #c1c7cd;\n  font-family: 'Source Code Pro', Courier;\n  font-size: 13px;\n  white-space: nowrap;\n}\n.CodeMirror-guttermarker {\n  color: #000;\n}\n.CodeMirror-guttermarker-subtle {\n  color: #999;\n}\n.CodeMirror-cursor {\n  border-left: 1px solid #000;\n  border-right: none;\n  width: 0;\n}\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid #c0c0c0;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20,255,20,0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes _2qjs-l6C {\n50% {\n    background-color: transparent;\n}\n}\n@-webkit-keyframes _2qjs-l6C {\n50% {\n    background-color: transparent;\n}\n}\n.cm-tab {\n  display: inline-block;\n  text-decoration: inherit;\n}\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: -50px;\n  bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n}\n.cm-s-default .cm-header {\n  color: #00f;\n}\n.cm-s-default .cm-quote {\n  color: #090;\n}\n.cm-negative {\n  color: #d44;\n}\n.cm-positive {\n  color: #292;\n}\n.cm-header, .cm-strong {\n  font-weight: bold;\n}\n.cm-em {\n  font-style: italic;\n}\n.cm-link {\n  text-decoration: underline;\n}\n.cm-strikethrough {\n  text-decoration: line-through;\n}\n.cm-s-default .cm-keyword {\n  color: #708;\n}\n.cm-s-default .cm-atom {\n  color: #219;\n}\n.cm-s-default .cm-number {\n  color: #164;\n}\n.cm-s-default .cm-def {\n  color: #00f;\n}\n.cm-s-default .cm-variable-2 {\n  color: #05a;\n}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {\n  color: #085;\n}\n.cm-s-default .cm-comment {\n  color: #a50;\n}\n.cm-s-default .cm-string {\n  color: #a11;\n}\n.cm-s-default .cm-string-2 {\n  color: #f50;\n}\n.cm-s-default .cm-meta {\n  color: #555;\n}\n.cm-s-default .cm-qualifier {\n  color: #555;\n}\n.cm-s-default .cm-builtin {\n  color: #30a;\n}\n.cm-s-default .cm-bracket {\n  color: #997;\n}\n.cm-s-default .cm-tag {\n  color: #170;\n}\n.cm-s-default .cm-attribute {\n  color: #00c;\n}\n.cm-s-default .cm-hr {\n  color: #999;\n}\n.cm-s-default .cm-link {\n  color: #00c;\n}\n.cm-s-default .cm-error {\n  color: #f00;\n}\n.cm-invalidchar {\n  color: #f00;\n}\n.CodeMirror-composing {\n  border-bottom: 2px solid;\n}\ndiv.CodeMirror span.CodeMirror-matchingbracket {\n  color: #0b0;\n}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {\n  color: #a22;\n}\n.CodeMirror-matchingtag {\n  background: rgba(255,150,0,0.3);\n}\n.CodeMirror-activeline-background {\n  background: #e8f2ff;\n}\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: #f8f9fa;\n}\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n/* 30px is the magic margin used to hide the element's real scrollbars */\n/* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px;\n  margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0;\n  top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0;\n  left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0;\n  bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0;\n  bottom: 0;\n}\n.CodeMirror-gutters {\n  position: absolute;\n  left: 0;\n  top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -30px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection {\n  background-color: transparent;\n}\n.CodeMirror-gutter-wrapper ::-moz-selection {\n  background-color: transparent;\n}\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line, .CodeMirror pre.CodeMirror-line-like {\n/* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0;\n  -webkit-border-radius: 0;\n  border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: 'Source Code Pro', Courier;\n  font-size: 13px;\n  line-height: 20px;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line, .CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n}\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n.CodeMirror-rtl pre {\n  direction: rtl;\n}\n.CodeMirror-code {\n  outline: none;\n}\n.CodeMirror-scroll, .CodeMirror-sizer, .CodeMirror-gutter, .CodeMirror-gutters, .CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n.CodeMirror-linenumber {\n  background: #f8f9fa;\n  line-height: 20px;\n}\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre {\n  position: static;\n}\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n.CodeMirror-selected {\n  background: #d9d9d9;\n}\n.CodeMirror-focused .CodeMirror-selected {\n  background: #d7d4f0;\n}\n.CodeMirror-crosshair {\n  cursor: crosshair;\n}\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection {\n  background: #d7d4f0;\n}\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection {\n  background: #d7d4f0;\n}\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255,255,0,0.4);\n}\n.cm-force-border {\n  padding-right: 0.1px;\n}\n.cm-tab-wrap-hack:after {\n  content: '';\n}\nspan.CodeMirror-selectedtext {\n  background: none;\n}\n@-moz-keyframes _2qjs-l6C {\n50% {\n    background-color: transparent;\n}\n}\n@-webkit-keyframes _2qjs-l6C {\n50% {\n    background-color: transparent;\n}\n}\n@-o-keyframes _2qjs-l6C {\n50% {\n    background-color: transparent;\n}\n}\n@keyframes _2qjs-l6C {\n50% {\n    background-color: transparent;\n}\n}\n._3aWaq2T7 {\n  position: relative;\n  padding-top: 60px;\n  padding-bottom: 7px;\n  background: #f8f9fa;\n  border-radius: 4px;\n}\n._3aWaq2T7 img {\n  user-select: none;\n  width: 100%;\n}\n._12XeGTHc {\n  border: 1px solid #00f;\n}\n._4PBtdVk4 {\n  position: relative;\n}\n._3GPPXY0m {\n  display: flex;\n  position: absolute;\n  top: 14px;\n  left: 14px;\n}\n.CvR5NcCW {\n  flex: 0 0 auto;\n  position: relative;\n  cursor: pointer;\n}\n._11g5bSiB {\n  font-size: 14px;\n  color: #353535;\n  padding-left: 10px;\n  padding-right: 25px;\n  position: relative;\n  border-radius: 4px;\n  text-align: center;\n  border: 1px solid #ccc;\n  background: #fff;\n}\n._11g5bSiB:after {\n  content: '';\n  position: absolute;\n  height: 0px;\n  width: 0px;\n  border: 3.5px solid transparent;\n  border-top: 4px solid #828a92;\n  top: 14px;\n  right: 8px;\n}\n._11g5bSiB:hover {\n  background: #f3f4f5;\n}\n._1FSUXkGV {\n  position: absolute;\n  height: 160px;\n  width: 150px;\n  overflow-y: scroll;\n  border: 1px solid #eaeeef;\n  box-shadow: 0px 3px 14px 0px rgba(214,216,218,0.3);\n  border-radius: 4px;\n  padding: 6px 0px;\n  top: 37px;\n  left: 0;\n  z-index: 10;\n  background: #fff;\n}\n._4vZlzcfw {\n  font-size: 14px;\n  white-space: nowrap;\n  line-height: 32px;\n  height: 32px;\n  padding-left: 20px;\n  position: relative;\n}\n._4vZlzcfw ._247SSKPm {\n  margin-right: 5px;\n}\n._4vZlzcfw:hover {\n  background: #f8f9fa;\n}\n",""]),t.locals={main:"_3aWaq2T7",selected:"_12XeGTHc",codemirror:"_4PBtdVk4",btns:"_3GPPXY0m",lang:"CvR5NcCW",selector:"_11g5bSiB",list:"_1FSUXkGV",item:"_4vZlzcfw",icon:"_247SSKPm",blink:"_2qjs-l6C"}},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,"._15-LPGLf {\n  position: relative;\n  text-align: center;\n}\n._15-LPGLf img {\n  vertical-align: top;\n  width: 75%;\n}\n._3kQMHLDw {\n  user-select: none;\n  font-size: 16px;\n  color: #828a92;\n  text-align: center;\n  line-height: 24px;\n  padding-top: 10px;\n}\n._1JhJpBXj {\n  color: #828a92;\n  height: 60px;\n  line-height: 60px;\n  background: #f9f9f9;\n  font-size: 14px;\n}\n",""]),t.locals={main:"_15-LPGLf",title:"_3kQMHLDw",placeholder:"_1JhJpBXj"}},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,"._1sOtPf0d {\n  position: relative;\n  width: 75%;\n  margin: 0 auto;\n}\n._1sOtPf0d iframe {\n  vertical-align: top;\n}\n._2lRDlbrr {\n  z-index: 2;\n  position: relative;\n}\n",""]),t.locals={main:"_1sOtPf0d",content:"_2lRDlbrr"}},function(e,t,n){"use strict";var r=n(15),i=n(78);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,n){var r=n(8),i=n(109),o=n(66),a=n(17);e.exports=function(e,t){for(var n=i(t),s=a.f,c=o.f,l=0;l<n.length;l++){var u=n[l];r(e,u)||s(e,u,c(t,u))}}},function(e,t,n){var r=n(47),i=n(111),o=n(76),a=n(10);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(5);e.exports=r},function(e,t,n){var r=n(75),i=n(48).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(26),i=n(21),o=n(113),a=function(e){return function(t,n,a){var s,c=r(t),l=i(c.length),u=o(a,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(30),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(9),i=n(115),o=n(7)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(28);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(81);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(5),i=n(83),o=n(78),a=n(13);for(var s in i){var c=r[s],l=c&&c.prototype;if(l&&l.forEach!==o)try{a(l,"forEach",o)}catch(e){l.forEach=o}}},function(e,t,n){"use strict";var r=n(15),i=n(49).filter,o=n(119),a=n(50),s=o("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(6),i=n(7),o=n(120),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r,i,o=n(5),a=n(121),s=o.process,c=s&&s.versions,l=c&&c.v8;l?i=(r=l.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){var r=n(47);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(7),i=n(85),o=n(17),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r=n(16),i=n(17),o=n(10),a=n(86);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(47);e.exports=r("document","documentElement")},function(e,t,n){"use strict";var r=n(88).IteratorPrototype,i=n(85),o=n(42),a=n(51),s=n(25),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,l,!1,!0),s[l]=c,e}},function(e,t,n){var r=n(6);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(15),i=n(129);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,n){"use strict";var r=n(16),i=n(6),o=n(86),a=n(76),s=n(67),c=n(24),l=n(27),u=Object.assign,f=Object.defineProperty;e.exports=!u||i((function(){if(r&&1!==u({b:1},u(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||"abcdefghijklmnopqrst"!=o(u({},t)).join("")}))?function(e,t){for(var n=c(e),i=arguments.length,u=1,f=a.f,d=s.f;i>u;)for(var h,p=l(arguments[u++]),v=f?o(p).concat(f(p)):o(p),m=v.length,g=0;m>g;)h=v[g++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:u},function(e,t,n){var r=n(52),i=n(20),o=n(131);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){"use strict";var r=n(52),i=n(91);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(15),i=n(133);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,n){var r=n(5),i=n(134).trim,o=n(92),a=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==a(o+"08")||22!==a(o+"0x16");e.exports=c?function(e,t){var n=i(String(e));return a(n,t>>>0||(s.test(n)?16:10))}:a},function(e,t,n){var r=n(19),i="["+n(92)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){"use strict";var r=n(93).charAt,i=n(23),o=n(87),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r,i=n(5),o=n(94),a=n(53),s=n(138),c=n(144),l=n(9),u=n(23).enforce,f=n(73),d=!i.ActiveXObject&&"ActiveXObject"in i,h=Object.isExtensible,p=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v=e.exports=s("WeakMap",p,c);if(f&&d){r=c.getConstructor(p,"WeakMap",!0),a.REQUIRED=!0;var m=v.prototype,g=m.delete,y=m.has,b=m.get,w=m.set;o(m,{delete:function(e){if(l(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),g.call(this,e)||t.frozen.delete(e)}return g.call(this,e)},has:function(e){if(l(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),y.call(this,e)||t.frozen.has(e)}return y.call(this,e)},get:function(e){if(l(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),y.call(this,e)?b.call(this,e):t.frozen.get(e)}return b.call(this,e)},set:function(e,t){if(l(e)&&!h(e)){var n=u(this);n.frozen||(n.frozen=new r),y.call(this,e)?w.call(this,e,t):n.frozen.set(e,t)}else w.call(this,e,t);return this}})}},function(e,t,n){var r=n(6);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){"use strict";var r=n(15),i=n(5),o=n(77),a=n(20),s=n(53),c=n(95),l=n(96),u=n(9),f=n(6),d=n(142),h=n(51),p=n(143);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),g=v?"set":"add",y=i[e],b=y&&y.prototype,w=y,k={},x=function(e){var t=b[e];a(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof y||!(m||b.forEach&&!f((function(){(new y).entries().next()})))))w=n.getConstructor(t,e,v,g),s.REQUIRED=!0;else if(o(e,!0)){var E=new w,O=E[g](m?{}:-0,1)!=E,_=f((function(){E.has(1)})),S=d((function(e){new y(e)})),M=!m&&f((function(){for(var e=new y,t=5;t--;)e[g](t,t);return!e.has(-0)}));S||((w=t((function(t,n){l(t,w,e);var r=p(new y,t,w);return null!=n&&c(n,r[g],r,v),r}))).prototype=b,b.constructor=w),(_||M)&&(x("delete"),x("has"),v&&x("get")),(M||O)&&x(g),m&&b.clear&&delete b.clear}return k[e]=w,r({global:!0,forced:w!=y},k),h(w,e),m||n.setStrong(w,e,v),w}},function(e,t,n){var r=n(7),i=n(25),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var r=n(91),i=n(25),o=n(7)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(7)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},function(e,t,n){var r=n(9),i=n(90);e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},function(e,t,n){"use strict";var r=n(94),i=n(53).getWeakData,o=n(10),a=n(9),s=n(96),c=n(95),l=n(49),u=n(8),f=n(23),d=f.set,h=f.getterFor,p=l.find,v=l.findIndex,m=0,g=function(e){return e.frozen||(e.frozen=new y)},y=function(){this.entries=[]},b=function(e,t){return p(e.entries,(function(e){return e[0]===t}))};y.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,l){var f=e((function(e,r){s(e,f,t),d(e,{type:t,id:m++,frozen:void 0}),null!=r&&c(r,e[l],e,n)})),p=h(t),v=function(e,t,n){var r=p(e),a=i(o(t),!0);return!0===a?g(r).set(t,n):a[r.id]=n,e};return r(f.prototype,{delete:function(e){var t=p(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t).delete(e):n&&u(n,t.id)&&delete n[t.id]},has:function(e){var t=p(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t).has(e):n&&u(n,t.id)}}),r(f.prototype,n?{get:function(e){var t=p(this);if(a(e)){var n=i(e);return!0===n?g(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),f}}},function(e,t,n){var r=n(5),i=n(83),o=n(84),a=n(13),s=n(7),c=s("iterator"),l=s("toStringTag"),u=o.values;for(var f in i){var d=r[f],h=d&&d.prototype;if(h){if(h[c]!==u)try{a(h,c,u)}catch(e){h[c]=u}if(h[l]||a(h,l,f),i[f])for(var p in o)if(h[p]!==o[p])try{a(h,p,o[p])}catch(e){h[p]=o[p]}}}},function(e,t,n){"use strict";var r=n(15),i=n(147).left,o=n(82),a=n(50),s=o("reduce"),c=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(80),i=n(24),o=n(27),a=n(21),s=function(e){return function(t,n,s,c){r(n);var l=i(t),u=o(l),f=a(l.length),d=e?f-1:0,h=e?-1:1;if(s<2)for(;;){if(d in u){c=u[d],d+=h;break}if(d+=h,e?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:f>d;d+=h)d in u&&(c=n(c,u[d],d,l));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){var r=n(16),i=n(17).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in o)&&i(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(10);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(6);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(98),i=n(10),o=n(21),a=n(19),s=n(99),c=n(100);r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),l=String(this);if(!a.global)return c(a,l);var u=a.unicode;a.lastIndex=0;for(var f,d=[],h=0;null!==(f=c(a,l));){var p=String(f[0]);d[h]=p,""===p&&(a.lastIndex=s(l,o(a.lastIndex),u)),h++}return 0===h?null:d}]}))},function(e,t,n){"use strict";var r=n(98),i=n(10),o=n(24),a=n(21),s=n(30),c=n(19),l=n(99),u=n(100),f=Math.max,d=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var m=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(n,r){var i=c(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!m&&g||"string"==typeof r&&-1===r.indexOf(y)){var o=n(t,e,this,r);if(o.done)return o.value}var c=i(e),h=String(this),p="function"==typeof r;p||(r=String(r));var v=c.global;if(v){var w=c.unicode;c.lastIndex=0}for(var k=[];;){var x=u(c,h);if(null===x)break;if(k.push(x),!v)break;""===String(x[0])&&(c.lastIndex=l(h,a(c.lastIndex),w))}for(var E,O="",_=0,S=0;S<k.length;S++){x=k[S];for(var M=String(x[0]),N=f(d(s(x.index),h.length),0),C=[],T=1;T<x.length;T++)C.push(void 0===(E=x[T])?E:String(E));var A=x.groups;if(p){var D=[M].concat(C,N,h);void 0!==A&&D.push(A);var I=String(r.apply(void 0,D))}else I=b(M,h,N,C,A,r);N>=_&&(O+=h.slice(_,N)+I,_=N+M.length)}return O+h.slice(_)}];function b(e,n,r,i,a,s){var c=r+e.length,l=i.length,u=v;return void 0!==a&&(a=o(a),u=p),t.call(s,u,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var u=+o;if(0===u)return t;if(u>l){var f=h(u/10);return 0===f?t:f<=l?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):t}s=i[u-1]}return void 0===s?"":s}))}}))},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,".cvOfxyzb {\n  position: relative;\n  margin-top: 8px;\n  margin-bottom: 8px;\n}\n.cvOfxyzb .katex-display {\n  margin-bottom: 0;\n  margin-top: 0;\n}\n._2k7-6WJ9 {\n  z-index: 2;\n  position: relative;\n}\n",""]),t.locals={main:"cvOfxyzb",content:"_2k7-6WJ9"}},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,"._1hXuUPcV {\n  position: relative;\n  user-select: none;\n  margin: 0 3px;\n}\n._1hXuUPcV:hover ._37ZanZsq {\n  display: flex;\n}\n._37ZanZsq {\n  position: absolute;\n  z-index: 10;\n  width: 200px;\n  top: -26px;\n  left: 0px;\n  display: none;\n}\n._2mFjt23v {\n  flex: 0 0 58px;\n  text-align: center;\n  height: 24px;\n  line-height: 24px;\n  color: #444;\n  cursor: pointer;\n  font-size: 12px;\n  margin-right: 10px;\n  background: #fff;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n}\n._2RJvEdyN {\n  border-radius: 3px;\n  box-shadow: 0 0 1px 2px rgba(20,88,212,0.8);\n}\n._2RJvEdyN ._37ZanZsq {\n  display: flex;\n}\n",""]),t.locals={main:"_1hXuUPcV",btns:"_37ZanZsq",btn:"_2mFjt23v",on:"_2RJvEdyN"}},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,"._2jAWMnVw {\n  user-select: none;\n}\n",""]),t.locals={main:"_2jAWMnVw"}},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,"._3mismM9p {\n  position: relative;\n  margin-top: 8px;\n  margin-bottom: 8px;\n}\n._3mismM9p .katex-display {\n  margin-bottom: 0;\n  margin-top: 0;\n}\n._2hpWNtdi {\n  z-index: 2;\n  position: relative;\n}\n",""]),t.locals={main:"_3mismM9p",content:"_2hpWNtdi"}},function(e,t,n){(t=e.exports=n(12)(!1)).push([e.i,'* {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n._154FkdSi {\n  font-family: "PingFang SC", "Lantinghei SC", "Microsoft Yahei", "Hiragino Sans GB", "Microsoft Sans Serif", "WenQuanYi Micro Hei", Helvetica, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -webkit-tap-highlight-color: rgba(255,255,255,0);\n  line-height: 30px;\n  color: #353535;\n}\n._154FkdSi [data-size="9"] {\n  font-size: 12px;\n}\n._154FkdSi [data-size="10"] {\n  font-size: 14px;\n}\n._154FkdSi [data-size="11"] {\n  font-size: 16px;\n}\n._154FkdSi [data-size="12"] {\n  font-size: 18px;\n}\n._154FkdSi [data-size="14"] {\n  font-size: 20px;\n}\n._154FkdSi [data-size="16"] {\n  font-size: 22px;\n}\n._154FkdSi [data-size="18"] {\n  font-size: 24px;\n}\n._154FkdSi [data-size="22"] {\n  font-size: 26px;\n}\n._154FkdSi [data-size="24"] {\n  font-size: 28px;\n}\n._154FkdSi [data-size="30"] {\n  font-size: 30px;\n}\n._154FkdSi [data-size="36"] {\n  font-size: 32px;\n}\n._154FkdSi p {\n  line-height: 1.875;\n  font-size: 16px;\n  min-height: 30px;\n}\n._154FkdSi p[data-align-right] {\n  text-align: right;\n}\n._154FkdSi p[data-align-center] {\n  text-align: center;\n}\n._154FkdSi a[data-type="codeinline"] {\n  color: #353535;\n  text-decoration: none;\n  font-family: \'Source Code Pro\', Courier;\n  background: #f1f3f5;\n  border: 1px solid #eee;\n  border-radius: 3px;\n}\n._154FkdSi a[data-type="codeinline"]:hover {\n  text-decoration: none;\n  color: #353535;\n}\n._154FkdSi a[data-type="codeinline"]:active {\n  text-decoration: none;\n  color: #353535;\n}\n._154FkdSi hr {\n  padding-top: 30px;\n  margin-bottom: 30px;\n  border: 0;\n  border-bottom: 2px solid #eaeeef;\n}\n._154FkdSi h1 {\n  line-height: 48px;\n  padding-top: 26px;\n  padding-bottom: 4px;\n  font-weight: 700;\n  color: #353535;\n  font-size: 32px;\n}\n._154FkdSi h1[data-align-right] {\n  text-align: right;\n}\n._154FkdSi h1[data-align-center] {\n  text-align: center;\n}\n._154FkdSi h2 {\n  line-height: 44px;\n  padding-top: 26px;\n  padding-bottom: 4px;\n  font-weight: 700;\n  color: #353535;\n  font-size: 28px;\n}\n._154FkdSi h2[data-align-right] {\n  text-align: right;\n}\n._154FkdSi h2[data-align-center] {\n  text-align: center;\n}\n._154FkdSi h3 {\n  line-height: 40px;\n  padding-top: 26px;\n  padding-bottom: 4px;\n  font-weight: 700;\n  color: #353535;\n  font-size: 24px;\n}\n._154FkdSi h3[data-align-right] {\n  text-align: right;\n}\n._154FkdSi h3[data-align-center] {\n  text-align: center;\n}\n._154FkdSi h4 {\n  line-height: 36px;\n  padding-top: 26px;\n  padding-bottom: 4px;\n  font-weight: 700;\n  color: #353535;\n  font-size: 20px;\n}\n._154FkdSi h4[data-align-right] {\n  text-align: right;\n}\n._154FkdSi h4[data-align-center] {\n  text-align: center;\n}\n._154FkdSi h5 {\n  line-height: 32px;\n  padding-top: 26px;\n  padding-bottom: 4px;\n  font-weight: 700;\n  color: #353535;\n  font-size: 16px;\n}\n._154FkdSi h5[data-align-right] {\n  text-align: right;\n}\n._154FkdSi h5[data-align-center] {\n  text-align: center;\n}\n._154FkdSi [data-indent-1] {\n  margin-left: 24px;\n}\n._154FkdSi [data-indent-2] {\n  margin-left: 48px;\n}\n._154FkdSi [data-indent-3] {\n  margin-left: 72px;\n}\n._154FkdSi [data-indent-4] {\n  margin-left: 96px;\n}\n._154FkdSi [data-indent-5] {\n  margin-left: 120px;\n}\n._154FkdSi [data-indent-6] {\n  margin-left: 144px;\n}\n._154FkdSi [data-indent-7] {\n  margin-left: 168px;\n}\n._154FkdSi [data-indent-8] {\n  margin-left: 192px;\n}\n._154FkdSi ul p {\n  padding-left: 24px;\n  position: relative;\n}\n._154FkdSi ul p:before {\n  content: "";\n  display: inline-block;\n  font-size: 6px;\n  margin-left: -19px;\n  margin-right: 13px;\n  transform: translate(0, -2px);\n  height: 6px;\n  width: 6px;\n  background-color: #353535;\n  border-radius: 50%;\n}\n._154FkdSi ul [data-indent-1]:before {\n  height: 4px;\n  width: 4px;\n  border: 1px solid #353535;\n  background-color: transparent;\n}\n._154FkdSi ul [data-indent-5]:before {\n  height: 4px;\n  width: 4px;\n  border: 1px solid #353535;\n  background-color: transparent;\n}\n._154FkdSi ul [data-indent-2]:before {\n  border-radius: 0;\n}\n._154FkdSi ul [data-indent-6]:before {\n  border-radius: 0;\n}\n._154FkdSi ul [data-indent-3]:before {\n  height: 4px;\n  width: 4px;\n  border: 1px solid #353535;\n  background-color: transparent;\n  border-radius: 0;\n}\n._154FkdSi ul [data-indent-7]:before {\n  height: 4px;\n  width: 4px;\n  border: 1px solid #353535;\n  background-color: transparent;\n  border-radius: 0;\n}\n._154FkdSi ol p {\n  padding-left: 24px;\n  position: relative;\n}\n._154FkdSi ol p:before {\n  font-size: 16px;\n  content: attr(data-number) ".";\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: right;\n  line-height: 20px;\n  box-sizing: border-box;\n  min-width: 24px;\n  margin-left: -24px;\n  display: inline-block;\n  padding-right: 8px;\n  font-family: "Open Sans", "Helvetica Neue", sans-serif;\n}\n._154FkdSi li[data-liststyle="none"] p:before {\n  content: none;\n}\n._154FkdSi blockquote {\n  border-left: 3px solid #e3e5e8;\n  margin-left: 7px;\n  padding-left: 14px;\n  color: #828a92;\n}\n._154FkdSi [data-border-type="border"] img {\n  box-shadow: 0 0 0 2px #b4b5b6;\n}\n._154FkdSi [data-border-type="boxShadow"] img {\n  box-shadow: 0 5px 14px rgba(166,166,166,0.6);\n}\n._154FkdSi code {\n  font-family: \'Source Code Pro\', Courier;\n}\n._154FkdSi i {\n  font-style: italic;\n}\n._154FkdSi u {\n  text-decoration: underline;\n}\n._154FkdSi strong {\n  font-weight: 700;\n}\n._154FkdSi s {\n  text-decoration: line-through;\n}\n._154FkdSi s span {\n  text-decoration: line-through;\n}\n._2xCu2OUY {\n  height: 100%;\n  position: relative;\n  background: #fff;\n  color: #333;\n  font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -webkit-tap-highlight-color: rgba(255,255,255,0);\n}\n._2xCu2OUY .ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  font-variant-ligatures: none;\n  min-height: 800px;\n  outline: none;\n}\n._3dcopcd6 {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n._154FkdSi {\n  position: relative;\n}\n._39Sh0JWm {\n  position: relative;\n}\n.YLUYWGeV {\n  user-select: none;\n  position: absolute;\n  z-index: 10;\n  width: 200px;\n  top: 0px;\n  padding-bottom: 6px;\n  left: -3000px;\n  display: flex;\n}\n._3DSA44lQ {\n  flex: 0 0 58px;\n  text-align: center;\n  height: 24px;\n  line-height: 24px;\n  color: #444;\n  cursor: pointer;\n  font-size: 12px;\n  margin-right: 10px;\n  background: #fff;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n}\n._2vz-RJlv {\n  height: 30px;\n  background: #fff;\n  cursor: text;\n}\n',""]),t.locals={editor:"_154FkdSi",main:"_2xCu2OUY",contentWrapScroller:"_3dcopcd6",scrollWrap:"_39Sh0JWm",menu:"YLUYWGeV",btn:"_3DSA44lQ",foot:"_2vz-RJlv"}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if("undefined"==typeof DOMParser)throw new Error("The native `DOMParser` global which the `Html` serializer uses by default is not present in this environment. You must supply the `options.parseHtml` function instead.");return(new DOMParser).parseFromString(e,"text/html").body||window.document.createElement("body")}n.r(t);var f=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),l(this,"deserialize",(function(e){var n=t.parseHtml(e),r=Array.from(n.childNodes);return t.deserializeElements(r)})),l(this,"deserializeElements",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return e.filter(t.cruftNewline).forEach((function(e){var r=t.deserializeElement(e);switch(d(r)){case"array":n=n.concat(r);break;case"object":n.push(r)}})),n})),l(this,"deserializeElement",(function(e){var n;e.tagName||(e.tagName="");var r,i=function(e){switch("[object NodeList]"===Object.prototype.toString.call(e)&&(e=Array.from(e)),d(e)){case"array":return t.deserializeElements(e);case"object":return t.deserializeElement(e);case"null":case"undefined":return;default:throw new Error('The `next` argument was called with invalid children: "'.concat(e,'".'))}},a=o(t.rules);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.deserialize){var c=s.deserialize(e,i),l=d(c);if("array"!==l&&"object"!==l&&"null"!==l&&"undefined"!==l)throw new Error('A rule returned an invalid deserialized representation: "'.concat(n,'".'));if(void 0!==c){if(null===c)return null;n=c;break}}}}catch(e){a.e(e)}finally{a.f()}return n||i(e.childNodes)})),l(this,"deserializeMark",(function(e){var n=e.type,r=e.data;return e.nodes.reduce((function(e,i){var o=function e(i){return"mark"===i.object?t.deserializeMark(i):("text"===i.object?(i.marks=i.marks||[],i.marks.push({type:n,data:r})):i.nodes&&(i.nodes=i.nodes.map(e)),i)}(i);return Array.isArray(o)?e.concat(o):(e.push(o),e)}),[])})),l(this,"cruftNewline",(function(e){return!("#text"===e.nodeName&&"\n"===e.nodeValue)}));var r=n.parseHtml,a=void 0===r?u:r,s=n.rules,f=void 0===s?[]:s;this.rules=i(f),this.parseHtml=a};function d(e){switch(toString.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"===r(e)&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(e){if(e instanceof TypeError)return"arguments"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":r(e)}var h=function(e){Array.isArray(e)&&(e=e[0]);var t=[];e=(e=(e=e.replace(/(<pre[^>]*>)((.|\n)*?)<\/pre>/g,(function(e,n,r){return t.push(r),"".concat(n,"$$$").concat(t.length-1,"</pre>")}))).replace(/\n/g,"").trim()).replace(/\<[^\>]+\>/g,(function(e){return e.replace(/ +/g," ").replace(/\< /g,"<").replace(/ \>/g,">").replace(/\<\/ /g,"</").replace(/ \/\>/g,"/>")}));var n=["strong","b","a","code","span","i","em","s","u","strike","sub","sup"];return(e=(e=e.replace(/([a-z1-6]+)(\/?\>)( +)/g,(function(e,t,r){return n.indexOf(t)>-1?e:t+r}))).replace(/( +)(\<\/?)([a-z1-6]+)/g,(function(e,t,r,i){return n.indexOf(i)>-1?e:r+i}))).replace(/(<pre[^>]*>)\$\$\$(\d+)<\/pre>/g,(function(e,n,r){var i=parseInt(r,10);return Number.isInteger(i)?"".concat(n).concat(t[i],"</pre>"):e}))},p=n(0);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={p:p.PARAGRAPH,blockquote:p.BLOCK_QUOTE,ul:p.BULLETED_LIST,hr:p.HORIZONTAL_RULE},b={code:p.CODE_INLINE,sup:p.SUP,sub:p.SUB},w={rules:[{deserialize:function(e,t){if(A(e,"center"))return k(p.PARAGRAPH,{align:"center"},t(e.childNodes))}},{deserialize:function(e,t){var n=e.tagName.toLowerCase();if(["h1","h2","h3","h4","h5"].indexOf(n)>-1)return k(p.HEADING,{level:Number(n.replace("h",""))},t(e.childNodes))}},{deserialize:function(e,t){if(A(e,"a"))return k(p.LINK,{href:e.getAttribute("href")},t(e.childNodes))}},{deserialize:function(e){var t=e.tagName.toLowerCase();if("span"===t&&(e.classList.contains("MathJax_Preview")||e.classList.contains("MathJax")))return null;if("script"===t){var n=e.getAttribute("type")||"";return n.indexOf("math/tex")>-1&&n.indexOf("mode=display")<0?k(p.KATEX_INLINE,{mathString:e.innerHTML}):n.indexOf("mode=display")>-1?k(p.KATEX_BLOCK,{mathString:e.innerHTML}):void 0}}},{deserialize:function(e){if(A(e,"img")){var t=e.getAttribute("title");return k(p.IMAGE,m(m({src:e.getAttribute("src")},t?{title:t}:{}),"unpreview"===e.getAttribute("alt")?{unpreview:!0}:{}))}}},{deserialize:function(e,t){if(A(e,"p")){if(I(e.childNodes))return t(function(e,t){var n=[],r=[];return L(e,(function(e){A(e,"br")?(0===n.length&&(n=[{nodeName:"#text",nodeValue:""}]),r.push({tagName:t,nodeName:t,childNodes:n}),n=[]):n.push(e)})),n.length>0&&r.push({tagName:t,nodeName:t,childNodes:n}),r}(e.childNodes,"p"));if(D(e)){var n=e.childNodes[0].childNodes[0].getAttribute("title");return k(p.IMAGE,m(m({src:e.childNodes[0].childNodes[0].getAttribute("src"),href:e.childNodes[0].getAttribute("href")},n?{title:n}:{}),"unpreview"===e.childNodes[0].childNodes[0].getAttribute("alt")?{unpreview:!0}:{}))}if(e.childNodes.length>0&&(o=e.childNodes,Array.prototype.some.call(o,(function(e){return T(e)}))||function(e){return Array.prototype.some.call(e,(function(e){return C(e)}))}(e.childNodes))){var r=[];return L(e.childNodes,(function(t){if(T(t))A(t,"a")?r.push(_("p",e,[t])):r.push(t);else if(C(t)){var n=t.nodeValue,i=0;n.replace(/\$\$[^\$]+\$\$/g,(function(t,o){if(o>0&&o>i){var a=n.substring(i,o);r.push(_("p",e,[O(a)]))}r.push(_("p",e,[O(t)])),i=o+t.length})),i<n.length&&r.push(_("p",e,[O(n.substring(i))]))}else r[r.length-1]&&"p"===r[r.length-1].nodeName&&!D(r[r.length-1])?r[r.length-1].childNodes.push(t):r.push(_("p",e,[t]))})),t(r)}if(1===e.childNodes.length&&N(e.childNodes[0])){var i=[];return e.childNodes[0].nodeValue.match(/\$\$[^\$]+\$\$/g).forEach((function(e){e=e.replace(/\$/g,"").replace(/&br;/g,"\n"),i.push(k(p.KATEX_BLOCK,{mathString:e}))})),i}}var o}},{deserialize:function(e,t){if(A(e,"li"))return function e(t,n,r,i){r=r||0;var o=[],a=[];return L(t.childNodes,(function(s,c){if(function(e){return["ul","ol"].indexOf(e.nodeName.toLowerCase())>-1}(s))L(s.childNodes,(function(t){o=o.concat(e(t,n,r+1))}));else if(T(s)){var l=null,u=r;if((o.length>0||i)&&(l={listStyle:"none"}),A(s,"p"))if(I(s.childNodes)){var f=_("li",t.parentNode,s.childNodes);o=o.concat(e(f,n,r,o.length>0))}else{var d=null;u>0&&(d={indent:u});var h=k(p.PARAGRAPH,d,n(s.childNodes));o.push(k(p.LIST_ITEM,l,[h]))}else o.push(k(p.LIST_ITEM,l,n([s])))}else{if(A(s,"br"))return;a.push(s);var v=t.childNodes[c+1];if(!v||v&&T(v)||A(v,"br")){var m=null,g=r;(o.length>0||i)&&(m={listStyle:"none"});var y=null;g>0&&(y={indent:g});var b=k(p.PARAGRAPH,y,n(a));o.push(k(p.LIST_ITEM,m,[b])),a=[]}}})),o}(e,t,0)}},{deserialize:function(e){if(A(e,"table"))return k(p.EMBED_COMPONENT,{type:"table",data:{html:e.outerHTML}})}},{deserialize:function(e){if(A(e,"pre")){var t="",n="";return Array.prototype.some.call(e.childNodes,(function(e){return A(e,"code")}))?(n=e.childNodes[0].innerHTML,(t=e.childNodes[0].getAttribute("class"))&&(t=t.replace("language-","").toLowerCase())):n=e.innerHTML,k(p.CODE_BLOCK,t?{lang:t}:null,[x(R(n.replace(/<br>/g,"\n")))])}}},{deserialize:function(e){if(A(e,"video")){var t=e.getAttribute("poster");return k(p.EMBED_COMPONENT,{type:"video",data:m(m({},t?{previewImage:t}:{}),{},{src:Array.prototype.map.call(e.childNodes,(function(e){return e.getAttribute("src")}))})})}}},{deserialize:function(e){if(A(e,"audio"))return k(p.EMBED_COMPONENT,{type:"audio",data:{src:Array.prototype.map.call(e.childNodes,(function(e){return e.getAttribute("src")}))}})}},{deserialize:function(e,t){if(A(e,"ol")){var n=e.getAttribute("start"),r=null;return n&&(r={start:parseInt(n)}),k(p.NUMBERED_LIST,r,t(e.childNodes))}}},{deserialize:function(e,t){var n=e.tagName.toLowerCase();return y[n]?k(y[n],null,t(e.childNodes)):b[n]?"code"===n?k(p.CODE_INLINE,null,t([O(R(e.innerHTML),e)])):k(b[n],null,t(e.childNodes)):void 0}},{deserialize:function(e){if(M(e)&&/\$[^\$]+\$/.test(e.nodeValue)&&function(e,t){return!e||!e.nodeName||e.nodeName.toLowerCase()!==t}(e.parentNode,"code")){var t=[],n=0,r=e.nodeValue;return r.replace(/\$[^\$]+\$/g,(function(e,i){i>n&&t.push(x(r.substring(n,i))),t.push(k(p.KATEX_INLINE,{mathString:e.replace(/\$/g,"")})),n=i+e.length})),n<r.length&&t.push(x(r.substring(n))),t}}},{deserialize:function(e){if("#text"===e.nodeName){if(e.nodeValue&&e.nodeValue.match(/<!--.*?-->/))return;var t=function e(t,n){n=n||[];var r=t.parentNode;if(!r)return n;var i=S[r.nodeName.toLowerCase()];if(i){var o=i(r);o&&n.push(o)}return e(r,n)}(e);return x(e.nodeValue,t)}}}]};function k(e,t,n){var r={type:e};return t&&(r.attrs=t),n&&n[0]&&(r.content=n),r}function x(e,t){var n={type:"text",text:e};return t&&t[0]&&(n.marks=t),n}function E(e,t){var n={type:e};return t&&(n.attrs=t),n}function O(e,t){return{nodeName:"#text",nodeValue:e,parentNode:t||{nodeName:"",tagName:""}}}function _(e,t,n,r){return m({nodeName:e,tagName:e,parentNode:t||{nodeName:"",tagName:""},childNodes:n||[]},r||{})}var S={i:function(){return E(p.ITALIC)},strong:function(){return E(p.STRONG)},b:function(){return E(p.STRONG)},em:function(){return E(p.ITALIC)},span:function(e){var t=e.tagName.toLowerCase();return"span"===t&&e.classList.contains("orange")?E("color",{color:"#fa8919",name:"orange"}):"span"===t&&e.classList.contains("reference")?E("color",{color:"#888",name:"gray"}):void 0}};function M(e){return e&&("#text"===e.nodeName||3===e.nodeType)}function N(e){return M(e)&&/\$\$[^\$]+\$\$/.test(e.nodeValue)}function C(e){return!!N(e)&&e.nodeValue.replace(/\$\$[^\$]+\$\$/g,"").replace(/ /g,"").length>0}function T(e){return!!(A(e,"a")&&e.innerHTML.indexOf("<img")>-1)||["img","p","video","audio","li","ul","ol","pre","blockquote"].indexOf(e.nodeName.toLowerCase())>-1}function A(e,t){return!(!e||!e.nodeName)&&e.nodeName.toLowerCase()===t}function D(e){return!!(A(e,"p")&&1===e.childNodes.length&&e.childNodes[0].tagName&&A(e.childNodes[0],"a")&&e.childNodes[0].childNodes[0]&&e.childNodes[0].childNodes[0].tagName&&A(e.childNodes[0].childNodes[0],"img"))}function I(e){return Array.prototype.some.call(e,(function(e){return A(e,"br")}))}function L(e,t){Array.prototype.forEach.call(e,t)}function R(e){return e.replace(/&quot;/g,'"').replace(/&nbsp;/g," ").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}var P,B=n(3);function z(e){for(var t=e.depth;t>0;){var n=e.node(t);if(n.isBlock)return{depth:t,node:n};t--}}function $(e,t){var n=e.selection.$cursor,r=z(n),i=t.doc.resolve(n.start(r.depth)),o=i.blockRange(i),a=o&&Object(B.h)(o);return null==a?t:t.lift(o,a)}function j(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.doc.resolve(n);i.parent.isInline&&(i=t.doc.resolve(i.before()));var o=i.blockRange();return o.startIndex+1===o.endIndex?t.lift(o,r):t}function H(e,t){var n=e.resolve(t),r=z(n);return n.node(r.depth-1)}function F(e,t){for(var n=e.resolve(t),r=[],i=n.depth,o=1;o<i;o++)r.push({node:n.node(o),nodePos:n.before(o)});return r}function U(e,t,n,r){return"number"!=typeof n&&(n=e.selection.from,r=e.selection.to),function(e,t,n){var r={bottomBlocks:[],hasAtomBlock:!1};return e.nodesBetween(t,n,(function(i,o){if(i.type.spec.isolating&&(r.hasAtomBlock=!0),i.isTextblock){var a=o+i.nodeSize-t,s=n-o;if(t!==n&&(1===s||1===a))return;var c=F(e,o+1);r.bottomBlocks.push({type:i.type.name,nodeType:i.type,node:i,parentsTypeList:c.map((function(e){return e.node.type.name})),parents:c,nodePos:o,distantFrom:a,distantTo:s})}})),r}(t.doc,n,r)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t,n){var r=e.curSelection.from,i=e.doc.resolve(r);return function(e,t,n,r){var i=t&&Object(B.g)(t,n,r);return i?e.wrap(t,i):e}(e,i.blockRange(),t,n)}function W(e,t,n,r,i){return n.bottomBlocks.forEach((function(n){var o=t.doc.resolve(t.mapping.map(n.nodePos+1)).blockRange(),a=function(e,t,n,r){var i=[];t.forEach((function(e){var t=e.node.type.name,o=e.attrs;n===t||!G[t]||function(e){return G[e]&&G[e].isNestType}(t)||function(e,t){return!!(e&&G[e]&&G[e].exclusion&&G[e].exclusion.indexOf(t)>-1)}(r,t)||i.push({type:t,attrs:o,order:G[t].order})})),r&&G[r]&&i.push({type:r,attrs:null,order:G[r].order});var o=[];return i.forEach((function(e){var t=e.type;G[t]&&G[t].innerTypes&&G[t].innerTypes.forEach((function(e){o.push({type:e,attrs:null,order:G[e].order})}))})),i=(i=(i=i.concat(o)).sort((function(e,t){return t.order-e.order}))).map((function(t){return{type:e.schema.nodes[t.type],attrs:t.attrs}}))}(e,n.parents,r,i);t=t.wrap(o,a)})),t}var G=(K(P={},p.BLOCK_QUOTE,{order:2,exclusion:[p.HEADING]}),K(P,p.NUMBERED_LIST,{order:1,exclusion:[p.BULLETED_LIST],innerTypes:[p.LIST_ITEM]}),K(P,p.BULLETED_LIST,{order:1,exclusion:[p.NUMBERED_LIST],innerTypes:[p.LIST_ITEM]}),K(P,p.LIST_ITEM,{order:0,isNestType:!0}),P);function q(e,t,n,r){if(!e.selection.empty)return t;var i=e.schema.nodes[n].create(r),o=t.curSelection.$cursor,a=z(o),s=a.node,c=a.depth,l=s,u=o.before(c),f=o.after(c),d=o.pos;if(c>1){var h=U(e,t,d,d);d=(t=j(e,t,d)).mapping.map(f),t=W(e,t=t.replaceRangeWith(d,d,i),h)}else t=/^\s{0,3}$/.test(l.textContent)&&1===o.depth?t.replaceRangeWith(u,o.end(c),i):t.replaceRangeWith(f,f,i);return t}var J=n(1);function X(e,t,n,r){var i;if(r)i=e.doc.resolve(r);else{if(!e.selection.empty)return t;i=t.curSelection.$cursor}var o=z(i);if(!o)return t;var a=o.node,s=o.depth,c=a,l=i.before(s),u=i.after(s);if(r=i.pos,s>1){var f=U(e,t,r,r);r=(t=j(e,t,r)).doc.resolve(t.mapping.map(r)).after(),t=W(e,t=t.replaceRange(r,r,n),f)}else if(/^\s{0,3}$/.test(c.textContent)&&1===i.depth){var d=e.schema.nodes[p.PARAGRAPH].create(),h=J.c.from(d);h=n.content.append(h),n=new J.i(h,0,1),t=t.replaceRange(l,i.end(s),n)}else t=t.replaceRange(u,u,n);return t}var Z,Q=n(2);function Y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e.selection.empty)return t;var i=e.schema.nodes[n],o=e.selection,a=o.from,s=o.to;return e.doc.nodesBetween(a,s,(function(o,c){if(o.type.name===p.PARAGRAPH){var l=Math.max(c+1,a),u=Math.min(c+o.nodeSize-1,s),f=[];e.doc.content.cut(l,u).descendants((function(e){if(e.isText)if(e.marks&&e.marks[0]&&i.spec.marks){var t=e.mark(e.marks.filter((function(e){return i.spec.marks.split("").indexOf(e.type.name)>-1})));f.push(t)}else f.push(e)}));var d=i.createAndFill(r,f);l=t.mapping.map(l),u=t.mapping.map(u);var h=t.doc.resolve(l),v=t.doc.resolve(u),m=0,g=0;h.parent.type.name===n&&(m=1),v.parent.type.name===n&&(g=1);var y=new J.i(J.c.from(d),m,g);t=t.step(new B.c(l,u,y,!1))}})),t=t.setSelection(Q.g.create(t.doc,t.mapping.map(a),t.mapping.map(s)))}function ee(e,t,n,r){return e.selection.empty?([p.LINK].indexOf(n)>-1&&(t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.selection.$cursor.pos,o=r.defaultText;if("string"==typeof o&&o.length>0){var a=e.schema.nodes[n],s=a.createAndFill(r,e.schema.text(o));return t.replaceWith(i,i,s)}return t}(e,t,n,r)),[p.KATEX_INLINE].indexOf(n)>-1&&(t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.selection.$cursor.pos,o=e.schema.nodes[n],a=o.create(r);return t.replaceWith(i,i,a)}(e,t,n,r))):t=Y(e,t,n,r),t}function te(e,t){e.state.plugins.forEach((function(n){n.spec.afterEachTransaction&&(t=n.spec.afterEachTransaction(e.state,t))})),e.dispatch(t)}function ne(e){return function(t){te(e,t)}}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce,le=[p.BLOCK_QUOTE,p.NUMBERED_LIST,p.BULLETED_LIST,p.CODE_INLINE],ue=[p.STRONG,p.UNDERLINE,p.ITALIC,p.DEL],fe=[p.PARAGRAPH,p.HEADING,p.IMAGE,p.VIDEO,p.KATEX_BLOCK,p.CODE_BLOCK,p.HORIZONTAL_RULE,p.LINK],de=[p.SIZE,p.COLOR,p.BG_COLOR],he=[p.ALIGN,p.INDENT],pe=[p.CODE_INLINE],ve=[p.CODE_BLOCK,p.IMAGE,p.VIDEO,p.KATEX_BLOCK,p.HORIZONTAL_RULE],me=[p.LINK],ge=[].concat(le,ue,fe,de,he),ye=(se(Z={},p.HEADING,[p.STRONG,p.SIZE,p.LINK,p.CODE_INLINE,p.INDENT]),se(Z,p.BLOCK_QUOTE,[p.ALIGN]),se(Z,p.NUMBERED_LIST,[p.ALIGN]),se(Z,p.BULLETED_LIST,[p.ALIGN]),se(Z,p.CODE_INLINE,[p.LINK]),se(Z,p.LINK,[p.LINK,p.CODE_INLINE]),se(Z,p.KATEX_INLINE,[p.LINK,p.CODE_INLINE]),Z);function be(e,t){var n={};if("undefined"!=typeof document&&!document.hasFocus()||t&&!t.hasFocus())return{menuStatus:n=we(ge),bottomBlock:null,marks:[]};var r=function(e){if(e.selection.node)return null;var t=e.selection,n=t.from,r=t.to,i=t.$from,o=[],a=null,s=null,c=null,l=0,u=null,f=[],d=[],h=e.doc;h.nodesBetween(n,r,(function(t,n){if(t.isText){var r=h.resolve(n);if(s=r.parent.isInline?xe([r.parent.type.name],s):xe(["text"],s),0===t.marks.length)a=xe(["nomark"],a);else{var i=[];t.marks.forEach((function(e){e.isInSet(d)||d.push(e),i.push(e.type.name)})),a=xe(i,a)}}else{if([p.PARAGRAPH,p.HEADING,p.CODE_BLOCK].indexOf(t.type.name)>-1&&(u=t,l++,f.push(t)),[p.PARAGRAPH,p.HEADING,p.CODE_INLINE,p.LINK].indexOf(t.type.name)>-1){var v=e.doc.resolve(n+1),m=v.node(1),g=v.node(2),y=m.type.name,b=g?g.type.name:y;c=xe([y,b],c)}o=function(e,t){return t.indexOf(e)<0&&t.push(e),t}(t.type.name,o)}}));var v=1===l;return s=(s||[]).filter((function(e){return["text"].indexOf(e)<0})),a=(a||[]).filter((function(e){return["nomark"].indexOf(e)<0})),c=(c||[]).filter((function(e){return[p.LIST_ITEM].indexOf(e)<0})),e.selection.empty&&(e.storedMarks||i.marks()||[]).forEach((function(e){e.isInSet(d)||d.push(e),a.indexOf(e.type.name)<0&&a.push(e.type.name)})),{nodes:o,bottomBlocks:f,marks:d,sameMarkTypes:a,sameBlockNodeTypes:c,sameInlineNodeTypes:s,selectionInSameBottomBlock:v,bottomBlock:v?u:null}}(e);return n=ke(ge,"n"),{menuStatus:n=function(e,t){return!!e.selection.node||!!(t&&t.selectionInSameBottomBlock&&[p.CODE_BLOCK].indexOf(t.bottomBlock.type.name)>-1)}(e,r)?we(ge):Object.assign(n,function(e){return function(e){return ke(e,"a")}([].concat(oe(e.sameBlockNodeTypes.filter((function(e){return fe.indexOf(e)<0}))),oe(e.sameInlineNodeTypes.filter((function(e){return fe.indexOf(e)<0}))),oe(e.sameMarkTypes.filter((function(e){return de.indexOf(e)<0})))))}(r),function(e){if(!e.selection.empty)return{};var t={},n=e.schema.marks,r=e.selection.$cursor.marks(),i=e.storedMarks;return ue.forEach((function(e){n[e].isInSet(i||r)?t[e]="a":t[e]="n"})),t}(e),function(e){var t={};return e.nodes.forEach((function(e){ye[e]&&(t=Object.assign(t,we(ye[e])))})),t}(r),function(e){return e.selection.empty?we(pe):{}}(e),function(e){return e.selection.empty?{}:we(ve)}(e),function(e){return e.selectionInSameBottomBlock?{}:we(me)}(r)),bottomBlocks:r?r.bottomBlocks:[],bottomBlock:r?r.bottomBlock:null,marks:r?r.marks:[]}}function we(e){return ke(e,"d")}function ke(e,t){return e.reduce((function(e,n){return ie(ie({},e),{},se({},n,t))}),{})}function xe(e,t){if(!e||!t)return e||t;var n=[];return e.forEach((function(e){t.indexOf(e)>-1&&n.indexOf(e)<0&&n.push(e)})),n}function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t,n){n=e.schema.marks[n];var r=e.selection,i=r.empty,o=r.$cursor,a=r.ranges;if(i&&!o||!Se(e.doc,a,n))return t;if(o)n.isInSet(e.storedMarks||o.marks())&&(t=t.removeStoredMark(n));else{for(var s=!1,c=0;!s&&c<a.length;c++){var l=a[c],u=l.$from,f=l.$to;s=e.doc.rangeHasMark(u.pos,f.pos,n)}for(var d=0;d<a.length;d++){var h=a[d],p=h.$from,v=h.$to;s&&(t=t.removeMark(p.pos,v.pos,n))}}return t}function _e(e,t,n,r){n=e.schema.marks[n];var i=e.selection,o=i.empty,a=i.$cursor,s=i.ranges;if(o&&!a||!Se(e.doc,s,n))return t;if(a)t=t.addStoredMark(n.create(r));else for(var c=0;c<s.length;c++){var l=s[c],u=l.$from,f=l.$to;t=t.addMark(u.pos,f.pos,n.create(r))}return t}function Se(e,t,n){for(var r=function(r){var i=t[r],o=i.$from,a=i.$to,s=0===o.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,a.pos,(function(e){if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return{v:!0}},i=0;i<t.length;i++){var o=r(i);if("object"===Ee(o))return o.v}return!1}function Me(e,t,n){var r=U(e,t);return W(e,t=Ce(e,t=Te(e,t,r),r,p.PARAGRAPH),r,n,null)}function Ne(e,t,n,r){var i=U(e,t);if(t=Te(e,t,i),[p.HEADING,p.PARAGRAPH].indexOf(n)>-1&&(t=Ce(e,t,i,n,r)),[p.BLOCK_QUOTE,p.NUMBERED_LIST,p.BULLETED_LIST].indexOf(n)>-1){var o=n;t=W(e,t=Ce(e,t,i,p.PARAGRAPH),i,null,o)}return t}function Ce(e,t,n,r,i){return n.bottomBlocks.forEach((function(n){var o=t.mapping.map(n.nodePos+1);t=t.setBlockType(o,o,e.schema.nodes[r],i)})),t}function Te(e,t,n){return n.bottomBlocks.forEach((function(n){t=j(e,t,t.mapping.map(n.nodePos+1))})),t}function Ae(e,t){return U(e,t).bottomBlocks.forEach((function(e){if(e.node.type.name===p.PARAGRAPH){var n=e.node.attrs.indent||0;if((n+=1)<9){var r=e.node.attrs.number||0;t=t.setNodeMarkup(e.nodePos,null,{indent:n,number:r})}}})),t}function De(e,t){return U(e,t).bottomBlocks.forEach((function(e){if(e.node.type.name===p.PARAGRAPH){var n=e.node.attrs.indent||0;if((n-=1)>-1){var r=e.node.attrs.number||0;t=t.setNodeMarkup(e.nodePos,null,{indent:n,number:r})}}})),t}function Ie(e,t,n){return U(e,t).bottomBlocks.forEach((function(e){if(!([p.PARAGRAPH,p.HEADING].indexOf(e.node.type.name)<0)){var r=Object.assign({},e.node.attrs||{},n||{});t=t.setNodeMarkup(e.nodePos,null,r)}})),t}function Le(e,t,n){var r=e.schema.nodes[p.PARAGRAPH].create(null,""),i=t.doc.resolve(n).nodeAfter;return(t=t.replaceWith(n,n+i.nodeSize,r)).setSelection(Q.g.create(t.doc,n+1))}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=(Re(ce={},p.PARAGRAPH,ze),Re(ce,p.HEADING,ze),Re(ce,p.BLOCK_QUOTE,ze),Re(ce,p.NUMBERED_LIST,ze),Re(ce,p.BULLETED_LIST,ze),Re(ce,p.CODE_BLOCK,Be),Re(ce,p.STRONG,$e),Re(ce,p.ITALIC,$e),Re(ce,p.DEL,$e),Re(ce,p.UNDERLINE,$e),Re(ce,p.COLOR,$e),Re(ce,p.BG_COLOR,$e),Re(ce,p.SIZE,$e),Re(ce,p.HORIZONTAL_RULE,Be),Re(ce,p.CODE_INLINE,(function(e,t,n){var r=e.state,i=r.tr;i=n&&n.remove?function(e,t,n){if(e.selection.empty)return t;var r=e.selection,i=r.from,o=r.to,a=e.schema.nodes[n];e.doc.nodesBetween(i,o,(function(r,s){if(r.type.name===n){var c,l,u,f=!1,d=!1;i-1<=s?c=s:(f=!0,c=i),o+1>=s+r.nodeSize?l=s+r.nodeSize:(d=!0,l=o);var h=[];e.doc.content.cut(c,l).descendants((function(e){e.isText&&h.push(e)}));var p=J.c.fromArray(h),v=a.create(),m=J.c.from(v.copy()),g=J.c.from(v.copy());f||d?f&&d?u=new J.i(m.append(p.append(g)),1,1):f?u=new J.i(m.append(p),1,0):d&&(u=new J.i(p.append(g),0,1)):u=new J.i(p,0,0),c=t.mapping.map(c),l=t.mapping.map(l),t=t.step(new B.c(c,l,u,!1))}}));var s=t.mapping.map(i),c=t.mapping.map(o);return t=t.setSelection(Q.g.create(t.doc,s,c))}(r,i,t):Y(r,i,t,n),te(e,i)})),Re(ce,p.ALIGN,(function(e,t,n){var r=e.state;te(e,Ie(r,r.tr,n))})),Re(ce,p.INDENT,(function(e,t,n){var r=e.state,i=r.tr;i=n&&n.remove?De(r,r.tr):Ae(r,r.tr),te(e,i)})),ce);function Be(e,t,n){var r=e.state,i=r.tr;te(e,i=q(r,i,t,n))}function ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.state;r.tr,te(e,n.remove?Me(r,r.tr,t):Ne(r,r.tr,t,n))}function $e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.state;r.tr,te(e,n.remove?Oe(r,r.tr,t):_e(r,r.tr,t,n))}function je(e,t){var n=e.state,r=n.tr;te(e,r=function(e,t,n){var r=t.doc.nodeAt(n);if(!r||r.isText||!r.isInline)return t;var i=J.c.from(e.schema.text(r.textContent)),o=new J.i(i,0,0),a=(t=t.step(new B.c(n,n+r.nodeSize,o,!1))).mapping.map(n),s=t.mapping.map(n+r.nodeSize);return t.setSelection(Q.g.create(t.doc,a,s))}(n,r,t))}function He(e,t,n){var r=e.state,i=r.tr,o=[];if(t&&t[0]){var a=t.length;t.forEach((function(t,s){if(function(e){return/image.*/.test(e.type)}(t)){var c=new FileReader;c.onload=function(t){var c=t.target.result;if(o.push(r.schema.nodes[p.IMAGE].create({src:c,fromPaste:!0})),a===s+1){var l=new J.i(J.c.fromArray(o),0,0);i=X(r,i,l,n),te(e,i)}},c.readAsDataURL(t)}}))}}var Fe={NET_ERROR:1,NET_FREQUENT_ERROR:5,TOO_FAR_BEHIND_VERSION:2,CONFLIT_SERVER_VERSION:3,DOCUMENT_TOO_BIG:4},Ue={SUCCESS_RESPONSE:101,UNFINISHED_RESPONSE:103,EMPTY_RESPONSE:102},Ke="edit",Ve="paste";function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ge=function e(t,n,r){We(this,e),this.step=t,this.inverted=n,this.origin=r},qe=function e(t,n){We(this,e),this.version=t,this.unconfirmed=n};function Je(e){for(var t=[],n=0;n<e.steps.length;n++){var r=e.steps[n];t.push(new Ge(r,r.invert(e.docs[n]),e))}return t}var Xe=new Q.e("collab");function Ze(e,t,n,r){for(var i=Xe.getState(e),o=r.version,a=Xe.get(e).spec.config.clientID,s=0;s<n.length&&n[s]===a;)++s;var c=i.unconfirmed.slice(s);if(!(t=s?t.slice(s):t).length)return e.tr.setMeta(Xe,new qe(o,c));var l=c.length,u=e.tr;if(l)c=function(e,t,n){for(var r=e.length-1;r>=0;r--)n.step(e[r].inverted);for(var i=0;i<t.length;i++)n.step(t[i]);for(var o=[],a=0,s=e.length;a<e.length;a++){var c=e[a].step.map(n.mapping.slice(s));s--,c&&!n.maybeStep(c).failed&&(n.mapping.setMirror(s,n.steps.length-1),o.push(new Ge(c,c.invert(n.docs[n.docs.length-1]),e[a].origin)))}return o}(c,t,u);else{for(var f=0;f<t.length;f++)u.step(t[f]);c=[]}var d=new qe(o,c);return r&&r.mapSelectionBackward&&e.selection instanceof Q.g&&(u.setSelection(Q.g.between(u.doc.resolve(u.mapping.map(e.selection.anchor,-1)),u.doc.resolve(u.mapping.map(e.selection.head,-1)),-1)),u.updated&=-2),u.setMeta("rebased",l).setMeta("addToHistory",!1).setMeta(Xe,d)}function Qe(e){return Xe.getState(e).version}for(var Ye={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},et=Ye,tt={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},nt="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),rt="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),it="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),ot="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),at="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),st=nt&&(ot||+nt[1]<57)||it&&ot,ct=0;ct<10;ct++)Ye[48+ct]=Ye[96+ct]=String(ct);for(ct=1;ct<=24;ct++)Ye[ct+111]="F"+ct;for(ct=65;ct<=90;ct++)Ye[ct]=String.fromCharCode(ct+32),tt[ct]=String.fromCharCode(ct);for(var lt in Ye)tt.hasOwnProperty(lt)||(tt[lt]=Ye[lt]);var ut=function(e){var t=!(st&&(e.ctrlKey||e.altKey||e.metaKey)||(rt||at)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?tt:Ye)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t},ft="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function dt(e){var t,n,r,i,o=e.split(/-(?!$)/),a=o[o.length-1];"Space"==a&&(a=" ");for(var s=0;s<o.length-1;s++){var c=o[s];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);ft?i=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),i&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function ht(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function pt(e){var t=function(e){var t=Object.create(null);for(var n in e)t[dt(n)]=e[n];return t}(e);return function(e,n){var r,i=ut(n),o=1==i.length&&" "!=i,a=t[ht(i,n,!o)];if(a&&a(e.state,e.dispatch,e))return!0;if(o&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(r=et[n.keyCode])&&r!=i){var s=t[ht(r,n,!0)];if(s&&s(e.state,e.dispatch,e))return!0}else if(o&&n.shiftKey){var c=t[ht(i,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}var vt=function(){};vt.prototype.append=function(e){return e.length?(e=vt.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},vt.prototype.prepend=function(e){return e.length?vt.from(e).append(this):this},vt.prototype.appendInner=function(e){return new gt(this,e)},vt.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?vt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},vt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},vt.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},vt.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},vt.from=function(e){return e instanceof vt?e:e&&e.length?new mt(e):vt.empty};var mt=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(vt);vt.empty=new mt([]);var gt=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(vt),yt=vt;function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),e}var xt=function(){function e(t,n){bt(this,e),this.items=t,this.eventCount=n}return kt(e,[{key:"popEvent",value:function(t,n){var r=this;if(0==this.eventCount)return null;for(var i,o,a=this.items.length;;a--)if(this.items.get(a-1).selection){--a;break}n&&(i=this.remapping(a,this.items.length),o=i.maps.length);var s,c,l=t.tr,u=[],f=[];return this.items.forEach((function(t,n){if(!t.step)return i||(i=r.remapping(a,n+1),o=i.maps.length),o--,void f.push(t);if(i){f.push(new Et(t.map));var d,h=t.step.map(i.slice(o));h&&l.maybeStep(h).doc&&(d=l.mapping.maps[l.mapping.maps.length-1],u.push(new Et(d,null,null,u.length+f.length))),o--,d&&i.appendMap(d,o)}else l.maybeStep(t.step);return t.selection?(s=i?t.selection.map(i.slice(o)):t.selection,c=new e(r.items.slice(0,a).append(f.reverse().concat(u)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:l,selection:s}}},{key:"addTransform",value:function(t,n,r,i){for(var o=[],a=this.eventCount,s=this.items,c=!i&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var u,f=t.steps[l].invert(t.docs[l]),d=new Et(t.mapping.maps[l],f,n);(u=c&&c.merge(d))&&(d=u,l?o.pop():s=s.slice(0,s.length-1)),o.push(d),n&&(a++,n=null),i||(c=d)}var h,p,v,m=a-r.depth;return m>_t&&(p=m,(h=s).forEach((function(e,t){if(e.selection&&0==p--)return v=t,!1})),s=h.slice(v),a-=m),new e(s.append(o),a)}},{key:"remapping",value:function(e,t){var n=new B.a;return this.items.forEach((function(t,r){var i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,i)}),e,t),n}},{key:"addMaps",value:function(t){return 0==this.eventCount?this:new e(this.items.append(t.map((function(e){return new Et(e)}))),this.eventCount)}},{key:"rebased",value:function(t,n){if(!this.eventCount)return this;var r=[],i=Math.max(0,this.items.length-n),o=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),i);var c=n;this.items.forEach((function(e){var n=o.getMirror(--c);if(null!=n){a=Math.min(a,n);var i=o.maps[n];if(e.step){var l=t.steps[n].invert(t.docs[n]),u=e.selection&&e.selection.map(o.slice(c+1,n));u&&s++,r.push(new Et(i,l,u))}else r.push(new Et(i))}}),i);for(var l=[],u=n;u<a;u++)l.push(new Et(o.maps[u]));var f=new e(this.items.slice(0,i).append(l).append(r),s);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-r.length)),f}},{key:"emptyItemCount",value:function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e}},{key:"compress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,t),r=n.maps.length,i=[],o=0;return this.items.forEach((function(e,a){if(a>=t)i.push(e),e.selection&&o++;else if(e.step){var s=e.step.map(n.slice(r)),c=s&&s.getMap();if(r--,c&&n.appendMap(c,r),s){var l=e.selection&&e.selection.map(n.slice(r));l&&o++;var u,f=new Et(c.invert(),s,l),d=i.length-1;(u=i.length&&i[d].merge(f))?i[d]=u:i.push(f)}}else e.map&&r--}),this.items.length,0),new e(yt.from(i.reverse()),o)}}]),e}();xt.empty=new xt(yt.empty,0);var Et=function(){function e(t,n,r,i){bt(this,e),this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}return kt(e,[{key:"merge",value:function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new e(n.getMap().invert(),n,this.selection)}}}]),e}(),Ot=function e(t,n,r,i){bt(this,e),this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i},_t=20;function St(e){var t=[];return e.forEach((function(e,n,r,i){return t.push(r,i)})),t}function Mt(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function Nt(e,t,n,r){var i=At(t),o=Dt.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,i);if(a){var s=a.selection.resolve(a.transform.doc),c=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),o,i),l=new Ot(r?c:a.remaining,r?a.remaining:c,null,0);n(a.transform.setSelection(s).setMeta(Dt,{redo:r,historyState:l}).scrollIntoView())}}var Ct=!1,Tt=null;function At(e){var t=e.plugins;if(Tt!=t){Ct=!1,Tt=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ct=!0;break}}return Ct}var Dt=new Q.e("history"),It=new Q.e("closeHistory");function Lt(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new Q.d({key:Dt,state:{init:function(){return new Ot(xt.empty,xt.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var i,o=n.getMeta(Dt);if(o)return o.historyState;n.getMeta(It)&&(e=new Ot(e.done,e.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(Dt))return a.getMeta(Dt).redo?new Ot(e.done.addTransform(n,null,r,At(t)),e.undone,St(n.mapping.maps[n.steps.length-1]),e.prevTime):new Ot(e.done,e.undone.addTransform(n,null,r,At(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new Ot(e.done.rebased(n,i),e.undone.rebased(n,i),Mt(e.prevRanges,n.mapping),e.prevTime):new Ot(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Mt(e.prevRanges,n.mapping),e.prevTime);var s=0==e.prevTime||!a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}(n,e.prevRanges)),c=a?Mt(e.prevRanges,n.mapping):St(n.mapping.maps[n.steps.length-1]);return new Ot(e.done.addTransform(n,s?t.selection.getBookmark():null,r,At(t)),xt.empty,c,n.time)}(n,r,t,e)}},config:e})}function Rt(e,t){var n=Dt.getState(e);return!(!n||0==n.done.eventCount)&&(t&&Nt(n,e,t,!1),!0)}function Pt(e,t){var n=Dt.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&Nt(n,e,t,!0),!0)}var Bt=n(18);function zt(e,t){var n=t.curSelection.$cursor,r=z(n),i=function(e,t){var n=t.curSelection.$from,r=z(n).depth,i=n.parentOffset;return r===n.depth?0===i:0===i&&0===n.index(r)}(0,t),o=function(e,t){var n=t.curSelection.$from;if(!n.nodeAfter){if(!n.parent.isInline)return!0;if(!e.doc.resolve(n.after()).nodeAfter)return!0}return!1}(e,t),a=function(e,t){for(var n=t.curSelection.$cursor,r=n.depth;r>0;){if(n.node(r).isBlock)return r>1;r--}return!1}(0,t);if(a)return{node:r.node,parent:n.node(r.depth-1),nodePos:n.before(r.depth),isStartOfBlock:i,isEndOfBlock:o,isEmptyContent:!r.node.textContent.length,isWrapped:a};var s=function(e,t){var n=t.curSelection.$cursor,r=z(n).depth,i=n.before(r);if(i>0){var o=e.doc.resolve(i).nodeBefore,a=i-1;if(!o.isAtom){var s=e.doc.resolve(i-1);a=s.before()}return{node:o,nodePos:a}}return{}}(e,t),c=function(e,t){var n=t.curSelection.$cursor,r=z(n).depth,i=n.after(r);return i<e.doc.content.size?{node:e.doc.resolve(i).nodeAfter,nodePos:i}:{}}(e,t);return{node:r.node,parent:n.node(r.depth-1),nodePos:n.before(r.depth),isStartOfBlock:i,isEndOfBlock:o,isEmptyContent:!r.node.textContent.length,isWrapped:a,hasPrevNode:!!s.node,prevNode:s.node,prevNodePos:s.nodePos,hasNextNode:!!c.node,nextNode:c.node,nextNodePos:c.nodePos}}function $t(e,t){e.selection.node?t.selectionIsOnNode&&t.selectionIsOnNode():e.selection.empty?e.selection.$cursor&&t.selectionIsCloseInText&&t.selectionIsCloseInText():t.selectionIsExpandInText&&t.selectionIsExpandInText()}function jt(e,t){return e.selection.empty?t:t.deleteSelection()}var Ht={paragraph:function(e,t){var n=t.curSelection.from,r=t.curSelection.$from;r.parent.isInline&&r.end()===n&&(n+=1,r=t.doc.resolve(n),t.setSelection(Q.g.create(t.doc,n)));var i=z(r),o=i.node,a=H(t.doc,n);if(function(e){return 0===e.textContent.length}(o)){if(o.attrs.indent>0)return De(e,t);if(a.type.name!==p.DOC)return $(e,t)}else if(a.type.name===p.LIST_ITEM){for(var s=[],c=r.depth;c>=i.depth-1;){var l=r.node(c);s.unshift({type:l.type,attrs:l.attrs}),c--}return t.split(n,s.length,s)}return t.split(n,1,[{type:e.schema.nodes[p.PARAGRAPH],attrs:o.attrs}])},heading:function(e,t){var n=zt(e,t),r=t.curSelection.$from.pos;return n.isEmptyContent?t.setNodeMarkup(r-1,e.schema.nodes[p.PARAGRAPH]):n.isStartOfBlock?(t=t.split(r,1,[{type:e.schema.nodes[p.HEADING],attrs:n.node.attrs}])).setNodeMarkup(r-1,e.schema.nodes[p.PARAGRAPH]):n.isEndOfBlock?t.split(r,1,[{type:e.schema.nodes[p.PARAGRAPH]}]):t.split(r,1,[{type:e.schema.nodes[p.HEADING],attrs:n.node.attrs}])}},Ft="[\\ud800-\\udfff]",Ut="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Kt="\\ud83c[\\udffb-\\udfff]",Vt="[^\\ud800-\\udfff]",Wt="(?:\\ud83c[\\udde6-\\uddff]){2}",Gt="[\\ud800-\\udbff][\\udc00-\\udfff]",qt="(?:"+Ut+"|"+Kt+")?",Jt="[\\ufe0e\\ufe0f]?"+qt+"(?:\\u200d(?:"+[Vt,Wt,Gt].join("|")+")[\\ufe0e\\ufe0f]?"+qt+")*",Xt="(?:"+[Vt+Ut+"?",Ut,Wt,Gt,Ft].join("|")+")",Zt=RegExp(Kt+"(?="+Kt+")|"+Xt+Jt,"g");function Qt(e){return e.match(Zt)||[]}function Yt(e,t){var n,r=t.doc.resolve(e.selection.from),i=r.pos,o=function e(t,n){var r=t.resolve(n);return r.nodeBefore&&r.nodeBefore.isText?n-function(e){var t=Qt(e.text);return t.length?t[t.length-1].length:1}(r.nodeBefore):r.parent.isBlock&&!r.nodeBefore?n:(n-=1,0===(n=Math.max(0,n))?n:e(t,n,!0))}(t.doc,i);return function(e){return e.parent.isInline}(r)&&(r.nodeAfter&&!r.nodeBefore&&(i--,t=t.setSelection(Q.g.create(t.doc,i,i))),r.nodeAfter||r.nodeBefore||i++,!r.nodeAfter&&en(r.parent)&&(i++,o--)),(n=r.nodeBefore)&&n.isInline&&!n.isText&&en(r.nodeBefore)&&o--,o===i?t:t.deleteRange(o,i)}function en(e){return e&&e.textContent&&1===e.textContent.length}function tn(e,t){return e.isTextblock?{node:e,nodePos:t}:(e.descendants((function(e,i){e.isTextblock&&(n=e,r=i+t+1)})),{node:n,nodePos:r});var n,r}function nn(e,t){var n=e.selection.$from;if(1===n.depth)return t;var r=0;return n.node(1).type.name===p.NUMBERED_LIST&&(r=2),n.node(2).type.name===p.NUMBERED_LIST&&(r=3),0===r?t:0===n.index(r-1)?t.setNodeMarkup(n.before(r-1),null,{start:1}):t}function rn(e){return[p.KATEX_BLOCK,p.IMAGE,p.VIDEO,p.CODE_BLOCK,p.HORIZONTAL_RULE].indexOf(e)>-1}function on(e){var t={},n=e.curSelection.$from.nodeBefore;if(n)n.isInline&&!n.isText&&(t={node:n,pos:e.curSelection.from-n.nodeSize});else{var r=e.curSelection.$from.before(),i=e.doc.resolve(r).nodeBefore;i&&i.isInline&&!i.isText&&(t={node:i,pos:r-i.nodeSize})}return t}function an(e,t,n){return t.setSelection(Q.c.create(e.doc,n))}var sn,cn={paragraph:function(e,t){t=function(e,t){var n=on(t),r=n.node;if(r&&r.type.name===p.ZERO_WIDTH){var i=Q.f.near(e.doc.resolve(n.pos),-1);return t.setSelection(i)}return t}(e,t);var n=zt(e,t);if(!n.isStartOfBlock){var r=on(t).node;return r&&r.isAtom&&r.type.name!==p.ZERO_WIDTH?an(e,t,r.pos):Yt(e,t)}if(n.isWrapped&&n.parent.type.name===p.LIST_ITEM)return $(e,t=function(e,t,n){return t.setNodeMarkup(n.nodePos,null,{number:0,indent:n.node.attrs.indent})}(0,t=nn(e,t),n));if(n.node.attrs.indent>0)return t.setNodeMarkup(n.nodePos,null,{indent:n.node.attrs.indent-1});if(n.isWrapped)return $(e,t);if(n.hasPrevNode&&n.prevNode.type.name===p.CODE_BLOCK)return t.setSelection(Q.g.create(t.doc,n.prevNodePos+n.prevNode.nodeSize-1));if(n.hasPrevNode&&rn(n.prevNode.type.name))return an(e,t,n.prevNodePos);if(n.hasPrevNode){var i=tn(n.prevNode,n.prevNodePos),o=i.node,a=i.nodePos;if(o.type.name===p.HEADING){var s=n.nodePos+1;t.setBlockType(s,s,e.schema.nodes[p.HEADING],{level:5})}return t.delete(a+o.nodeSize-1,n.nodePos+1)}return t},heading:function(e,t){var n=zt(e,t);if(!n.isStartOfBlock)return Yt(e,t);if(n.hasPrevNode&&rn(n.prevNode.type.name))return function(e,t,n){return t.setSelection(Q.c.create(e.doc,n))}(e,t,n.prevNodePos);if(n.hasPrevNode&&n.prevNode.textContent){var r=tn(n.prevNode,n.prevNodePos),i=r.node,o=r.nodePos;return t.delete(o+i.nodeSize-1,n.nodePos+1)}if(n.hasPrevNode){var a=tn(n.prevNode,n.prevNodePos),s=a.node,c=a.nodePos;return t.delete(c,c+s.nodeSize)}return t}};function ln(e,t){return $t(e,{selectionIsOnNode:function(){Pt(e,t)},selectionIsCloseInText:function(){Pt(e,t)},selectionIsExpandInText:function(){Pt(e,t)}}),!0}function un(e,t){return $t(e,{selectionIsOnNode:function(){Rt(e,t)},selectionIsCloseInText:function(){Rt(e,t)},selectionIsExpandInText:function(){Rt(e,t)}}),!0}function fn(e){return function(t,n,r){return e(t,ne(r),r)}}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn="Ctrl-";"undefined"!=typeof window&&window.navigator.userAgent.indexOf("Macintosh")>-1&&(hn="Mod-");var pn=hn+"b",vn=hn+"i",mn=hn+"u",gn=hn+"Shift-s",yn=hn+"Alt-1",bn=hn+"Alt-2",wn=hn+"Alt-3",kn=hn+"Alt-4",xn=hn+"Alt-5",En=hn+"Alt-0",On=hn+"Alt-h",_n=hn+"Shift-l",Sn=hn+"Shift-c",Mn=hn+"Shift-r",Nn=hn+"Shift-7",Cn=hn+"Shift-8",Tn=(dn(sn={},pn,fn(An(pn))),dn(sn,vn,fn(An(vn))),dn(sn,gn,fn(An(gn))),dn(sn,mn,fn(An(mn))),dn(sn,yn,fn(An(yn))),dn(sn,bn,fn(An(bn))),dn(sn,wn,fn(An(wn))),dn(sn,kn,fn(An(kn))),dn(sn,xn,fn(An(xn))),dn(sn,En,fn(An(En))),dn(sn,On,fn(An(On))),dn(sn,_n,fn(An(_n))),dn(sn,Sn,fn(An(Sn))),dn(sn,Mn,fn(An(Mn))),dn(sn,Nn,fn(An(Nn))),dn(sn,Cn,fn(An(Cn))),sn);function An(e){return function(t,n){var r=t.tr,i=be(t).menuStatus;if([pn,vn,mn,gn].indexOf(e)>-1){var o,a=(dn(o={},pn,p.STRONG),dn(o,vn,p.ITALIC),dn(o,gn,p.DEL),dn(o,mn,p.UNDERLINE),o)[e];Dn(t,a)&&(r=In(i,a)?Oe(t,r,a):_e(t,r,a))}e===On&&Dn(t,p.COLOR)&&(r=_e(t,r,p.COLOR,{name:"highlight",color:"#73D13D"}));var s=[yn,bn,wn,kn,xn];return s.indexOf(e)>-1&&Dn(t,p.HEADING)&&(r=Ne(t,r,p.HEADING,{level:s.indexOf(e)+1})),e===En&&Dn(t,p.PARAGRAPH)&&(r=Ne(t,r,p.PARAGRAPH)),e===_n&&Dn(t,p.ALIGN)&&(r=Ie(t,r,{align:"left"})),e===Sn&&Dn(t,p.ALIGN)&&(r=Ie(t,r,{align:"center"})),e===Mn&&Dn(t,p.ALIGN)&&(r=Ie(t,r,{align:"right"})),e===Nn&&Dn(i,p.NUMBERED_LIST)&&(r=In(i,p.NUMBERED_LIST)?Ne(t,r,p.PARAGRAPH):Ne(t,r,p.NUMBERED_LIST)),e===Cn&&Dn(i,p.BULLETED_LIST)&&(r=In(i,p.BULLETED_LIST)?Ne(t,r,p.PARAGRAPH):Ne(t,r,p.BULLETED_LIST)),n(r),!0}}function Dn(e,t,n){return"d"!==e[t]&&(!n||"a"!==e[t])}function In(e,t){return"a"===e[t]}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){Pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bn=Rn(Rn({Enter:fn((function(e,t){return $t(e,{selectionIsOnNode:function(){var n=e.selection.node,r=e.tr;if(n.isBlock){var i=e.selection.from+n.nodeSize,o=e.schema.nodes[p.PARAGRAPH].create();r=(r=r.replaceRangeWith(i,i,o)).setSelection(Q.g.create(r.doc,i+1))}else{var a=e.selection.from+n.nodeSize;r=r.setSelection(Q.g.create(e.doc,a));var s=z(e.doc.resolve(a)).node,c=Ht[s.type.name];c&&(r=c(e,r))}t(r)},selectionIsCloseInText:function(){var n=e.tr,r=z(e.selection.$from).node,i=Ht[r.type.name];i&&(n=i(e,n),t(n))},selectionIsExpandInText:function(){var n=jt(e,e.tr),r=z(e.selection.$from).node,i=Ht[r.type.name];i&&(n=i(e,n)),t(n)}}),!0})),Backspace:fn((function(e,t){return $t(e,{selectionIsOnNode:function(){var n=function(e,t){if(t.curSelection.node.isInline&&(t=t.delete(t.curSelection.from,t.curSelection.from+t.curSelection.node.nodeSize)),t.curSelection.node.isBlock){var n=e.schema.nodes[p.PARAGRAPH].create(null,"");t=(t=t.replaceWith(t.curSelection.from,t.curSelection.from+t.curSelection.node.nodeSize,n)).setSelection(Q.g.create(t.doc,t.curSelection.from+1))}return t}(e,e.tr);t(n)},selectionIsCloseInText:function(){var n,r,i=(n=e.doc,r=e.selection.from,function(e){for(var t=e.depth;t>0;){var n=e.node(t);if(n.isBlock)return n;t--}return e.parent}(n.resolve(r))),o=cn[i.type.name];if(o){var a=o(e,e.tr);t(a)}},selectionIsExpandInText:function(){var n=jt(e,e.tr),r=n.curSelection.$from,i=n.curSelection.from,o=r.parent,a=[p.CODE_INLINE,p.LINK];if(o.isBlock){var s=r.nodeBefore,c=r.nodeAfter;c&&a.indexOf(c.type.name)&&0===c.textContent.length&&(n=n.deleteRange(i,i+2)),s&&a.indexOf(s.type.name)&&0===s.textContent.length&&(n=n.deleteRange(i-2,i))}a.indexOf(o.type.name)>-1&&0===o.textContent.length&&(n=n.deleteRange(i-1,i+1)),t(n)}}),!0})),"Shift-Tab":fn((function(e,t){return $t(e,{selectionIsCloseInText:function(){var n=De(e,e.tr);t(n)},selectionIsExpandInText:function(){var n=De(e,e.tr);t(n)}}),!0})),Tab:fn((function(e,t){return $t(e,{selectionIsCloseInText:function(){var n=nn(e,e.tr);n=Ae(e,n),t(n)},selectionIsExpandInText:function(){var n=nn(e,e.tr);n=Ae(e,n),t(n)}}),!0})),"Mod-z":fn(un),"Ctrl-z":fn(un),"Shift-Mod-z":fn(ln),"Shift-Ctrl-z":fn(ln),"Mod-y":fn(ln),"Ctrl-y":fn(ln),"Mod-a":fn(zn),"Ctrl-a":fn(zn),"Shift-Mod-ArrowLeft":fn($n("left")),"Shift-Mod-ArrowRight":fn($n("right"))},Tn),{},{ArrowLeft:fn(jn("left")),ArrowRight:fn(jn("right")),ArrowUp:fn(jn("up")),ArrowDown:fn(jn("down"))});function zn(e,t){return t(e.tr.setSelection(new Q.a(e.doc))),!0}function $n(e){return function(t,n){if(t.selection.node)return!1;var r,i=t.selection.$from,o=t.selection.$to;if("left"===e){var a=z(i),s=i.before(a.depth)+1;r=new Q.g(t.doc.resolve(s),o)}if("right"===e){var c=z(o),l=o.after(c.depth)-1;r=new Q.g(i,t.doc.resolve(l))}return!!r&&(n(t.tr.setSelection(r)),!0)}}function jn(e){return function(t,n,r){if(t.selection.empty&&r.endOfTextblock(e)){var i="left"===e||"up"===e?-1:1,o=t.selection.$head,a=Q.f.near(t.doc.resolve(i>0?o.after():o.before()),i);if(a.$head&&a.$head.parent.type.name===p.CODE_BLOCK)return n(t.tr.setSelection(a)),!0}if(t.selection.empty){if("left"===e){var s=on(t.tr),c=s.node;if(c&&c.type.name===p.ZERO_WIDTH){var l=Q.f.near(t.doc.resolve(s.pos-1),-1);return n(t.tr.setSelection(l)),!0}}if("right"===e){var u=function(e){var t={},n=e.curSelection.$from.nodeAfter;if(n)n.isInline&&!n.isText&&(t={node:n,pos:e.curSelection.from});else{var r=e.curSelection.$from.before(),i=e.doc.resolve(r).nodeAfter;i&&i.isInline&&!i.isText&&(t={node:i,pos:r})}return t}(t.tr),f=u.node;if(f&&f.type.name===p.ZERO_WIDTH){var d=Q.f.near(t.doc.resolve(u.pos+2),1);return n(t.tr.setSelection(d)),!0}}}return!1}}function Hn(e,t,n,r){return(t=t.delete(n,r)).setSelection(Q.g.create(t.doc,n))}var Fn=/\[([^\[\]]+)\]\(([^\(\)]+)\)$/,Un=/"[^\"]+"/;function Kn(e){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t,n){for(var r=e.selection.$cursor.pos,i=e.doc.resolve(r),o=i.parent.type.name,a=function(a){var s=n[a];if(s.parentTypeWhiteList&&!s.parentTypeWhiteList.some((function(e){return o===e})))return"continue";if(s.wrapBlockBlackList&&F(e.doc,r).some((function(e){return s.wrapBlockBlackList.indexOf(e.node.type.name)>-1})))return"continue";var c=i.nodeBefore,l=function e(t,n){if(n<2)return"";var r=t.resolve(n).nodeBefore;return r&&r.isText?e(t,n-r.text.length)+r.text:""}(e.doc,i.pos),u=!1;c&&c.isText&&i.parentOffset===c.text.length&&(u=!0);var f=s.match(e,l,t,i,u);return f?{v:s.handle(e,f,r,l,t)}:void 0},s=0;s<n.length;s++){var c=a(s);switch(c){case"continue":continue;default:if("object"===Kn(c))return c.v}}return null}function Wn(e,t,n,r,i){if(!e.composing&&t===n){var o=Vn(e.state,r,i);return!!o&&(te(e,o),!0)}}function Gn(e,t){var n=0,r=e.schema.nodes[p.PARAGRAPH];return t.doc.forEach((function(e,i,o){var a=r.create(null,"");if(Jn(e)&&0===o&&(t=t.replaceWith(i,i,a),n++),n>0){var s=t.mapping.maps.length;i=t.mapping.slice(s-n,s).map(i)}Jn(e)&&function(e,t,n){var r=e.nodeAt(n+t.nodeSize);return!r||qn.indexOf(r.type.name)>-1}(t.doc,e,i)&&(i+=e.nodeSize,t=t.replaceWith(i,i,a),n++)})),t}var qn=[p.KATEX_BLOCK,p.IMAGE,p.VIDEO,p.CODE_BLOCK,p.HORIZONTAL_RULE];function Jn(e){return qn.indexOf(e.type.name)>-1}var Xn,Zn=[p.NUMBERED_LIST,p.BULLETED_LIST,p.BLOCK_QUOTE];function Qn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n.forEach((function(e){e.list.forEach((function(e,n){if(0!==n){var i=e.nodePos;if(r>0){var o=t.mapping.maps.length;i=t.mapping.slice(o-r,o).map(i)}t=t.join(i),r++}}))})),t}function Yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[],i=null;return e.descendants((function(e,o,a){var s=r[r.length-1];i!==e.type.name&&a.type.name===t&&(i=null),Zn.indexOf(e.type.name)<0||a.type.name!==t||(i===e.type.name?s.list.push({node:e,nodePos:o+n}):(i=e.type.name,r.push({type:i,list:[{node:e,nodePos:o+n}]})))})),r.filter((function(e){return e.list.length>1}))}function er(e,t){return function e(t,n,r,i){var o=1;return r.descendants((function(a,s,c){var l,u,f=i+s+1;if(c.type.name===r.type.name)if(a.type.name===p.NUMBERED_LIST){var d=a.attrs.start;d>1&&1===o&&(o=d,a.firstChild.firstChild.attrs.indent>0&&(o=1)),a.attrs.normalizeStart!==o&&n.setNodeMarkup(f,null,{normalizeStart:o,start:d}),n=function(e,t,n,r,i){var o=[i-1];return n.descendants((function(e,n){if(e.type.name===p.PARAGRAPH){for(var i=e.attrs.indent||0,a=i+1;a<9;a++)o[a]=0;o[i]?o[i]=o[i]+1:o[i]=1;var s=o[i];e.attrs.number!==s&&(t=t.setNodeMarkup(r+n+1,null,{number:s,indent:i}))}})),t}(0,n,a,f,o),o+=(l=a,u=[],l.descendants((function(e){e.type.name===p.PARAGRAPH&&0===(e.attrs.indent||0)&&u.push(e)})),u).length}else a.type.name===p.PARAGRAPH&&a.attrs.indent>0||(o=1);a.type.name===p.BLOCK_QUOTE&&(n=e(t,n,a,f))})),n}(e,t,t.doc,-1)}function tr(e,t){if(!((n=navigator.userAgent.toLowerCase()).indexOf("safari")>0&&n.indexOf("chrome")<0))return t;var n,r=0;return t.doc.descendants((function(n,i){if(r>0){var o=t.mapping.maps.length;i=t.mapping.slice(o-r,o).map(i)}var a=t.doc.resolve(i);if(n.type.name===p.PARAGRAPH&&0===n.content.size&&a.depth>1){i+=1;var s=e.schema.nodes[p.ZERO_WIDTH].create({});t=t.replaceWith(i,i,s),r++}})),t}function nr(){return new Q.d({afterEachTransaction:function(e,t){var n=t.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();return(t=tr(e,t=er(e,t=function(e,t){var n=Yn(t.doc,p.DOC),r=(t=Qn(e,t,n)).mapping.maps.length;return t.doc.descendants((function(i,o){if(i.type.name===p.BLOCK_QUOTE){var a=t.mapping.maps.length;n=Yn(i,p.BLOCK_QUOTE,o+1),t=Qn(e,t,n,a-r)}})),t}(e,t=Gn(e,t))))).curSelection.$cursor&&t.curSelection.docChanged&&(t=t.scrollIntoView()),n&&(t=t.ensureMarks(n)),t}})}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e){return sr(e.content)}var or=rr({},p.LINK,{normalize:function(e){"string"!=typeof e.attrs.href&&(e.attrs.href="#")}}),ar=(rr(Xn={},p.SIZE,{normalize:function(e){"number"!=typeof e.attrs.size&&(e.attrs.size=11)}}),rr(Xn,p.COLOR,{normalize:function(e){var t=e.attrs.color,n=e.attrs.name;"string"!=typeof t&&(e.attrs.color="#353535"),"string"!=typeof n&&(e.attrs.name="string"!=typeof t?"none":"user")}}),rr(Xn,p.BG_COLOR,{normalize:function(e){var t=e.attrs.color,n=e.attrs.name;"string"!=typeof t&&(e.attrs.color="#ffffff"),"string"!=typeof n&&(e.attrs.name="string"!=typeof t?"none":"user")}}),Xn);function sr(e){e&&e[0]&&e.forEach((function(e){!function(e){if(e.attrs||(e.attrs={}),"text"===e.type){if(e.marks&&e.marks.length>0)return t=e.marks,e.text,void t.forEach((function(e){var t;(t=e).attrs||(t.attrs={}),ar[t.type]&&ar[t.type].normalize(t)}))}else or[e.type]&&or[e.type].normalize(e),e.content&&sr(e.content);var t}(e)}))}var cr=Object(Bt.a)();function lr(e){ir(e.doc);var t,n,r,i=J.f.fromJSON(cr,e.doc),o=[Lt({preserveItems:!0}),(r=Bn,new Q.d({props:{handleKeyDown:pt(r)}})),(n=[{parentTypeWhiteList:[p.HEADING,p.PARAGRAPH],wrapBlockBlackList:[p.BULLETED_LIST,p.NUMBERED_LIST,p.BLOCK_QUOTE],match:function(e,t,n,r,i){if(!i)return!1;if([" "," "].indexOf(n)<0)return!1;var o=t.match(/^\s*(#{1,5})$/);return!!o&&{match:o,type:e.schema.nodes[p.HEADING],attr:{level:o[1].length}}},handle:function(e,t,n,r){var i=n-r.length,o=n,a=e.tr.delete(i,o);return a.setBlockType(i,i,t.type,{level:t.attr.level})}},{parentTypeWhiteList:[p.PARAGRAPH],wrapBlockBlackList:[p.BULLETED_LIST,p.NUMBERED_LIST,p.BLOCK_QUOTE],match:function(e,t,n,r,i){if(!i)return!1;if([" "," "].indexOf(n)<0)return!1;var o=t.match(/^\s*([-+*])$/);return o?{type:e.schema.nodes[p.BULLETED_LIST]}:!!(o=t.match(/^\s*(\d+)\.$/))&&{attrs:{start:Number(o[1])},type:e.schema.nodes[p.NUMBERED_LIST]}},handle:function(e,t,n,r){var i=n-r.length,o=e.tr,a=H((o=Hn(0,o,i,n)).doc,i);return a.type.name===p.DOC||a.type.name===p.BLOCK_QUOTE?V(o,t.type,t.attrs):V(o=$(e,o),t.type,t.attrs)}},{parentTypeWhiteList:[p.PARAGRAPH],wrapBlockBlackList:[p.BULLETED_LIST,p.NUMBERED_LIST,p.BLOCK_QUOTE],match:function(e,t,n,r){if(r.nodeAfter&&r.nodeAfter.isText)return!1;if([" "," "].indexOf(n)<0)return!1;var i=t.match(/^\s*(---)$/);return!!(i=(i=i||t.match(/^\s*(\*\*\*)$/))||t.match(/^\s*(\_\_\_)$/))&&{match:i,type:e.schema.nodes[p.HORIZONTAL_RULE]}},handle:function(e,t,n){var r=e.doc.resolve(n),i=t.type.create();return e.tr.replaceRangeWith(r.before(),r.end(),i)}},{parentTypeWhiteList:[p.PARAGRAPH,p.HEADING],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var r=t.match(/\_([^\_]+)\_$/);return!!(r=r||t.match(/\*([^\*]+)\*$/))&&{whole:r[0],text:r[1],type:p.ITALIC}},handle:function(e,t,n){var r=n-t.whole.length,i=n,o=e.schema.marks[t.type].create(),a=e.tr;return(a=(a=(a=a.addMark(r,i,o)).delete(r,r+1)).delete(i-2,i-1)).insert(i-2,e.schema.text(" "))}},{parentTypeWhiteList:[p.PARAGRAPH,p.HEADING],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var r=t.match(/\~\~([^\~]+)\~\~$/);return!!r&&{whole:r[0],text:r[1],type:p.DEL}},handle:function(e,t,n){var r=n-t.whole.length,i=n,o=e.schema.marks[t.type].create(),a=e.tr;return(a=(a=(a=a.addMark(r,i,o)).delete(r,r+2)).delete(i-4,i-2)).insert(i-4,e.schema.text(" "))}},{parentTypeWhiteList:[p.PARAGRAPH],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var r=t.match(/\*\*([^\*]+)\*\*$/);return!!(r=r||t.match(/\_\_([^\_]+)\_\_$/))&&{whole:r[0],text:r[1],type:p.STRONG}},handle:function(e,t,n){var r=n-t.whole.length,i=n,o=e.schema.marks[t.type].create(),a=e.tr;return(a=(a=(a=a.addMark(r,i,o)).delete(r,r+2)).delete(i-4,i-2)).insert(i-4,e.schema.text(" "))}},{parentTypeWhiteList:[p.PARAGRAPH],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var r=t.match(/\`[^\`]+\`$/);return!!r&&{text:r[0],type:e.schema.nodes[p.CODE_INLINE]}},handle:function(e,t,n){var r=t.text.replace(/\`/g,""),i=n-t.text.length,o=n,a=e.schema.text(r),s=e.schema.nodes[p.CODE_INLINE].createAndFill(null,a);return e.tr.replaceRangeWith(i,o,s)}},{parentTypeWhiteList:[p.PARAGRAPH,p.HEADING],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var r=t.match(Fn);if(r){var i=r[1],o=r[2],a=o.split(/\s+/),s="";a[0]&&(s=a[0]);var c="",l=o.replace(a[0],"");return Un.test(l)&&(c=l.match(Un)[0].replace(/"/g,"")),{whole:r[0],text:i,href:s,title:c}}return!1},handle:function(e,t,n){var r=n-t.whole.length,i=n,o=e.schema.text(t.text),a=e.schema.nodes[p.LINK].createAndFill({title:t.title,href:t.href},o);return e.tr.replaceRangeWith(r,i,a)}},{parentTypeWhiteList:[p.PARAGRAPH],wrapBlockBlackList:[p.BULLETED_LIST,p.NUMBERED_LIST,p.BLOCK_QUOTE],match:function(e,t,n,r,i){if(!i)return!1;if([" "," "].indexOf(n)<0)return!1;var o=t.match(/^\s*(>)$/);return!!o&&{match:o,type:e.schema.nodes[p.BLOCK_QUOTE]}},handle:function(e,t,n,r){var i=n-r.length,o=n,a=e.tr;return H((a=Hn(0,a,i,o)).doc,i).type.name===e.schema.nodes.doc.name?V(a,t.type,t.attrs):V(a=$(e,a),t.type,t.attrs)}},{parentTypeWhiteList:[p.PARAGRAPH],wrapBlockBlackList:[p.BULLETED_LIST,p.NUMBERED_LIST,p.BLOCK_QUOTE],match:function(e,t,n,r,i){if(!i)return!1;if([" "," "].indexOf(n)<0)return!1;var o=t.match(/^\s*(```)$/);return!!o&&{match:o,type:e.schema.nodes[p.CODE_BLOCK]}},handle:function(e,t,n,r){var i=n-r.length,o=n,a=e.tr.delete(i,o);return a.setBlockType(i,i,t.type)}},{parentTypeWhiteList:[p.PARAGRAPH],wrapBlockBlackList:[p.BULLETED_LIST,p.NUMBERED_LIST,p.BLOCK_QUOTE],match:function(e,t,n,r,i){if(!i)return!1;if(r.nodeAfter&&r.nodeAfter.isText)return!1;if([" "," "].indexOf(n)<0)return!1;var o=t.match(/^\s*(\$\$[^\$]+\$\$)$/);return!!o&&{text:o[1],type:e.schema.nodes[p.KATEX_BLOCK]}},handle:function(e,t,n){var r=t.type.create({mathString:t.text.replace(/\$/g,"")}),i=e.doc.resolve(n);return e.tr.replaceRangeWith(i.before(),i.end(),r)}},{parentTypeWhiteList:[p.PARAGRAPH],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var r=t.match(/\$[^\$]+\$$/);return!!r&&{text:r[0],type:e.schema.nodes[p.KATEX_INLINE]}},handle:function(e,t,n){var r=n-t.text.length,i=n,o=e.schema.nodes[p.KATEX_INLINE].create({mathString:t.text.replace(/\$/g,"")});return e.tr.replaceRangeWith(r,i,o)}}],new Q.d({props:{handleTextInput:function(e,t,r,i){return Wn(e,t,r,i,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var t=e.state.selection.$cursor;t&&Wn(e,t.pos,t.pos,"",n)}))}}},isInputRules:!0})),(t=function(t){e.stateUpdate(t)},new Q.d({view:function(){return{update:function(e){t&&t(e)}}}})),nr()];return e.collab&&o.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={version:e.version||0,clientID:null==e.clientID?Math.floor(4294967295*Math.random()):e.clientID},new Q.d({key:Xe,state:{init:function(){return new qe(e.version,[])},apply:function(e,t){var n=e.getMeta(Xe);return n||(e.docChanged?new qe(t.version,t.unconfirmed.concat(Je(e))):t)}},config:e,historyPreserveItems:!0})}({version:e.collab.version,clientID:e.collab.clientID})),Q.b.create({doc:i,plugins:o})}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dr="start",hr="restart",pr="recover",vr="transaction",mr="poll",gr="send",yr=function(){function e(t,n,r){ur(this,e),this.collabDoc={},this.mounted=r||function(){},this.backOff=0,this.config={dom:null,clientID:Math.floor(4294967295*Math.random()),recoverIntervalBaseTime:200,dispatchUpdate:function(){},update:function(){},error:function(){},start:function(){},send:function(){},poll:function(){}},this.allSavedHandle=null,this.config=Object.assign({},this.config,t),this.config.createEditorView=n,this.dom=this.config.dom,this.start()}var t,n,r;return t=e,(n=[{key:"getDoc",value:function(){return{version:this.collabDoc.version,doc:this.collabDoc.doc.toJSON()}}},{key:"getData",value:function(e){var t=this.sendable(e);return t?{version:Qe(e),steps:t.steps.map((function(e){return e.toJSON()})),clientID:t.clientID}:null}},{key:"hasUnconfirmedSteps",value:function(){var e=this.state.edit;return!!this.sendable(e)}},{key:"addAllSavedHandle",value:function(e){this.allSavedHandle=e}},{key:"dispatch",value:function(e){var t=this;this.config.dispatchUpdate(e);var n,r=null;if(e.type===dr){var i=this.createEditorState({version:e.version,clientID:this.config.clientID,doc:e.doc});this.collabDoc={version:e.version,doc:i.doc},this.state=new br(i,"poll"),this.poll()}else if(e.type===hr)this.state=new br(null,"start"),this.start();else if(e.type===mr)this.state=new br(this.state.edit,"poll"),this.poll();else if(e.type===gr&&"poll"===this.state.comm){var o=this.sendable(this.state.edit);o?(this.state=new br(this.state.edit,"send"),this.send(this.state.edit,o)):(this.state=new br(this.state.edit,"poll"),this.poll())}else e.type===pr?(this.state=new br(this.state.edit,"recover"),this.recover()):e.type===vr&&(r=this.state.edit.apply(e.tr));if(r)if(e.requestDone){var a=this.sendable(r);e.needPoll?(this.state=new br(r,"poll"),this.poll({isUrgent:e.isUrgent})):a?(this.state=new br(r,"send"),this.send(r,a)):(this.state=new br(r,"poll"),this.poll())}else this.state=new br(r,this.state.comm);if(this.view){if(this.state.edit&&this.view.state!==this.state.edit){this.updateState(this.state.edit);var s=(n=this.state.edit,Xe.getState(n));0===s.unconfirmed.length&&(this.collabDoc={version:s.version,doc:this.view.state.doc},this.allSavedHandle&&this.allSavedHandle(),this.allSavedHandle=null)}}else this.state.edit&&(this.view=this.createEditorView(this.dom,this.state.edit,(function(e){t.dispatch({type:vr,tr:e})})),this.mounted())}},{key:"start",value:function(){var e=this;this.config.start().then((function(t){e.backOff=0,e.dispatch({type:dr,doc:t.doc,version:t.version})}))}},{key:"send",value:function(e,t){var n=this,r=this.getData(e);r?this.config.send(r).then((function(e){if(e.status===Ue.SUCCESS_RESPONSE){n.backOff=0;var r=wr(t.clientID,t.steps.length),i=n.state.edit.tr;t&&(i=n.receiveTransaction(n.state.edit,t.steps,r,e.version)),n.dispatch({type:vr,tr:i,requestDone:!0})}else n.dispatch({type:mr})})).catch((function(e){e.status===Fe.CONFLIT_SERVER_VERSION?(n.backOff=0,n.dispatch({type:mr})):e.status===Fe.NET_ERROR?n.dispatch({type:pr,error:e}):n.dispatch({type:pr})})):this.dispatch({type:mr})}},{key:"poll",value:function(e){var t=this,n={isUrgent:!1};Object.assign(n,e||{});var r=this.state.edit,i={isUrgent:!!n.isUrgent,version:Qe(r)},o=r.schema;this.config.poll(i).then((function(e){if(t.backOff=0,e&&e.list&&e.list.length){var n=e.version,i=[],a=[];e.list.forEach((function(e){a=a.concat(wr(e.clientID,e.steps.length)),i=i.concat(e.steps.map((function(e){return B.d.fromJSON(o,e)})))}));var s=t.receiveTransaction(r,i,a,n);e.status===Ue.UNFINISHED_RESPONSE?t.dispatch({type:vr,tr:s,requestDone:!0,needPoll:!0,isUrgent:!0}):t.dispatch({type:vr,tr:s,requestDone:!0})}else t.dispatch({type:gr,tr:null,requestDone:!0})}),(function(e){e.status===Fe.TOO_FAR_BEHIND_VERSION?t.dispatch({type:hr}):(e.status,t.dispatch({type:pr}))}))}},{key:"recover",value:function(){var e=this,t=this.backOff?Math.min(2*this.backOff,3e4):this.config.recoverIntervalBaseTime;t>1e3&&this.backOff<1e3&&this.error(Fe.NET_FREQUENT_ERROR),this.backOff=t,setTimeout((function(){"recover"===e.state.comm&&e.dispatch({type:mr})}),this.backOff)}},{key:"sendable",value:function(e){return t=e,0===(n=Xe.getState(t)).unconfirmed.length?null:{version:n.version,steps:n.unconfirmed.map((function(e){return e.step})),clientID:Xe.get(t).spec.config.clientID,get origins(){return this._origins||(this._origins=n.unconfirmed.map((function(e){return e.origin})))}};var t,n}},{key:"createEditorState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={type:p.DOC,content:[{type:p.PARAGRAPH,nodes:[]}]};return lr({collab:{version:t.version,clientID:t.clientID},doc:t.doc||n,stateUpdate:function(){e.config.update()}})}},{key:"createEditorView",value:function(e,t,n){return this.config.unitTest?{state:t}:this.config.createEditorView(e,t,n)}},{key:"updateState",value:function(e){if(this.config.unitTest)return e;this.view.updateState(e)}},{key:"receiveTransaction",value:function(e,t,n,r){return Ze(e,t,n,{version:r})}},{key:"error",value:function(e){this.config.error(e)}}])&&fr(t.prototype,n),r&&fr(t,r),e}(),br=function e(t,n){ur(this,e),this.edit=t,this.comm=n};function wr(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xr=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=null,this.mounted=r||function(){},this.dom=t.dom,this.config={doc:null,dom:null,update:function(){}},Object.assign(this.config,t),this.config.createEditorView=n,this.config.doc&&this.setDoc(this.config.doc)}var t,n,r;return t=e,(n=[{key:"setDoc",value:function(e){var t=this.createEditorState(e);this.view?this.view.updateState(t):this.createEditorView(t)}},{key:"createEditorView",value:function(e){this.view=this.config.createEditorView(this.dom,e),this.mounted()}},{key:"createEditorState",value:function(e){var t=this,n={type:p.DOC,content:[{type:p.PARAGRAPH,nodes:[]}]};return lr({doc:e||n,stateUpdate:function(){t.config.update()}})}}])&&kr(t.prototype,n),r&&kr(t,r),e}(),Er={},Or=Er;if("undefined"!=typeof navigator&&"undefined"!=typeof document){var _r=/Edge\/(\d+)/.exec(navigator.userAgent),Sr=/MSIE \d/.test(navigator.userAgent),Mr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Er.mac=/Mac/.test(navigator.platform);var Nr=Er.ie=!!(Sr||Mr||_r);Er.ie_version=Sr?document.documentMode||6:Mr?+Mr[1]:_r?+_r[1]:null,Er.gecko=!Nr&&/gecko\/(\d+)/i.test(navigator.userAgent),Er.gecko_version=Er.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Cr=!Nr&&/Chrome\/(\d+)/.exec(navigator.userAgent);Er.chrome=!!Cr,Er.chrome_version=Cr&&+Cr[1],Er.ios=!Nr&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Er.android=/Android \d/.test(navigator.userAgent),Er.webkit="webkitFontSmoothing"in document.documentElement.style,Er.safari=/Apple Computer/.test(navigator.vendor),Er.webkit_version=Er.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Tr=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Ar=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},Dr=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Ir=function(e,t,n,r){return n&&(Rr(e,t,n,r,-1)||Rr(e,t,n,r,1))},Lr=/^(img|br|input|textarea|hr)$/i;function Rr(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Pr(e))){var o=e.parentNode;if(1!=o.nodeType||Br(e)||Lr.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Tr(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?Pr(e):0}}}function Pr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Br(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var zr=function(e){var t=e.isCollapsed;return t&&Or.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function $r(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function jr(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Hr(e,t){return"number"==typeof e?e:e[t]}function Fr(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth,top:t.top,bottom:t.top+e.clientHeight}}function Ur(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,a=n||e.dom;a;a=Ar(a))if(1==a.nodeType){var s=a==o.body||1!=a.nodeType,c=s?jr(o):Fr(a),l=0,u=0;if(t.top<c.top+Hr(r,"top")?u=-(c.top-t.top+Hr(i,"top")):t.bottom>c.bottom-Hr(r,"bottom")&&(u=t.bottom-c.bottom+Hr(i,"bottom")),t.left<c.left+Hr(r,"left")?l=-(c.left-t.left+Hr(i,"left")):t.right>c.right-Hr(r,"right")&&(l=t.right-c.right+Hr(i,"right")),l||u)if(s)o.defaultView.scrollBy(l,u);else{var f=a.scrollLeft,d=a.scrollTop;u&&(a.scrollTop+=u),l&&(a.scrollLeft+=l);var h=a.scrollLeft-f,p=a.scrollTop-d;t={left:t.left-h,top:t.top-p,right:t.right-h,bottom:t.bottom-p}}if(s)break}}function Kr(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=Ar(e));return t}function Vr(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,a=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=a&&(i.scrollLeft=a)}}var Wr=null;function Gr(e,t){for(var n,r,i=2e8,o=0,a=t.top,s=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=Dr(c).getClientRects()}for(var f=0;f<u.length;f++){var d=u[f];if(d.top<=a&&d.bottom>=s){a=Math.max(d.bottom,a),s=Math.min(d.top,s);var h=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(h<i){n=c,i=h,r=h&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==c.nodeType&&h&&(o=l+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(o=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=Xr(r,1);if(o.top!=o.bottom&&qr(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:e,offset:o}:Gr(n,r)}function qr(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Jr(e,t){var n,r,i=e.root;if(i.caretPositionFromPoint)try{var o=i.caretPositionFromPoint(t.left,t.top);o&&(n=o.offsetNode,r=o.offset)}catch(e){}if(!n&&i.caretRangeFromPoint){var a=i.caretRangeFromPoint(t.left,t.top);a&&(n=a.startContainer,r=a.startOffset)}var s,c=i.elementFromPoint(t.left,t.top+1);if(!c||!e.dom.contains(1!=c.nodeType?c.parentNode:c)){var l=e.dom.getBoundingClientRect();if(!qr(t,l))return null;if(!(c=function e(t,n,r){var i=t.childNodes.length;if(i&&r.top<r.bottom)for(var o=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),a=o;;){var s=t.childNodes[a];if(1==s.nodeType)for(var c=s.getClientRects(),l=0;l<c.length;l++){var u=c[l];if(qr(n,u))return e(s,n,u)}if((a=(a+1)%i)==o)break}return t}(e.dom,t,l)))return null}if(Or.safari&&c.draggable&&(n=r=null),c=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(c,t),n){if(Or.gecko&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length))<n.childNodes.length){var u,f=n.childNodes[r];"IMG"==f.nodeName&&(u=f.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&r++}n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(s=function(e,t,n,r){for(var i=-1,o=t;o!=e.dom;){var a=e.docView.nearestDesc(o,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)i=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;i=a.posAfter}}o=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}(e,n,r,t))}null==s&&(s=function(e,t,n){var r=Gr(t,n),i=r.node,o=r.offset,a=-1;if(1==i.nodeType&&!i.firstChild){var s=i.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(i,o,a)}(e,c,t));var d=e.docView.nearestDesc(c,!0);return{pos:s,inside:d?d.posAtStart-d.border:-1}}function Xr(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function Zr(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset;if(3==r.nodeType&&(Or.webkit||Or.gecko)){var o=Xr(Dr(r,i,i),0);if(Or.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var a=Xr(Dr(r,i-1,i-1),-1);if(a.top==o.top){var s=Xr(Dr(r,i,i+1),-1);if(s.top!=o.top)return Qr(s,s.left<a.left)}}return o}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var c,l=!0;if(i<r.childNodes.length){var u=r.childNodes[i];1==u.nodeType&&(c=u.getBoundingClientRect())}if(!c&&i){var f=r.childNodes[i-1];1==f.nodeType&&(c=f.getBoundingClientRect(),l=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(c||r.getBoundingClientRect(),l)}for(var d=-1;d<2;d+=2)if(d<0&&i){var h=void 0,p=3==r.nodeType?Dr(r,i-1,i):3==(h=r.childNodes[i-1]).nodeType?Dr(h):1==h.nodeType&&"BR"!=h.nodeName?h:null;if(p){var v=Xr(p,1);if(v.top<v.bottom)return Qr(v,!1)}}else if(d>0&&i<Pr(r)){var m=void 0,g=3==r.nodeType?Dr(r,i,i+1):3==(m=r.childNodes[i]).nodeType?Dr(m):1==m.nodeType?m:null;if(g){var y=Xr(g,-1);if(y.top<y.bottom)return Qr(y,!0)}}return Qr(Xr(3==r.nodeType?Dr(r):r,0),!1)}function Qr(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Yr(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}var ei=/[\u0590-\u08ac]/,ti=null,ni=null,ri=!1;function ii(e,t,n){return ti==t&&ni==n?ri:(ti=t,ni=n,ri="up"==n||"down"==n?function(e,t,n){var r=t.selection,i="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return Yr(e,t,(function(){for(var t=e.docView.domFromPos(i.pos).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var o=Zr(e,i.pos),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=Dr(a,0,a.nodeValue.length).getClientRects()}for(var c=0;c<s.length;c++){var l=s[c];if(l.bottom>l.top&&("up"==n?l.bottom<o.top+1:l.top>o.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var i=r.parentOffset,o=!i,a=i==r.parent.content.size,s=getSelection();return ei.test(r.parent.textContent)&&s.modify?Yr(e,t,(function(){var t=s.getRangeAt(0),i=s.focusNode,o=s.focusOffset,a=s.caretBidiLevel;s.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||i==s.focusNode&&o==s.focusOffset;return s.removeAllRanges(),s.addRange(t),null!=a&&(s.caretBidiLevel=a),c})):"left"==n||"backward"==n?o:a}(e,t,n))}function oi(e,t,n){return(oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=di(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=di(e);if(t){var i=di(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ui(this,n)}}function ui(e,t){return!t||"object"!==ai(t)&&"function"!=typeof t?fi(e):t}function fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function di(e){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vi(e,t,n){return t&&pi(e.prototype,t),n&&pi(e,n),e}var mi=function(){function e(t,n,r,i){hi(this,e),this.parent=t,this.children=n,this.dom=r,r.pmViewDesc=this,this.contentDOM=i,this.dirty=0}return vi(e,[{key:"matchesWidget",value:function(){return!1}},{key:"matchesMark",value:function(){return!1}},{key:"matchesNode",value:function(){return!1}},{key:"matchesHack",value:function(){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(){return!1}},{key:"destroy",value:function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,a;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(a=o.pmViewDesc)||a.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}var s;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!1;break}if(c.parentNode.firstChild!=c)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==e.nodeType?e:e.parentNode):i.nodeDOM==e))return i;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}}},{key:"domFromPos",value:function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:Tr(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],i=t+r.size;if(e<i)return r.domFromPos(e-t-r.border);t=i}}},{key:"parseRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,a=0;;a++){var s=this.children[a],c=o+s.size;if(-1==r&&e<=c){var l=o+s.border;if(e>=l&&t<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=o;for(var u=a;u>0;u--){var f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=Tr(f.dom)+1;break}e-=f.size}-1==r&&(r=0)}if(r>-1&&(c>t||a==this.children.length-1)){t=c;for(var d=a+1;d<this.children.length;d++){var h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){i=Tr(h.dom);break}t+=h.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}},{key:"setSelection",value:function(e,t,n,r){for(var i=Math.min(e,t),o=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var c=this.children[a],l=s+c.size;if(i>s&&o<l)return c.setSelection(e-s-c.border,t-s-c.border,n,r);s=l}var u=this.domFromPos(e),f=this.domFromPos(t),d=n.getSelection();if(r||!Ir(u.node,u.offset,d.anchorNode,d.anchorOffset)||!Ir(f.node,f.offset,d.focusNode,d.focusOffset)){var h=!1;if(Or.gecko&&e==t){var p=u.node.childNodes[u.offset-1];p&&"BR"==p.nodeName&&(h=!0)}var v=!1;if((d.extend||e==t)&&!h){d.collapse(u.node,u.offset);try{e!=t&&d.extend(f.node,f.offset),v=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!v){if(e>t){var m=u;u=f,f=m}var g=document.createRange();g.setEnd(f.node,f.offset),g.setStart(u.node,u.offset),d.removeAllRanges(),d.addRange(g)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var a=n+i.border,s=o-i.border;if(e>=a&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=a||t!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-a,t-a):i.dirty=3);i.dirty=3}n=o}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}},{key:"beforePosition",get:function(){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}}]),e}(),gi=[],yi=function(e){si(n,e);var t=li(n);function n(e,r,i,o){var a;hi(this,n);var s,c=r.type.toDOM;if("function"==typeof c&&(c=c(i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:o}))),!r.type.spec.raw){if(1!=c.nodeType){var l=document.createElement("span");l.appendChild(c),c=l}c.contentEditable=!1,c.classList.add("ProseMirror-widget")}return(a=t.call(this,e,gi,c,null)).widget=r,s=fi(a),a}return vi(n,[{key:"matchesWidget",value:function(e){return 0==this.dirty&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"beforePosition",get:function(){return this.widget.type.side<0}}]),n}(mi),bi=function(e){si(n,e);var t=li(n);function n(e,r,i,o){var a;return hi(this,n),(a=t.call(this,e,gi,r,null)).textDOM=i,a.text=o,a}return vi(n,[{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}},{key:"size",get:function(){return this.text.length}}]),n}(mi),wi=function(e){si(n,e);var t=li(n);function n(e,r,i,o){var a;return hi(this,n),(a=t.call(this,e,[],i,o)).mark=r,a}return vi(n,[{key:"parseRule",value:function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(e){return 3!=this.dirty&&this.mark.eq(e)}},{key:"markDirty",value:function(e,t){if(oi(di(n.prototype),"markDirty",this).call(this,e,t),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(e,t,r){var i=n.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;t<a&&(o=Pi(o,t,a,r)),e>0&&(o=Pi(o,0,e,r));for(var s=0;s<o.length;s++)o[s].parent=i;return i.children=o,i}}],[{key:"create",value:function(e,t,r,i){var o=i.nodeViews[t.type.name],a=o&&o(t,i,r);return a&&a.dom||(a=J.b.renderSpec(document,t.type.spec.toDOM(t,r))),new n(e,t,a.dom,a.contentDOM||a.dom)}}]),n}(mi),ki=function(e){si(n,e);var t=li(n);function n(e,r,i,o,a,s,c,l,u){var f;return hi(this,n),(f=t.call(this,e,r.isLeaf?gi:[],a,s)).nodeDOM=c,f.node=r,f.outerDeco=i,f.innerDeco=o,s&&f.updateChildren(l,u),f}return vi(n,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?J.c.empty:e.node.content},t}},{key:"matchesNode",value:function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Di(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"updateChildren",value:function(e,t){var n=this,r=this.node.inlineContent,i=t,o=r&&e.composing&&this.localCompositionNode(e,t),a=new Li(this,o&&o.node);!function(e,t,n,r){var i=t.locals(e),o=0;if(0!=i.length)for(var a=0,s=[],c=null,l=0;;){if(a<i.length&&i[a].to==o){for(var u=i[a++],f=void 0;a<i.length&&i[a].to==o;)(f||(f=[u])).push(i[a++]);if(f){f.sort(Ri);for(var d=0;d<f.length;d++)n(f[d],l,!!c)}else n(u,l,!!c)}var h=void 0,p=void 0;if(c)p=-1,h=c,c=null;else{if(!(l<e.childCount))break;p=l,h=e.child(l++)}for(var v=0;v<s.length;v++)s[v].to<=o&&s.splice(v--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)s.push(i[a++]);var m=o+h.nodeSize;if(h.isText){var g=m;a<i.length&&i[a].from<g&&(g=i[a].from);for(var y=0;y<s.length;y++)s[y].to<g&&(g=s[y].to);g<m&&(c=h.cut(g-o),h=h.cut(0,g-o),m=g,p=-1)}var b=s.length?h.isInline&&!h.isLeaf?s.filter((function(e){return!e.inline})):s.slice():gi;r(h,b,t.forChild(o,h),p),o=m}else for(var w=0;w<e.childCount;w++){var k=e.child(w);r(k,i,t.forChild(o,k),w),o+=k.nodeSize}}(this.node,this.innerDeco,(function(t,o,s){t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!s&&a.syncToMarks(o==n.node.childCount?J.d.none:n.node.child(o).marks,r,e),a.placeWidget(t,e,i)}),(function(t,n,o,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,n,o,s)||a.updateNextNode(t,n,o,e,s)||a.addNode(t,n,o,e,i),i+=t.nodeSize})),a.syncToMarks(gi,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),function e(t,n,r){for(var i=t.firstChild,o=!1,a=0;a<n.length;a++){var s=n[a],c=s.dom;if(c.parentNode==t){for(;c!=i;)i=Ii(i),o=!0;i=i.nextSibling}else o=!0,t.insertBefore(c,i);if(s instanceof wi){var l=i?i.previousSibling:t.lastChild;e(s.contentDOM,s.children,r),i=l?l.nextSibling:t.firstChild}}for(;i;)i=Ii(i),o=!0;o&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),Or.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}},{key:"localCompositionNode",value:function(e,t){var n=e.state.selection,r=n.from,i=n.to;if(!(!(e.state.selection instanceof Q.g)||r<t||i>t+this.node.content.size)){var o=e.root.getSelection(),a=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=Pr(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(o.focusNode,o.focusOffset);if(a&&this.dom.contains(a.parentNode)){var s=a.nodeValue,c=function(e,t,n,r){for(var i=0,o=0;i<e.childCount&&o<=r;){var a=e.child(i++),s=o;if(o+=a.nodeSize,a.isText){for(var c=a.text;i<e.childCount;){var l=e.child(i++);if(o+=l.nodeSize,!l.isText)break;c+=l.text}if(o>=n){var u=c.lastIndexOf(t,r-s);if(u>=0&&u+t.length+s>=n)return s+u}}}return-1}(this.node.content,s,r-t,i-t);return c<0?null:{node:a,pos:c,text:s}}}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,i=t.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var a=new bi(this,o,n,i);e.compositionNodes.push(a),this.children=Pi(this.children,r,r+i.length,e,a)}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(e){if(!Di(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Ci(this.dom,this.nodeDOM,Ni(this.outerDeco,this.node,t),Ni(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}}},{key:"selectNode",value:function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}}],[{key:"create",value:function(e,t,r,i,o,a){var s,c=o.nodeViews[t.type.name],l=c&&c(t,o,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r),u=l&&l.dom,f=l&&l.contentDOM;if(t.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(t.text);else if(!u){var d=J.b.renderSpec(document,t.type.spec.toDOM(t));u=d.dom,f=d.contentDOM}f||t.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),t.type.spec.draggable&&(u.draggable=!0));var h=u;return u=Ai(u,r,t),l?s=new _i(e,t,r,i,u,f,h,l,o,a+1):t.isText?new Ei(e,t,r,i,u,h,o):new n(e,t,r,i,u,f,h,o,a+1)}}]),n}(mi);function xi(e,t,n,r,i){return Ai(r,t,e),new ki(null,e,t,n,r,r,r,i,0)}var Ei=function(e){si(n,e);var t=li(n);function n(e,r,i,o,a,s,c){return hi(this,n),t.call(this,e,r,i,o,a,null,s,c)}return vi(n,[{key:"parseRule",value:function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):oi(di(n.prototype),"localPosFromDOM",this).call(this,e,t,r)}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,t,r){var i=this.node.cut(e,t),o=document.createTextNode(i.text);return new n(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}}]),n}(ki),Oi=function(e){si(n,e);var t=li(n);function n(){return hi(this,n),t.apply(this,arguments)}return vi(n,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(){return 0==this.dirty}}]),n}(mi),_i=function(e){si(n,e);var t=li(n);function n(e,r,i,o,a,s,c,l,u,f){var d;return hi(this,n),(d=t.call(this,e,r,i,o,a,s,c,u,f)).spec=l,d}return vi(n,[{key:"update",value:function(e,t,r,i){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,t);return o&&this.updateInner(e,t,r,i),o}return!(!this.contentDOM&&!e.isLeaf)&&oi(di(n.prototype),"update",this).call(this,e,t,r,i)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():oi(di(n.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():oi(di(n.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):oi(di(n.prototype),"setSelection",this).call(this,e,t,r,i)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),oi(di(n.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):oi(di(n.prototype),"ignoreMutation",this).call(this,e)}}]),n}(ki);function Si(e){e&&(this.nodeName=e)}Si.prototype=Object.create(null);var Mi=[new Si];function Ni(e,t,n){if(0==e.length)return Mi;for(var r=n?Mi[0]:new Si,i=[r],o=0;o<e.length;o++){var a=e[o].type.attrs,s=r;if(a)for(var c in a.nodeName&&i.push(s=new Si(a.nodeName)),a){var l=a[c];null!=l&&(n&&1==i.length&&i.push(s=r=new Si(t.isInline?"span":"div")),"class"==c?s.class=(s.class?s.class+" ":"")+l:"style"==c?s.style=(s.style?s.style+";":"")+l:"nodeName"!=c&&(s[c]=l))}}return i}function Ci(e,t,n,r){if(n==Mi&&r==Mi)return t;for(var i=t,o=0;o<r.length;o++){var a=r[o],s=n[o];if(o){var c=void 0;s&&s.nodeName==a.nodeName&&i!=e&&(c=i.parentNode)&&c.tagName.toLowerCase()==a.nodeName||((c=document.createElement(a.nodeName)).pmIsDeco=!0,c.appendChild(i),s=Mi[0]),i=c}Ti(i,s||Mi[0],a)}return i}function Ti(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" "):gi,a=n.class?n.class.split(" "):gi,s=0;s<o.length;s++)-1==a.indexOf(o[s])&&e.classList.remove(o[s]);for(var c=0;c<a.length;c++)-1==o.indexOf(a[c])&&e.classList.add(a[c])}if(t.style!=n.style){if(t.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function Ai(e,t,n){return Ci(e,e,Mi,Ni(t,n,1!=e.nodeType))}function Di(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Ii(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Li=function(){function e(t,n){hi(this,e),this.top=t,this.lock=n,this.index=0,this.stack=[],this.changed=!1;var r=function(e,t){for(var n=[],r=e.childCount,i=t.length-1;r>0&&i>=0;i--){var o=t[i],a=o.node;if(a){if(a!=e.child(r-1))break;n.push(o),--r}}return{nodes:n.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=r.nodes,this.preMatchOffset=r.offset}return vi(e,[{key:"getPreMatch",value:function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null}},{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){for(var r=0,i=this.stack.length>>1,o=Math.min(i,e.length);r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(e[i])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=wi.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}},{key:"findNodeMatch",value:function(e,t,n,r){var i=-1,o=r<0?void 0:this.getPreMatch(r),a=this.top.children;if(o&&o.matchesNode(e,t,n))i=a.indexOf(o);else for(var s=this.index,c=Math.min(a.length,s+5);s<c;s++){var l=a[s];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}},{key:"updateNextNode",value:function(e,t,n,r,i){for(var o=this.index;o<this.top.children.length;o++){var a=this.top.children[o];if(a instanceof ki){var s=this.preMatched.indexOf(a);if(s>-1&&s+this.preMatchOffset!=i)return!1;var c=a.dom;if((!this.lock||!(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))||e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&Di(t,a.outerDeco))&&a.update(e,t,n,r))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}},{key:"addNode",value:function(e,t,n,r,i){this.top.children.splice(this.index++,0,ki.create(this.top,e,t,n,r,i)),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var i=new yi(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1];e instanceof wi;)e=e.children[e.children.length-1];if(!e||!(e instanceof Ei)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Oi(this.top,gi,t,null)),this.changed=!0}}}]),e}();function Ri(e,t){return e.type.side-t.type.side}function Pi(e,t,n,r,i){for(var o=[],a=0,s=0;a<e.length;a++){var c=e[a],l=s,u=s+=c.size;l>=n||u<=t?o.push(c):(l<t&&o.push(c.slice(0,t-l,r)),i&&(o.push(i),i=null),u>n&&o.push(c.slice(n-l,c.size,r)))}return o}function Bi(e,t){var n=e.selection,r=n.$anchor,i=n.$head,o=t>0?r.max(i):r.min(i),a=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return a&&Q.f.findFrom(a,t)}function zi(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function $i(e,t,n){var r=e.state.selection;if(!(r instanceof Q.g)){if(r instanceof Q.c&&r.node.isInline)return zi(e,new Q.g(t>0?r.$to:r.$from));var i=Bi(e.state,t);return!!i&&zi(e,i)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=Bi(e.state,t);return!!(o&&o instanceof Q.c)&&zi(e,o)}if(!(Or.mac&&n.indexOf("m")>-1)){var a,s=r.$head,c=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!c||c.isText)return!1;var l=t<0?s.pos-c.nodeSize:s.pos;return!!(c.isAtom||(a=e.docView.descAt(l))&&!a.contentDOM)&&(Q.c.isSelectable(c)?zi(e,new Q.c(t<0?e.state.doc.resolve(s.pos-c.nodeSize):s)):!!Or.webkit&&zi(e,new Q.g(e.state.doc.resolve(t<0?l:l+c.nodeSize))))}}function ji(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Hi(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Fi(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var i,o,a=!1;for(Or.gecko&&1==n.nodeType&&r<ji(n)&&Hi(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(Hi(s))i=n,o=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(Ki(n))break;for(var c=n.previousSibling;c&&Hi(c);)i=n.parentNode,o=Tr(c),c=c.previousSibling;if(c)r=ji(n=c);else{if((n=n.parentNode)==e.dom)break;r=0}}a?Vi(e,t,n,r):i&&Vi(e,t,i,o)}}function Ui(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var i,o,a=ji(n);;)if(r<a){if(1!=n.nodeType)break;if(!Hi(n.childNodes[r]))break;i=n,o=++r}else{if(Ki(n))break;for(var s=n.nextSibling;s&&Hi(s);)i=s.parentNode,o=Tr(s)+1,s=s.nextSibling;if(s)r=0,a=ji(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}i&&Vi(e,t,i,o)}}function Ki(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Vi(e,t,n,r){if(zr(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection()}function Wi(e,t,n){var r=e.state.selection;if(r instanceof Q.g&&!r.empty||n.indexOf("s")>-1)return!1;if(Or.mac&&n.indexOf("m")>-1)return!1;var i=r.$from,o=r.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=Bi(e.state,t);if(a&&a instanceof Q.c)return zi(e,a)}if(!i.parent.inlineContent){var s=Q.f.findFrom(t<0?i:o,t);return!s||zi(e,s)}return!1}function Gi(e,t){if(!(e.state.selection instanceof Q.g))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,o=n.empty;if(!r.sameParent(i))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function qi(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ji(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||Or.mac&&72==n&&"c"==r?Gi(e,-1)||Fi(e):46==n||Or.mac&&68==n&&"c"==r?Gi(e,1)||Ui(e):13==n||27==n||(37==n?$i(e,-1,r)||Fi(e):39==n?$i(e,1,r)||Ui(e):38==n?Wi(e,-1,r)||Fi(e):40==n?function(e){if(Or.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;qi(e,i,!0),setTimeout((function(){return qi(e,i,!1)}),20)}}}(e)||Wi(e,1,r)||Ui(e):r==(Or.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Xi(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var s,c,l=r.resolve(a);if(zr(n)){for(s=l;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&Q.c.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(e,t,n){for(var r=0==t,i=t==Pr(e);r||i;){if(e==n)return!0;var o=Tr(e);if(!(e=e.parentNode))return!1;r=r&&0==o,i=i&&o==Pr(e)}}(n.focusNode,n.focusOffset,i.dom))){var u=i.posBefore;c=new Q.c(a==u?l:r.resolve(u))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;s=r.resolve(f)}return c||(c=io(e,s,l,"pointer"==t||e.state.selection.head<l.pos&&!o?1:-1)),c}function Zi(e,t){var n=e.state.selection;if(no(e,n),e.editable?e.hasFocus():oo(e)&&document.activeElement&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,Tr(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&Or.ie&&Or.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var r,i,o=n.anchor,a=n.head;!Qi||n instanceof Q.g||(n.$from.parent.inlineContent||(r=Yi(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=Yi(e,n.to))),e.docView.setSelection(o,a,e.root,t),Qi&&(r&&to(r),i&&to(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var Qi=Or.safari||Or.chrome&&Or.chrome_version<63;function Yi(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(Or.safari&&o&&"false"==o.contentEditable)return eo(o);if(!(o&&"false"!=o.contentEditable||a&&"false"!=a.contentEditable)){if(o)return eo(o);if(a)return eo(a)}}function eo(e){return e.contentEditable="true",Or.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function to(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function no(e,t){if(t instanceof Q.c){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ro(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ro(e)}function ro(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function io(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||Q.g.between(t,n,r)}function oo(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function ao(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Or.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||Or.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function so(e,t,n,r,i){if(t<0){var o=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=Xi(e,o);if(a&&!e.state.selection.eq(a)){var s=e.state.tr.setSelection(a);"pointer"==o?s.setMeta("pointer",!0):"key"==o&&s.scrollIntoView(),e.dispatch(s)}}else{var c=e.state.doc.resolve(t),l=c.sharedDepth(n);t=c.before(l+1),n=e.state.doc.resolve(n).after(l+1);var u,f,d=e.state.selection,h=function(e,t,n){var r=e.docView.parseRange(t,n),i=r.node,o=r.fromOffset,a=r.toOffset,s=r.from,c=r.to,l=e.root.getSelection(),u=null,f=l.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(u=[{node:f,offset:l.anchorOffset}],zr(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Or.chrome&&8===e.lastKeyCode)for(var d=a;d>o;d--){var h=i.childNodes[d-1],p=h.pmViewDesc;if("BR"==h.nodeType&&!p){a=d;break}if(!p||p.size)break}var v=e.state.doc,m=e.someProp("domParser")||J.a.fromSchema(e.state.schema),g=v.resolve(s),y=null,b=m.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:a,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:ao,context:g});if(u&&null!=u[0].pos){var w=u[0].pos,k=u[1]&&u[1].pos;null==k&&(k=w),y={anchor:w+s,head:k+s}}return{doc:b,sel:y,from:s,to:c}}(e,t,n),p=e.state.doc,v=p.slice(h.from,h.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(u=e.state.selection.to,f="end"):(u=e.state.selection.from,f="start"),e.lastKeyCode=null;var m=function(e,t,n,r,i){var o=e.findDiffStart(t,n);if(null==o)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,c=a.b;if("end"==i){var l=Math.max(0,o-Math.min(s,c));r-=s+l-o}return s<o&&e.size<t.size?(c=(o-=r<=o&&r>=s?o-r:0)+(c-s),s=o):c<o&&(s=(o-=r<=o&&r>=c?o-r:0)+(s-c),c=o),{start:o,endA:s,endB:c}}(v.content,h.doc.content,h.from,u,f);if(!m){if(!(r&&d instanceof Q.g&&!d.empty&&d.$head.sameParent(d.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){var g=co(e,e.state.doc,h.sel);g&&!g.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(g))}return}m={start:d.from,endA:d.to,endB:d.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Q.g&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),Or.ie&&Or.ie_version<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>h.from&&"  "==h.doc.textBetween(m.start-h.from-1,m.start-h.from+1)&&(m.start--,m.endA--,m.endB--);var y,b=h.doc.resolveNoCache(m.start-h.from),w=h.doc.resolveNoCache(m.endB-h.from),k=b.sameParent(w)&&b.parent.inlineContent;if((Or.ios&&e.lastIOSEnter>Date.now()-225&&(!k||i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!k&&b.pos<h.doc.content.size&&(y=Q.f.findFrom(h.doc.resolve(b.pos+1),1,!0))&&y.head==w.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,$r(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>m.start&&function(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||lo(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var a=e.resolve(lo(o,!0,!0));return!(!a.parent.isTextblock||a.pos>n||lo(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(p,m.start,m.endA,b,w)&&e.someProp("handleKeyDown",(function(t){return t(e,$r(8,"Backspace"))})))Or.android&&Or.chrome&&e.domObserver.suppressSelectionUpdates();else{Or.android&&!k&&b.start()!=w.start()&&0==w.parentOffset&&b.depth==w.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==m.endA&&(m.endB-=2,w=h.doc.resolveNoCache(m.endB-h.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,$r(13,"Enter"))}))}),20));var x,E,O,_,S=m.start,M=m.endA;if(k)if(b.pos==w.pos)Or.ie&&Or.ie_version<=11&&0==b.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Zi(e)}),20)),x=e.state.tr.delete(S,M),E=p.resolve(m.start).marksAcross(p.resolve(m.endA));else if(m.endA==m.endB&&(_=p.resolve(m.start))&&(O=function(e,t){for(var n,r,i,o=e.firstChild.marks,a=t.firstChild.marks,s=o,c=a,l=0;l<a.length;l++)s=a[l].removeFromSet(s);for(var u=0;u<o.length;u++)c=o[u].removeFromSet(c);if(1==s.length&&0==c.length)r=s[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=c.length)return null;r=c[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var f=[],d=0;d<t.childCount;d++)f.push(i(t.child(d)));if(J.c.from(f).eq(e))return{mark:r,type:n}}(b.parent.content.cut(b.parentOffset,w.parentOffset),_.parent.content.cut(_.parentOffset,m.endA-_.start()))))x=e.state.tr,"add"==O.type?x.addMark(S,M,O.mark):x.removeMark(S,M,O.mark);else if(b.parent.child(b.index()).isText&&b.index()==w.index()-(w.textOffset?0:1)){var N=b.parent.textBetween(b.parentOffset,w.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,S,M,N)})))return;x=e.state.tr.insertText(N,S,M)}if(x||(x=e.state.tr.replace(S,M,h.doc.slice(m.start-h.from,m.endB-h.from))),h.sel){var C=co(e,x.doc,h.sel);C&&!(Or.chrome&&Or.android&&e.composing&&C.empty&&(C.head==S||C.head==x.mapping.map(M)-1)||Or.ie&&C.empty&&C.head==S)&&x.setSelection(C)}E&&x.ensureMarks(E),e.dispatch(x.scrollIntoView())}}}function co(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:io(e,t.resolve(n.anchor),t.resolve(n.head))}function lo(e,t,n){for(var r=e.depth,i=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n)for(var o=e.node(r).maybeChild(e.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fo(e,t){for(var n=[],r=t.content,i=t.openStart,o=t.openEnd;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||J.b.fromSchema(e.state.schema),c=yo(),l=c.createElement("div");l.appendChild(s.serializeFragment(r,{document:c}));for(var u,f=l.firstChild;f&&1==f.nodeType&&(u=mo[f.nodeName.toLowerCase()]);){for(var d=u.length-1;d>=0;d--){for(var h=c.createElement(u[d]);l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h)}f=l.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice","".concat(i," ").concat(o," ").concat(JSON.stringify(n))),{dom:l,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function ho(e,t,n,r,i){var o,a,s=i.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(r||s||!n);if(c){if(e.someProp("transformPastedText",(function(e){t=e(t,s||r)})),s)return new J.i(J.c.from(e.state.schema.text(t)),0,0);var l=e.someProp("clipboardTextParser",(function(e){return e(t,i,r)}));l?a=l:(o=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){o.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),o=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=yo().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&mo[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length),r.innerHTML=e;for(var a=0;a<o;a++)r=r.firstChild;return r}(n);var u=o&&o.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||J.a.fromSchema(e.state.schema);a=d.parseSlice(o,{preserveWhitespace:!(!c&&!f),context:i})}return a=f?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,o=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var c=r.nodes[n[s]];if(!c||c.hasRequiredAttrs())break;i=J.c.from(c.create(n[s+1],i)),o++,a++}return new J.i(i,o,a)}(function(e,t,n){return t<e.openStart&&(e=new J.i(vo(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new J.i(vo(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}(a,+f[1],+f[2]),f[3]):J.i.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),i=void 0,o=[];if(e.forEach((function(e){if(o){var t,n=r.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&i.length&&function e(t,n,r,i,o){if(o<t.length&&o<n.length&&t[o]==n[o]){var a=e(t,n,r,i.lastChild,o+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(o==t.length-1?r.type:t[o+1]))return i.copy(i.content.append(J.c.from(po(r,t,o+1))))}}(n,i,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(J.c.empty,!0);return t.copy(r.append(i))}(o[o.length-1],i.length));var a=po(e,n);o.push(a),r=r.matchType(a.type,a.attrs),i=n}}})),o)return{v:J.c.from(o)}},r=t.depth;r>=0;r--){var i=n(r);if("object"===uo(i))return i.v}return e}(a.content,i),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function po(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,J.c.from(e));return e}function vo(e,t,n,r,i,o){var a=t<0?e.firstChild:e.lastChild,s=a.content;return i<r-1&&(s=vo(s,t,n,r,i+1,o)),i>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,e.childCount>1||o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(J.c.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}var mo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},go=null;function yo(){return go||(go=document.implementation.createHTMLDocument("title"))}function bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e,t,n){return t&&xo(e.prototype,t),n&&xo(e,n),e}var Oo={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_o=Or.ie&&Or.ie_version<=11,So=function(){function e(){ko(this,e),this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null}return Eo(e,[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}]),e}(),Mo=function(){function e(t,n){var r=this;ko(this,e),this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);Or.ie&&Or.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),this.currentSelection=new So,_o&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1}return Eo(e,[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&this.observer.observe(this.view.dom,Oo),_o&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}_o&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(function(e){return(!e.editable||e.root.activeElement==e.dom)&&oo(e)}(this.view)){if(this.suppressingSelectionUpdates)return Zi(this.view);if(Or.ie&&Or.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&Ir(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.root.getSelection())}},{key:"ignoreSelectionChange",value:function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"flush",value:function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&oo(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var s=0;s<e.length;s++){var c=this.registerMutation(e[s],a);c&&(r=r<0?c.from:Math.min(c.from,r),i=i<0?c.to:Math.max(c.to,i),c.typeOver&&(o=!0))}if(Or.gecko&&a.length>1){var l=a.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var u=bo(l,2),f=u[0],d=u[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),function(e){No||(No=!0,getComputedStyle(e.dom).whiteSpace)}(this.view)),this.handleDOMChange(r,i,o,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Zi(this.view))}}},{key:"registerMutation",value:function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(Or.ie&&Or.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var a=e.addedNodes[o],s=a.previousSibling,c=a.nextSibling;(!s||Array.prototype.indexOf.call(e.addedNodes,s)<0)&&(r=s),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c)}for(var l=r&&r.parentNode==e.target?Tr(r)+1:0,u=n.localPosFromDOM(e.target,l,-1),f=i&&i.parentNode==e.target?Tr(i):e.target.childNodes.length,d=0;d<e.addedNodes.length;d++)t.push(e.addedNodes[d]);return{from:u,to:n.localPosFromDOM(e.target,f,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}]),e}(),No=!1;function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ao(e){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Do={},Io={};function Lo(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Ro(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Po(e,t)})}))}function Po(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Bo(e){return{left:e.clientX,top:e.clientY}}function zo(e,t,n,r,i){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),a=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},s=o.depth+1;s>0;s--){var c=a(s);if("object"===Ao(c))return c.v}return!1}function $o(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function jo(e,t,n,r,i){return zo(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(i?function(e,t){if(-1==t)return!1;var n,r,i=e.state.selection;i instanceof Q.c&&(n=i.node);for(var o=e.state.doc.resolve(t),a=o.depth+1;a>0;a--){var s=a>o.depth?o.nodeAfter:o.node(a);if(Q.c.isSelectable(s)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(a);break}}return null!=r&&($o(e,Q.c.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Q.c.isSelectable(r))&&($o(e,new Q.c(n),"pointer"),!0)}(e,n))}function Ho(e,t,n,r){return zo(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function Fo(e,t,n,r){return zo(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&($o(e,Q.g.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),i=r.depth+1;i>0;i--){var o=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(o.inlineContent)$o(e,Q.g.create(n,a+1,a+1+o.content.size),"pointer");else{if(!Q.c.isSelectable(o))continue;$o(e,Q.c.create(n,a),"pointer")}return!0}}(e,n)}function Uo(e){return Xo(e)}Io.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Wo(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!Or.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Ji(e,t)?t.preventDefault():Lo(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,$r(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Io.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Io.keypress=function(e,t){if(!(Wo(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||Or.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof Q.g&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var Ko=Or.mac?"metaKey":"ctrlKey";Do.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=Uo(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[Ko]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(Bo(t));o&&("singleClick"==i?e.mouseDown=new Vo(e,o,t,n):("doubleClick"==i?Ho:Fo)(e,o.pos,o.inside,t)?t.preventDefault():Lo(e,"pointer"))};var Vo=function(){function e(t,n,r,i){var o,a,s=this;if(Co(this,e),this.view=t,this.startDoc=t.state.doc,this.pos=n,this.event=r,this.flushed=i,this.selectNode=r[Ko],this.allowDefault=r.shiftKey,n.inside>-1)o=t.state.doc.nodeAt(n.inside),a=n.inside;else{var c=t.state.doc.resolve(n.pos);o=c.parent,a=c.depth?c.before():0}this.mightDrag=null;var l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u?u.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||t.state.selection instanceof Q.c&&a==t.state.selection.from)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&Or.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Lo(t,"pointer")}var t,n,r;return t=e,(n=[{key:"done",value:function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null}},{key:"up",value:function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Bo(e))),this.allowDefault||!t?Lo(this.view,"pointer"):jo(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||Or.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||Or.chrome&&!(this.view.state.selection instanceof Q.g)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?($o(this.view,Q.f.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Lo(this.view,"pointer")}}},{key:"move",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Lo(this.view,"pointer")}}])&&To(t.prototype,n),r&&To(t,r),e}();function Wo(e,t){return!!e.composing||!!(Or.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Do.touchdown=function(e){Uo(e),Lo(e,"pointer")},Do.contextmenu=function(e){return Uo(e)};var Go=Or.android?5e3:-1;function qo(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return Xo(e)}),t))}function Jo(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function Xo(e,t){if(e.domObserver.forceFlush(),Jo(e),t||e.docView.dirty){var n=Xi(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}Io.compositionstart=Io.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),Xo(e,!0),e.markCursor=null;else if(Xo(e),Or.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}e.composing=!0}qo(e,Go)},Io.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,qo(e,20))};var Zo=Or.ie&&Or.ie_version<15||Or.ios&&Or.webkit_version<604;function Qo(e,t,n,r){var i=ho(e,t,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",(function(t){return t(e,r,i||J.i.empty)}))&&i){var o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),a=o?e.state.tr.replaceSelectionWith(o,e.shiftKey):e.state.tr.replaceSelection(i);e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Do.copy=Io.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var i=Zo?null:t.clipboardData,o=fo(e,n.content()),a=o.dom,s=o.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",s)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Io.paste=function(e,t){var n=Zo?null:t.clipboardData,r=n&&n.getData("text/html"),i=n&&n.getData("text/plain");n&&(r||i||n.files.length)?(Qo(e,i,r,t),t.preventDefault()):function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Qo(e,r.value,null,t):Qo(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)};var Yo=function e(t,n){Co(this,e),this.slice=t,this.move=n},ea=Or.mac?"altKey":"ctrlKey";for(var ta in Do.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords(Bo(t));if(i&&i.pos>=r.from&&i.pos<=(r instanceof Q.c?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(Q.c.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var o=e.docView.nearestDesc(t.target,!0);if(!o||!o.node.type.spec.draggable||o==e.docView)return;e.dispatch(e.state.tr.setSelection(Q.c.create(e.state.doc,o.posBefore)))}var a=e.state.selection.content(),s=fo(e,a),c=s.dom,l=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Zo?"Text":"text/html",c.innerHTML),Zo||t.dataTransfer.setData("text/plain",l),e.dragging=new Yo(a,!t[ea])}},Do.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},Io.dragover=Io.dragenter=function(e,t){return t.preventDefault()},Io.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(Bo(t));if(r){var i=e.state.doc.resolve(r.pos);if(i){var o=n&&n.slice||ho(e,t.dataTransfer.getData(Zo?"Text":"text/plain"),Zo?null:t.dataTransfer.getData("text/html"),!1,i);if(e.someProp("handleDrop",(function(r){return r(e,t,o||J.i.empty,n&&n.move)})))t.preventDefault();else if(o){t.preventDefault();var a=o?Object(B.f)(e.state.doc,i.pos,o):i.pos;null==a&&(a=i.pos);var s=e.state.tr;n&&n.move&&s.deleteSelection();var c=s.mapping.map(a),l=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,u=s.doc;if(l?s.replaceRangeWith(c,c,o.content.firstChild):s.replaceRange(c,c,o),!s.doc.eq(u)){var f=s.doc.resolve(c);l&&Q.c.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild)?s.setSelection(new Q.c(f)):s.setSelection(io(e,f,s.doc.resolve(s.mapping.map(a)))),e.focus(),e.dispatch(s.setMeta("uiEvent","drop"))}}}}}},Do.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Zi(e)}),20))},Do.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Do.beforeinput=function(e,t){if(Or.chrome&&Or.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,$r(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Io)Do[ta]=Io[ta];function na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t,n){return t&&ra(e.prototype,t),n&&ra(e,n),e}function oa(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var aa=function(){function e(t,n){na(this,e),this.spec=n||fa,this.side=this.spec.side||0,this.toDOM=t}return ia(e,[{key:"map",value:function(e,t,n,r){var i=e.mapResult(t.from+r,this.side<0?-1:1),o=i.pos;return i.deleted?null:new la(o-n,o-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&oa(this.spec,t.spec))}}]),e}(),sa=function(){function e(t,n){na(this,e),this.spec=n||fa,this.attrs=t}return ia(e,[{key:"map",value:function(e,t,n,r){var i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new la(i,o,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&oa(this.attrs,t.attrs)&&oa(this.spec,t.spec)}}],[{key:"is",value:function(t){return t.type instanceof e}}]),e}(),ca=function(){function e(t,n){na(this,e),this.spec=n||fa,this.attrs=t}return ia(e,[{key:"map",value:function(e,t,n,r){var i=e.mapResult(t.from+r,1);if(i.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new la(i.pos-n,o.pos-n,this)}},{key:"valid",value:function(e,t){var n=e.content.findIndex(t.from),r=n.index,i=n.offset;return i==t.from&&i+e.child(r).nodeSize==t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&oa(this.attrs,t.attrs)&&oa(this.spec,t.spec)}}]),e}(),la=function(){function e(t,n,r){na(this,e),this.from=t,this.to=n,this.type=r}return ia(e,[{key:"copy",value:function(t,n){return new e(t,n,this.type)}},{key:"eq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof sa}}],[{key:"widget",value:function(t,n,r){return new e(t,t,new aa(n,r))}},{key:"inline",value:function(t,n,r,i){return new e(t,n,new sa(r,i))}},{key:"node",value:function(t,n,r,i){return new e(t,n,new ca(r,i))}}]),e}(),ua=[],fa={},da=function(){function e(t,n){na(this,e),this.local=t&&t.length?t:ua,this.children=n&&n.length?n:ua}return ia(e,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,i){for(var o=0;o<this.local.length;o++){var a=this.local[o];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var c=this.children[s]+1;this.children[s+2].findInner(e-c,t-c,n,r+c,i)}}},{key:"map",value:function(e,t,n){return this==ha||0==e.maps.length?this:this.mapInner(e,t,0,0,n||fa)}},{key:"mapInner",value:function(t,n,r,i,o){for(var a,s=0;s<this.local.length;s++){var c=this.local[s].map(t,r,i);c&&c.type.valid(n,c)?(a||(a=[])).push(c):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?va(this.children,a,t,n,r,i,o):a?new e(a.sort(wa)):ha}},{key:"add",value:function(t,n){return n.length?this==ha?e.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,r){var i,o=this,a=0;t.forEach((function(e,t){var s,c=t+r;if(s=ga(n,e,c)){for(i||(i=o.children.slice());a<i.length&&i[a]<t;)a+=3;i[a]==t?i[a+2]=i[a+2].addInner(e,s,c+1):i.splice(a,0,t,t+e.nodeSize,ba(s,e,c+1,fa)),a+=3}}));var s=ma(a?ya(n):n,-r);return new e(s.length?this.local.concat(s).sort(wa):this.local,i||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==ha?this:this.removeInner(e,0)}},{key:"removeInner",value:function(t,n){for(var r=this.children,i=this.local,o=0;o<r.length;o+=3){for(var a,s=void 0,c=r[o]+n,l=r[o+1]+n,u=0;u<t.length;u++)(a=t[u])&&a.from>c&&a.to<l&&(t[u]=null,(s||(s=[])).push(a));if(s){r==this.children&&(r=this.children.slice());var f=r[o+2].removeInner(s,c+1);f!=ha?r[o+2]=f:(r.splice(o,3),o-=3)}}if(i.length)for(var d,h=0;h<t.length;h++)if(d=t[h])for(var p=0;p<i.length;p++)i[p].eq(d,n)&&(i==this.local&&(i=this.local.slice()),i.splice(p--,1));return r==this.children&&i==this.local?this:i.length||r.length?new e(i,r):ha}},{key:"forChild",value:function(t,n){if(this==ha)return this;if(n.isLeaf)return e.empty;for(var r,i,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}for(var a=t+1,s=a+n.content.size,c=0;c<this.local.length;c++){var l=this.local[c];if(l.from<s&&l.to>a&&l.type instanceof sa){var u=Math.max(a,l.from)-a,f=Math.min(s,l.to)-a;u<f&&(i||(i=[])).push(l.copy(u,f))}}if(i){var d=new e(i.sort(wa));return r?new pa([d,r]):d}return r||ha}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}},{key:"locals",value:function(e){return ka(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==ha)return ua;if(e.inlineContent||!this.local.some(sa.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof sa||t.push(this.local[n]);return t}}],[{key:"create",value:function(e,t){return t.length?ba(t,e,0,fa):ha}}]),e}(),ha=new da;da.empty=ha,da.removeOverlap=ka;var pa=function(){function e(t){na(this,e),this.members=t}return ia(e,[{key:"forChild",value:function(t,n){if(n.isLeaf)return da.empty;for(var r=[],i=0;i<this.members.length;i++){var o=this.members[i].forChild(t,n);o!=ha&&(o instanceof e?r=r.concat(o.members):r.push(o))}return e.from(r)}},{key:"eq",value:function(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?ka(n?t:t.sort(wa)):ua}}],[{key:"from",value:function(t){switch(t.length){case 0:return ha;case 1:return t[0];default:return new e(t)}}}]),e}();function va(e,t,n,r,i,o,a){for(var s=e.slice(),c=function(e,t,n,r){for(var a=0;a<s.length;a+=3){var c=s[a+1],l=void 0;-1==c||e>c+o||(t>=s[a]+o?s[a+1]=-1:n>=i&&(l=r-n-(t-e))&&(s[a]+=l,s[a+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,f=0;f<s.length;f+=3)if(-1==s[f+1]){var d=n.map(e[f]+o),h=d-i;if(h<0||h>=r.content.size){u=!0;continue}var p=n.map(e[f+1]+o,-1)-i,v=r.content.findIndex(h),m=v.index,g=v.offset,y=r.maybeChild(m);if(y&&g==h&&g+y.nodeSize==p){var b=s[f+2].mapInner(n,y,d+1,e[f]+o+1,a);b!=ha?(s[f]=h,s[f+1]=p,s[f+2]=b):(s[f+1]=-2,u=!0)}else u=!0}if(u){var w=ba(function(e,t,n,r,i,o,a){function s(e,t){for(var o=0;o<e.local.length;o++){var c=e.local[o].map(r,i,t);c?n.push(c):a.onRemove&&a.onRemove(e.local[o].spec)}for(var l=0;l<e.children.length;l+=3)s(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&s(e[c+2],t[c]+o+1);return n}(s,e,t||[],n,i,o,a),r,0,a);t=w.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var x=0,E=0;x<w.children.length;x+=3){for(var O=w.children[x];E<s.length&&s[E]<O;)E+=3;s.splice(E,0,w.children[x],w.children[x+1],w.children[x+2])}}return new da(t&&t.sort(wa),s)}function ma(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new la(i.from+t,i.to+t,i.type))}return n}function ga(e,t,n){if(t.isLeaf)return null;for(var r,i=n+t.nodeSize,o=null,a=0;a<e.length;a++)(r=e[a])&&r.from>n&&r.to<i&&((o||(o=[])).push(r),e[a]=null);return o}function ya(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function ba(e,t,n,r){var i=[],o=!1;t.forEach((function(t,a){var s=ga(e,t,a+n);if(s){o=!0;var c=ba(s,t,n+a+1,r);c!=ha&&i.push(a,a+t.nodeSize,c)}}));for(var a=ma(o?ya(e):e,-n).sort(wa),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||i.length?new da(a,i):ha}function wa(e,t){return e.from-t.from||e.to-t.to}function ka(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),xa(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),xa(t,i+1,o.copy(r.to,o.to)))}}return t}function xa(e,t,n){for(;t<e.length&&wa(n,e[t])>0;)t++;e.splice(t,0,n)}function Ea(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=ha&&t.push(r)})),e.cursorWrapper&&t.push(da.create(e.state.doc,[e.cursorWrapper.deco])),pa.from(t)}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._props=n,this.state=n.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Na(this),this.markCursor=null,this.cursorWrapper=null,Ma(this),this.nodeViews=Ca(this),this.docView=xi(this.state.doc,Sa(this),Ea(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Mo(e,(function(t,n,r,i){return so(e,t,n,r,i)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Do[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Po(e,t)||!e.editable&&t.type in Io||n(e,t)})};for(var n in Do)t(n);Or.safari&&e.dom.addEventListener("input",(function(){return null})),Ro(e)}(this),this.pluginViews=[],this.updatePluginViews()}var t,n,r;return t=e,(n=[{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ro(this),this._props=e,this.updateStateInner(e.state,!0)}},{key:"setProps",value:function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)}},{key:"updateState",value:function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}},{key:"updateStateInner",value:function(e,t){var n=this,r=this.state,i=!1,o=!1;if(e.storedMarks&&this.composing&&(Jo(this),o=!0),this.state=e,t){var a=Ca(this);(function(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r})(a,this.nodeViews)&&(this.nodeViews=a,i=!0),Ro(this)}this.editable=Na(this),Ma(this);var s=Ea(this),c=Sa(this),l=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,c,s);!u&&e.selection.eq(r.selection)||(o=!0);var f,d,h,p,v,m,g,y,b="preserve"==l&&o&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,a=i+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(o,a);if(s!=e.dom&&e.dom.contains(s)){var c=s.getBoundingClientRect();if(c.top>=i-20){t=s,n=c.top;break}}}return{refDOM:t,refTop:n,stack:Kr(e.dom)}}(this);if(o){this.domObserver.stop();var w=u&&(Or.ie||Or.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(f=r.selection,d=e.selection,h=Math.min(f.$anchor.sharedDepth(f.head),d.$anchor.sharedDepth(d.head)),f.$anchor.start(h)!=d.$anchor.start(h));if(u){var k=Or.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,c,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=xi(e.doc,c,s,this.dom,this)),k&&!this.trackWrites&&(w=!0)}w||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&function(e){var t=e.docView.domFromPos(e.state.selection.anchor),n=e.root.getSelection();return Ir(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Zi(this,w):(no(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var x=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof Q.c?Ur(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),x):Ur(this,this.coordsAtPos(e.selection.head),x))}else b&&(v=(p=b).refDOM,m=p.refTop,g=p.stack,y=v?v.getBoundingClientRect().top:0,Vr(g,0==y?0:y-m))}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var a=i[o].props[e];if(null!=a&&(n=t?t(a):a))return n}}},{key:"hasFocus",value:function(){return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Wr)return e.focus(Wr);var t=Kr(e);e.focus(null==Wr?{get preventScroll(){return Wr={preventScroll:!0},!0}}:void 0),Wr||(Wr=!1,Vr(t,0))}(this.dom),Zi(this),this.domObserver.start()}},{key:"posAtCoords",value:function(e){return Jr(this,e)}},{key:"coordsAtPos",value:function(e){return Zr(this,e)}},{key:"domAtPos",value:function(e){return this.docView.domFromPos(e)}},{key:"nodeDOM",value:function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(e,t){return ii(this,t||this.state,e)}},{key:"destroy",value:function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ea(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}},{key:"dispatchEvent",value:function(e){return function(e,t){Po(e,t)||!Do[t.type]||!e.editable&&t.type in Io||Do[t.type](e,t)}(this,e)}},{key:"dispatch",value:function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}},{key:"root",get:function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document}}])&&Oa(t.prototype,n),r&&Oa(t,r),e}();function Sa(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[la.node(0,e.state.doc.content.size,t)]}function Ma(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:la.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Na(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Ca(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}var Ta=n(4),Aa=n.n(Ta),Da=n(40),Ia=n.n(Da),La={props:["getInfo","conf"],data:function(){return{status:"blur",config:{canEdit:!1,center:!1,btns:[]},id:""}},computed:{focusClass:function(){return"focus"===this.status?this.$style.on:""}},created:function(){this.setConfig(this.conf)},mounted:function(){var e=this.getInfo();this.id=e.node.type.name+e.nodePos+String((new Date).getTime()).slice(-4)},methods:{focus:function(){this.status="focus"},blur:function(){this.status="blur"},edit:function(){if(this.getInfo().config.editNode){var e=this.getInfo();e.config.editNode(e.node.type.name,this.id,e.node.attrs,Ke)}},remove:function(){var e=this.getInfo(),t=ne(e.view),n=e.view.state;t(Le(n,n.tr,e.nodePos))},setConfig:function(e){this.config=Object.assign({},this.config,e||{}),this.config.btns||(this.config.btns=[])}}},Ra=n(55);function Pa(e,t,n,r,i,o,a,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:e,options:l}}var Ba=Pa(La,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.main],attrs:{"data-id":t.id,"data-block-view":""},on:{mousedown:function(e){e.preventDefault()}}},[r("span",{class:t.$style.emptyChar},[t._v("​")]),t._v(" "),r("div",{class:[t.$style.node,t.focusClass],attrs:{"data-view-wrap":""}},[r("div",{class:[t.$style.btns,(e={},e[t.$style.center]=t.config.center,e)],attrs:{"data-view-btns":""}},[t.config.canEdit?r("div",{class:[t.$style.btn],attrs:{"data-view-btn":""},on:{click:function(e){return t.edit()}}},[t._v("编辑")]):t._e(),t._v(" "),r("div",{class:[t.$style.btn],attrs:{"data-view-btn":""},on:{click:function(e){return t.remove()}}},[t._v("删除")]),t._v(" "),t._l(t.config.btns,(function(e){return r("div",{key:e.name,class:[t.$style.btn],attrs:{"data-view-btn":""},on:{click:function(t){return e.onclick()}}},[t._v(t._s(e.name))])}))],2),t._v(" "),t._t("default")],2),t._v(" "),t._t("other")],2)}),[],!1,(function(e){this.$style=Ra.default.locals||Ra.default}),null,null).exports;function za(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function $a(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var ja=["text/plain","text/html"],Ha=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),Fa=!0,Ua=function(){function e(){this.m={}}return e.prototype.setData=function(e,t){Fa&&-1===ja.indexOf(e)&&Ha("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[e]=t},e.prototype.getData=function(e){return this.m[e]},e.prototype.forEach=function(e){for(var t in this.m)e(this.m[t],t)},e}(),Ka=function(e){},Va=!0,Wa=function(){(console.warn||console.log).apply(console,arguments)}.bind("[clipboard-polyfill]"),Ga="text/plain";function qa(e){return za(this,void 0,void 0,(function(){var t;return $a(this,(function(n){if(Va&&!e.getData(Ga)&&Wa("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),es()){if(function(e){var t=e.getData(Ga);if(void 0!==t)return window.clipboardData.setData("Text",t);throw new Error("No `text/plain` value was specified.")}(e))return[2];throw new Error("Copying failed, possibly because the user rejected it.")}if(Xa(e))return Ka("regular execCopy worked"),[2];if(navigator.userAgent.indexOf("Edge")>-1)return Ka('UA "Edge" => assuming success'),[2];if(Za(document.body,e))return Ka("copyUsingTempSelection worked"),[2];if(function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=Za(t,e);return document.body.removeChild(t),n}(e))return Ka("copyUsingTempElem worked"),[2];if(void 0!==(t=e.getData(Ga))&&function(e){Ka("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(Ka("Using shadow DOM."),n=t.attachShadow({mode:"open"}));var r=document.createElement("span");r.innerText=e,n.appendChild(r),document.body.appendChild(t),Qa(r);var i=document.execCommand("copy");return Ya(),document.body.removeChild(t),i}(t))return Ka("copyTextUsingDOM worked"),[2];throw new Error("Copy command failed.")}))}))}var Ja=function(){this.success=!1};function Xa(e){var t=new Ja,n=function(e,t,n){Ka("listener called"),e.success=!0,t.forEach((function(t,r){var i=n.clipboardData;i.setData(r,t),r===Ga&&i.getData(r)!==t&&(Ka("setting text/plain failed"),e.success=!1)})),n.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function Za(e,t){Qa(e);var n=Xa(t);return Ya(),n}function Qa(e){var t=document.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function Ya(){var e=document.getSelection();e&&e.removeAllRanges()}function es(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ns=[{name:"Plain Text",lang:"text",attrLang:"text"}];function rs(e,t){if(e===t)return null;for(var n=0,r=e.length,i=t.length;n<r&&e.charCodeAt(n)===t.charCodeAt(n);)++n;for(;r>n&&i>n&&e.charCodeAt(r-1)===t.charCodeAt(i-1);)r--,i--;return{from:n,to:r,text:t.slice(n,i)}}var is={name:"codeBlock",components:{NodeView:Ba},props:["pnode","view","getPos","config"],data:function(){return{incomingChanges:!1,updating:!1,cm:null,node:null,curOption:ns[0],options:ns,afterMounted:function(){},viewConfig:{},showList:!1}},created:function(){if(this.node=this.pnode,this.config.nodeViews){var e=this.config.nodeViews[p.CODE_BLOCK]||{},t=e.options;Array.isArray(t)&&(this.options=ns.concat(t));var n=e.afterMounted;"function"==typeof n&&(this.afterMounted=n)}var r=this.node.attrs.lang;if(r){var i=this.options.find((function(e){return e.attrLang===r||!!(e.alias&&e.alias[0]&&e.alias.indexOf(r.toLowerCase())>-1)||void 0}));i&&(this.curOption=i)}},mounted:function(){var e=this;document.addEventListener("click",this.outSideClick.bind(this),!1),this.cm=new Ia.a(this.$refs.codemiror,{mode:this.curOption.lang||"text",value:this.node.textContent,lineNumbers:!0,tabSize:2,scrollbarStyle:"native",inputStyle:"contenteditable",extraKeys:this.codeMirrorKeymap()}),setTimeout((function(){e.cm.refresh(),e.node.textContent||e.focus(),e.afterMounted(e.node,e.cm,e.$refs.codemiror)}),20),this.updating=!1,this.cm.on("beforeChange",(function(){e.incomingChanges=!0})),this.cm.on("changes",(function(){if(!e.updating){var t=e.codeMirrorChanged();e.dispatch(t)}e.incomingChanges=!1})),this.cm.on("focus",(function(){return e.forwardSelection()})),this.cm.on("blur",(function(){return e.$refs.view.blur()}))},methods:{focus:function(){this.$refs.view.focus(),this.cm.focus()},blur:function(){this.$refs.view.blur(),this.cm.blur()},codeMirrorKeymap:function(){var e,t=this,n=this.view,r=/Mac/.test(navigator.platform)?"Cmd":"Ctrl";return Ia.a.normalizeKeyMap((ts(e={Up:function(){return t.maybeEscape("line",-1)},Left:function(){return t.maybeEscape("char",-1)},Down:function(){return t.maybeEscape("line",1)},Right:function(){return t.maybeEscape("char",1)}},"".concat(r,"-Z"),(function(){return Rt(n.state,n.dispatch)})),ts(e,"Shift-".concat(r,"-Z"),(function(){return Pt(n.state,n.dispatch)})),ts(e,"".concat(r,"-Y"),(function(){return Pt(n.state,n.dispatch)})),ts(e,"".concat(r,"-Enter"),(function(){var e=function(e,t){var n=t.curSelection,r=n.$head,i=n.$anchor;if(!r.sameParent(i))return!1;var o=r.after();return(t=t.replaceWith(o,o,e.schema.nodes[p.PARAGRAPH].createAndFill())).setSelection(Q.f.near(t.doc.resolve(o),1))}(n.state,n.state.tr);n.dispatch(e),n.focus()})),ts(e,"".concat(r,"-C"),(function(){var e,n,r,i;e=t,n=new Ua,r=e.cm.getSelection("\n"),i=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i='<pre lang="'.concat(e.curOption.attrLang,'">').concat(i,"</pre>"),n.setData("text/plain",r),n.setData("text/html",i),qa(n)})),e))},maybeEscape:function(e,t){var n=this.cm.getCursor();if(this.cm.somethingSelected()||n.line!==(t<0?this.cm.firstLine():this.cm.lastLine())||"char"===e&&n.ch!==(t<0?0:this.cm.getLine(n.line).length))return Ia.a.Pass;this.view.focus()},forwardSelection:function(e){if(this.cm.hasFocus()){var t=this.view.state.selection,n=this.asProseMirrorSelection(this.view.state.doc);if(e&&(t=e.curSelection,n=this.asProseMirrorSelection(e.doc)),!n.eq(t)){if(e)return e.setSelection(n);this.dispatch(this.view.state.tr.setSelection(n))}}},asProseMirrorSelection:function(e){var t=this.getPos()+1,n=this.cm.indexFromPos(this.cm.getCursor("anchor"))+t,r=this.cm.indexFromPos(this.cm.getCursor("head"))+t;return Q.g.create(e,n,r)},codeMirrorChanged:function(){var e=rs(this.node.textContent,this.cm.getValue());if(e){var t=this.view.state.schema,n=this.getPos()+1;return this.view.state.tr.replaceWith(n+e.from,n+e.to,e.text?t.text(e.text):null)}return this.view.state.tr},viewUpdate:function(e){this.node=e;var t=rs(this.cm.getValue(),e.textContent);t&&(this.updating=!0,this.cm.replaceRange(t.text,this.cm.posFromIndex(t.from),this.cm.posFromIndex(t.to)),this.updating=!1)},viewSetSelection:function(e,t){this.cm.focus(),this.updating=!0,this.cm.setSelection(this.cm.posFromIndex(e),this.cm.posFromIndex(t)),this.updating=!1},dispatch:function(e){this.view.dispatch(e)},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}},toggleListHandle:function(){this.showList=!this.showList},hideList:function(){this.showList=!1},optionClickHandle:function(e){this.incomingChanges=!0,this.curOption=e,this.cm.setOption("mode",e.lang),this.cm.hasFocus()||this.cm.focus(),this.hideList(),this.changeNodeAttr(e),this.incomingChanges=!1},changeNodeAttr:function(e){var t=this.view.state.tr,n=this.getPos(),r=Object.assign({},this.node.attrs,{lang:e.attrLang});t=t.setNodeMarkup(n,null,r),this.dispatch(t)},outSideClick:function(e){this.$refs.lang&&!this.$refs.lang.contains(e.target)&&this.hideList()}}},os=n(56),as=Pa(is,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NodeView",{ref:"view",attrs:{getInfo:e.getInfo}},[n("div",{class:e.$style.main,attrs:{"data-type-codeblock":""},on:{click:function(e){e.stopPropagation()}}},[n("div",{class:e.$style.btns,attrs:{"data-btns":""}},[n("div",{ref:"lang",class:e.$style.lang,attrs:{"data-lang":""}},[n("div",{class:e.$style.selector,attrs:{"data-selector":""},on:{click:e.toggleListHandle}},[n("span",[e._v(e._s(e.curOption.name))])]),e._v(" "),e.showList?n("div",{class:e.$style.list,attrs:{"data-list":""}},e._l(e.options,(function(t){var r;return n("div",{key:t.lang,class:[e.$style.item,(r={},r[e.$style.on]=e.curOption.lang===t.lang,r)],attrs:{"data-item":""},on:{click:function(n){return e.optionClickHandle(t)}}},[n("span",[e._v(e._s(t.name))])])})),0):e._e()])]),e._v(" "),n("div",{ref:"codemiror",class:e.$style.codemirror,attrs:{"data-codemirror":""}})])])}),[],!1,(function(e){this.$style=os.default.locals||os.default}),null,null).exports;function ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cs=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new Aa.a({el:o,render:function(e){return e(as,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"setSelection",value:function(e,t){this.vueNode.$refs.main.viewSetSelection(e,t)}},{key:"update",value:function(e){return e.type===this.node.type&&(this.node=e,this.vueNode.$refs.main.viewUpdate(e),!0)}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"stopEvent",value:function(){return!0}}])&&ss(t.prototype,n),r&&ss(t,r),e}(),ls=Pa({components:{NodeView:Ba},props:["pnode","view","getPos","config"],data:function(){return{node:null,viewConfig:{canEdit:!1}}},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("hr")])}),[],!1,null,null,null).exports;function us(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fs=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.config=i,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new Aa.a({el:o,render:function(e){return e(ls,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return!1}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&us(t.prototype,n),r&&us(t,r),e}(),ds={components:{NodeView:Ba},props:["pnode","view","getPos","config"],data:function(){return{node:null,href:null,success:!1,placeholder:"图片加载中...",viewConfig:{canEdit:!0},src:null,title:null,attrs:[]}},created:function(){var e=this;if(this.node=this.pnode,this.src=this.node.attrs.src,"string"!=typeof this.src||0===this.src.length)return this.success=!1,void(this.placeholder="未发现图片链接，可尝试重新编辑");this.title=this.node.attrs.title||null,this.href=this.node.attrs.href||null;var t=[],n=this.node.attrs.style;n&&n[0]&&n.forEach((function(e){var n,r,i;e&&"string"==typeof e.key&&e.value&&t.push((n={},r="data-style-".concat(e.key),i=String(e.value),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n))})),this.attrs=t,this.load(),this.$nextTick((function(){e.node.attrs.fromPaste&&!e.node.attrs.pastePass&&e.config.editNode&&e.config.editNode(e.node.type.name,e.$refs.view.id,e.node.attrs,Ve)}))},methods:{load:function(){var e=this;this.placeholder="图片加载中...";var t=new Image;t.addEventListener("load",(function(){e.success=!0,e.$refs.view.setConfig({btns:[]})})),t.addEventListener("error",(function(){e.success=!1,e.node.attrs.fromPaste?e.node.attrs.pastePass&&(e.placeholder="图片加载出错，可重试"):e.placeholder="图片加载出错，可重试",e.$refs.view.setConfig({btns:[{name:"重试",onclick:function(){e.load()}}]})})),t.src=this.src},focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},hs=n(57),ps=Pa(ds,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NodeView",{ref:"view",attrs:{getInfo:e.getInfo,conf:e.viewConfig}},[e.href?[n("div",e._b({class:e.$style.main,attrs:{"data-type-img":"","data-type-link":""}},"div",e.attrs,!1),[e.success?n("img",{attrs:{src:e.src}}):n("div",{class:e.$style.placeholder,attrs:{"data-placeholder":""}},[e._v(e._s(e.placeholder))])])]:[n("div",e._b({class:e.$style.main,attrs:{"data-type-img":""}},"div",e.attrs,!1),[e.success?n("img",{attrs:{src:e.src}}):n("div",{class:e.$style.placeholder,attrs:{"data-placeholder":""}},[e._v(e._s(e.placeholder))])])],e._v(" "),e.title?n("div",{class:e.$style.title,attrs:{slot:"other","data-title":""},slot:"other"},[e._v(e._s(e.title))]):e._e()],2)}),[],!1,(function(e){this.$style=hs.default.locals||hs.default}),null,null).exports;function vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ms=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.config=i,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new Aa.a({el:o,render:function(e){return e(ps,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&vs(t.prototype,n),r&&vs(t,r),e}(),gs={components:{NodeView:Ba},props:["pnode","view","getPos","config"],data:function(){return{viewConfig:{canEdit:!0},videoHTML:""}},created:function(){this.node=this.pnode,this.videoHTML=this.node.attrs.videoHTML},mounted:function(){},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},refresh:function(){var e=this.$refs.main.offsetWidth,t=this.$refs.main.querySelector("iframe"),n=Math.floor(e/16*9),r=t.getAttribute("width"),i=t.getAttribute("height");if(/^\d+$/.test(r)&&/^\d+$/.test(i)){var o=Number(r),a=Number(i);n=Math.floor(e/o*a)}t.style.height=n+"px",t.style.width=e+"px"},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},ys=n(58),bs=Pa(gs,(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("div",{ref:"main",class:this.$style.main,attrs:{"data-type-video":""}},[t("div",{class:this.$style.content,domProps:{innerHTML:this._s(this.videoHTML)}})])])}),[],!1,(function(e){this.$style=ys.default.locals||ys.default}),null,null).exports;function ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ks=function(){function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("div");var a=document.createElement("div");this.dom.appendChild(a),this.videoNode=new Aa.a({el:a,render:function(e){return e(bs,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}}),setTimeout((function(){o.videoNode.$refs.main.refresh()}),100)}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return!1}},{key:"selectNode",value:function(){this.videoNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.videoNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&ws(t.prototype,n),r&&ws(t,r),e}(),xs=Pa({components:{NodeView:Ba},props:["pnode","view","getPos","config"],data:function(){return{viewConfig:{canEdit:!0}}},created:function(){if(this.config.nodeViews&&this.config.nodeViews[p.EMBED_COMPONENT]){var e=this.config.nodeViews[p.EMBED_COMPONENT].componentOptions;if(e&&this.pnode.attrs.type){var t=e[this.pnode.attrs.type]||{};Object.assign(this.viewConfig,t)}}},mounted:function(){this.postMessage({dom:this.$refs.main,type:"componentCreate",attrs:this.pnode.attrs})},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},postMessage:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("div",{ref:"main",attrs:{"data-type-embedcomp":""}})])}),[],!1,null,null,null).exports;function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Os=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new Aa.a({el:o,render:function(e){return e(xs,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return!1}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&Es(t.prototype,n),r&&Es(t,r),e}(),_s=(n(107),n(117),n(41)),Ss=n.n(_s),Ms=(n(118),n(84),n(128),n(130),n(132),n(135),n(136),n(145),n(59)),Ns=n.n(Ms),Cs=n(60),Ts=n.n(Cs),As=n(101),Ds=n.n(As),Is=n(102),Ls=(n(146),n(148),n(97),n(151),n(152),null),Rs=null;function Ps(){if(null===Ls){if("undefined"==typeof document)return Ls=0;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var n=t.getBoundingClientRect().right;e.removeChild(t),Ls=n}return Ls}Ss.a&&window.addEventListener("resize",(function(){Rs!==window.devicePixelRatio&&(Rs=window.devicePixelRatio,Ls=null)}));var Bs=function(e){return Array.prototype.reduce.call(e,(function(e,t){var n=t.name.match(/data-simplebar-(.+)/);if(n){var r=n[1].replace(/\W+(.)/g,(function(e,t){return t.toUpperCase()}));switch(t.value){case"true":e[r]=!0;break;case"false":e[r]=!1;break;case void 0:e[r]=!0;break;default:e[r]=t.value}}return e}),{})};function zs(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function $s(e){return e&&e.ownerDocument?e.ownerDocument:document}var js=function(){function e(t,n){var r=this;this.onScroll=function(){var e=zs(r.el);r.scrollXTicking||(e.requestAnimationFrame(r.scrollX),r.scrollXTicking=!0),r.scrollYTicking||(e.requestAnimationFrame(r.scrollY),r.scrollYTicking=!0)},this.scrollX=function(){r.axis.x.isOverflowing&&(r.showScrollbar("x"),r.positionScrollbar("x")),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&(r.showScrollbar("y"),r.positionScrollbar("y")),r.scrollYTicking=!1},this.onMouseEnter=function(){r.showScrollbar("x"),r.showScrollbar("y")},this.onMouseMove=function(e){r.mouseX=e.clientX,r.mouseY=e.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis("y")},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis("y"),r.mouseX=-1,r.mouseY=-1},this.onWindowResize=function(){r.scrollbarWidth=r.getScrollbarWidth(),r.hideNativeScrollbar()},this.hideScrollbars=function(){r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.track.rect)||(r.axis.y.scrollbar.el.classList.remove(r.classNames.visible),r.axis.y.isVisible=!1),r.isWithinBounds(r.axis.x.track.rect)||(r.axis.x.scrollbar.el.classList.remove(r.classNames.visible),r.axis.x.isVisible=!1)},this.onPointerEvent=function(e){var t,n;r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(t=r.isWithinBounds(r.axis.x.track.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(n=r.isWithinBounds(r.axis.y.track.rect)),(t||n)&&(e.preventDefault(),e.stopPropagation(),"mousedown"===e.type&&(t&&(r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.x.scrollbar.rect)?r.onDragStart(e,"x"):r.onTrackClick(e,"x")),n&&(r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.scrollbar.rect)?r.onDragStart(e,"y"):r.onTrackClick(e,"y"))))},this.drag=function(t){var n=r.axis[r.draggedAxis].track,i=n.rect[r.axis[r.draggedAxis].sizeAttr],o=r.axis[r.draggedAxis].scrollbar,a=r.contentWrapperEl[r.axis[r.draggedAxis].scrollSizeAttr],s=parseInt(r.elStyles[r.axis[r.draggedAxis].sizeAttr],10);t.preventDefault(),t.stopPropagation();var c=(("y"===r.draggedAxis?t.pageY:t.pageX)-n.rect[r.axis[r.draggedAxis].offsetAttr]-r.axis[r.draggedAxis].dragOffset)/(i-o.size)*(a-s);"x"===r.draggedAxis&&(c=r.isRtl&&e.getRtlHelpers().isRtlScrollbarInverted?c-(i+o.size):c,c=r.isRtl&&e.getRtlHelpers().isRtlScrollingInverted?-c:c),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=c},this.onEndDrag=function(e){var t=$s(r.el),n=zs(r.el);e.preventDefault(),e.stopPropagation(),r.el.classList.remove(r.classNames.dragging),t.removeEventListener("mousemove",r.drag,!0),t.removeEventListener("mouseup",r.onEndDrag,!0),r.removePreventClickId=n.setTimeout((function(){t.removeEventListener("click",r.preventClick,!0),t.removeEventListener("dblclick",r.preventClick,!0),r.removePreventClickId=null}))},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.minScrollbarWidth=20,this.options=Object.assign({},e.defaultOptions,{},n),this.classNames=Object.assign({},e.defaultOptions.classNames,{},this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,e.instances.has(this.el)||(this.recalculate=Ns()(this.recalculate.bind(this),64),this.onMouseMove=Ns()(this.onMouseMove.bind(this),64),this.hideScrollbars=Ts()(this.hideScrollbars.bind(this),this.options.timeout),this.onWindowResize=Ts()(this.onWindowResize.bind(this),64,{leading:!0}),e.getRtlHelpers=Ds()(e.getRtlHelpers),this.init())}e.getRtlHelpers=function(){var t=document.createElement("div");t.innerHTML='<div class="hs-dummy-scrollbar-size"><div style="height: 200%; width: 200%; margin: 10px 0;"></div></div>';var n=t.firstElementChild;document.body.appendChild(n);var r=n.firstElementChild;n.scrollLeft=0;var i=e.getOffset(n),o=e.getOffset(r);n.scrollLeft=999;var a=e.getOffset(r);return{isRtlScrollingInverted:i.left!==o.left&&o.left-a.left!=0,isRtlScrollbarInverted:i.left!==o.left}},e.getOffset=function(e){var t=e.getBoundingClientRect(),n=$s(e),r=zs(e);return{top:t.top+(r.pageYOffset||n.documentElement.scrollTop),left:t.left+(r.pageXOffset||n.documentElement.scrollLeft)}};var t=e.prototype;return t.init=function(){e.instances.set(this.el,this),Ss.a&&(this.initDOM(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},t.initDOM=function(){var e=this;if(Array.prototype.filter.call(this.el.children,(function(t){return t.classList.contains(e.classNames.wrapper)})).length)this.wrapperEl=this.el.querySelector("."+this.classNames.wrapper),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector("."+this.classNames.contentWrapper),this.contentEl=this.options.contentNode||this.el.querySelector("."+this.classNames.contentEl),this.offsetEl=this.el.querySelector("."+this.classNames.offset),this.maskEl=this.el.querySelector("."+this.classNames.mask),this.placeholderEl=this.findChild(this.wrapperEl,"."+this.classNames.placeholder),this.heightAutoObserverWrapperEl=this.el.querySelector("."+this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl=this.el.querySelector("."+this.classNames.heightAutoObserverEl),this.axis.x.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.horizontal),this.axis.y.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.vertical);else{for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),this.wrapperEl.classList.add(this.classNames.wrapper),this.contentWrapperEl.classList.add(this.classNames.contentWrapper),this.offsetEl.classList.add(this.classNames.offset),this.maskEl.classList.add(this.classNames.mask),this.contentEl.classList.add(this.classNames.contentEl),this.placeholderEl.classList.add(this.classNames.placeholder),this.heightAutoObserverWrapperEl.classList.add(this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl.classList.add(this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl)}if(!this.axis.x.track.el||!this.axis.y.track.el){var t=document.createElement("div"),n=document.createElement("div");t.classList.add(this.classNames.track),n.classList.add(this.classNames.scrollbar),t.appendChild(n),this.axis.x.track.el=t.cloneNode(!0),this.axis.x.track.el.classList.add(this.classNames.horizontal),this.axis.y.track.el=t.cloneNode(!0),this.axis.y.track.el.classList.add(this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}this.axis.x.scrollbar.el=this.axis.x.track.el.querySelector("."+this.classNames.scrollbar),this.axis.y.scrollbar.el=this.axis.y.track.el.querySelector("."+this.classNames.scrollbar),this.options.autoHide||(this.axis.x.scrollbar.el.classList.add(this.classNames.visible),this.axis.y.scrollbar.el.classList.add(this.classNames.visible)),this.el.setAttribute("data-simplebar","init")},t.initListeners=function(){var e=this,t=zs(this.el);this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach((function(t){e.el.addEventListener(t,e.onPointerEvent,!0)})),["touchstart","touchend","touchmove"].forEach((function(t){e.el.addEventListener(t,e.onPointerEvent,{capture:!0,passive:!0})})),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.addEventListener("scroll",this.onScroll),t.addEventListener("resize",this.onWindowResize);var n=!1,r=t.ResizeObserver||Is.a;this.resizeObserver=new r((function(){n&&e.recalculate()})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),t.requestAnimationFrame((function(){n=!0})),this.mutationObserver=new t.MutationObserver(this.recalculate),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})},t.recalculate=function(){var e=zs(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var t=this.contentEl.offsetWidth,n=this.heightAutoObserverEl.offsetHeight<=1,r=this.heightAutoObserverEl.offsetWidth<=1||t>0,i=this.contentWrapperEl.offsetWidth,o=this.elStyles.overflowX,a=this.elStyles.overflowY;this.contentEl.style.padding=this.elStyles.paddingTop+" "+this.elStyles.paddingRight+" "+this.elStyles.paddingBottom+" "+this.elStyles.paddingLeft,this.wrapperEl.style.margin="-"+this.elStyles.paddingTop+" -"+this.elStyles.paddingRight+" -"+this.elStyles.paddingBottom+" -"+this.elStyles.paddingLeft;var s=this.contentEl.scrollHeight,c=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=n?"auto":"100%",this.placeholderEl.style.width=r?(t||c)+"px":"auto",this.placeholderEl.style.height=s+"px";var l=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==t&&c>t,this.axis.y.isOverflowing=s>l,this.axis.x.isOverflowing="hidden"!==o&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==a&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var u=this.axis.x.isOverflowing?this.scrollbarWidth:0,f=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&c>i-f,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&s>l-u,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el.style.width=this.axis.x.scrollbar.size+"px",this.axis.y.scrollbar.el.style.height=this.axis.y.scrollbar.size+"px",this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")},t.getScrollbarSize=function(e){if(void 0===e&&(e="y"),!this.axis[e].isOverflowing)return 0;var t,n=this.contentEl[this.axis[e].scrollSizeAttr],r=this.axis[e].track.el[this.axis[e].offsetSizeAttr],i=r/n;return t=Math.max(~~(i*r),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(t=Math.min(t,this.options.scrollbarMaxSize)),t},t.positionScrollbar=function(t){if(void 0===t&&(t="y"),this.axis[t].isOverflowing){var n=this.contentWrapperEl[this.axis[t].scrollSizeAttr],r=this.axis[t].track.el[this.axis[t].offsetSizeAttr],i=parseInt(this.elStyles[this.axis[t].sizeAttr],10),o=this.axis[t].scrollbar,a=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],s=(a="x"===t&&this.isRtl&&e.getRtlHelpers().isRtlScrollingInverted?-a:a)/(n-i),c=~~((r-o.size)*s);c="x"===t&&this.isRtl&&e.getRtlHelpers().isRtlScrollbarInverted?c+(r-o.size):c,o.el.style.transform="x"===t?"translate3d("+c+"px, 0, 0)":"translate3d(0, "+c+"px, 0)"}},t.toggleTrackVisibility=function(e){void 0===e&&(e="y");var t=this.axis[e].track.el,n=this.axis[e].scrollbar.el;this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll"):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden"),this.axis[e].isOverflowing?n.style.display="block":n.style.display="none"},t.hideNativeScrollbar=function(){this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+this.scrollbarWidth+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+this.scrollbarWidth+"px":0},t.onMouseMoveForAxis=function(e){void 0===e&&(e="y"),this.axis[e].track.rect=this.axis[e].track.el.getBoundingClientRect(),this.axis[e].scrollbar.rect=this.axis[e].scrollbar.el.getBoundingClientRect(),this.isWithinBounds(this.axis[e].scrollbar.rect)?this.axis[e].scrollbar.el.classList.add(this.classNames.hover):this.axis[e].scrollbar.el.classList.remove(this.classNames.hover),this.isWithinBounds(this.axis[e].track.rect)?(this.showScrollbar(e),this.axis[e].track.el.classList.add(this.classNames.hover)):this.axis[e].track.el.classList.remove(this.classNames.hover)},t.onMouseLeaveForAxis=function(e){void 0===e&&(e="y"),this.axis[e].track.el.classList.remove(this.classNames.hover),this.axis[e].scrollbar.el.classList.remove(this.classNames.hover)},t.showScrollbar=function(e){void 0===e&&(e="y");var t=this.axis[e].scrollbar.el;this.axis[e].isVisible||(t.classList.add(this.classNames.visible),this.axis[e].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},t.onDragStart=function(e,t){void 0===t&&(t="y");var n=$s(this.el),r=zs(this.el),i=this.axis[t].scrollbar,o="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=o-i.rect[this.axis[t].offsetAttr],this.draggedAxis=t,this.el.classList.add(this.classNames.dragging),n.addEventListener("mousemove",this.drag,!0),n.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(n.addEventListener("click",this.preventClick,!0),n.addEventListener("dblclick",this.preventClick,!0)):(r.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.onTrackClick=function(e,t){var n=this;if(void 0===t&&(t="y"),this.options.clickOnTrack){var r=zs(this.el);this.axis[t].scrollbar.rect=this.axis[t].scrollbar.el.getBoundingClientRect();var i=this.axis[t].scrollbar.rect[this.axis[t].offsetAttr],o=parseInt(this.elStyles[this.axis[t].sizeAttr],10),a=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],s=("y"===t?this.mouseY-i:this.mouseX-i)<0?-1:1,c=-1===s?a-o:a+o;!function e(){var i,o;-1===s?a>c&&(a-=40,n.contentWrapperEl.scrollTo(((i={})[n.axis[t].offsetAttr]=a,i)),r.requestAnimationFrame(e)):a<c&&(a+=40,n.contentWrapperEl.scrollTo(((o={})[n.axis[t].offsetAttr]=a,o)),r.requestAnimationFrame(e))}()}},t.getContentElement=function(){return this.contentEl},t.getScrollElement=function(){return this.contentWrapperEl},t.getScrollbarWidth=function(){try{return"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:Ps()}catch(e){return Ps()}},t.removeListeners=function(){var e=this,t=zs(this.el);this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach((function(t){e.el.removeEventListener(t,e.onPointerEvent,!0)})),["touchstart","touchend","touchmove"].forEach((function(t){e.el.removeEventListener(t,e.onPointerEvent,{capture:!0,passive:!0})})),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onWindowResize),this.mutationObserver.disconnect(),this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},t.unMount=function(){this.removeListeners(),e.instances.delete(this.el)},t.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},t.findChild=function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,(function(e){return n.call(e,t)}))[0]},e}();js.defaultOptions={autoHide:!0,forceVisible:!1,clickOnTrack:!0,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},js.instances=new WeakMap,js.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll('[data-simplebar]:not([data-simplebar="init"])'),(function(e){js.instances.has(e)||new js(e,Bs(e.attributes))}))},js.removeObserver=function(){this.globalObserver.disconnect()},js.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(js.handleMutations),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},js.handleMutations=function(e){e.forEach((function(e){Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?!js.instances.has(e)&&new js(e,Bs(e.attributes)):Array.prototype.forEach.call(e.querySelectorAll('[data-simplebar]:not([data-simplebar="init"])'),(function(e){!js.instances.has(e)&&new js(e,Bs(e.attributes))})))})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&(e.hasAttribute('[data-simplebar="init"]')?js.instances.has(e)&&js.instances.get(e).unMount():Array.prototype.forEach.call(e.querySelectorAll('[data-simplebar="init"]'),(function(e){js.instances.has(e)&&js.instances.get(e).unMount()})))}))}))},js.getOptions=Bs,Ss.a&&js.initHtmlApi();var Hs=js,Fs=Pa({data:function(){return{events:{}}},mounted:function(){var e=this;this.SimpleBar=new Hs(this.$refs.element,{forceVisible:"y",autoHide:!1}),this.trigger("inited",this.SimpleBar);var t=this.$refs.scrollElement,n=this.$refs.contentElement;t.addEventListener("scroll",(function(r){t.scrollTop===n.offsetHeight-t.offsetHeight&&e.trigger("reach-end",{event:r}),e.trigger("scroll",{event:r})}))},methods:{type:function(e){return["inited","scroll","reach-end"].indexOf(e)>-1},getScrollElement:function(){return this.$refs.scrollElement},on:function(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))},trigger:function(e,t){if(this.events[e]&&this.events[e].length)for(var n=0;n<this.events[e].length;n++)this.events[e][n](t)},recalculate:function(){this.SimpleBar.recalculate()}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"element"},[n("div",{staticClass:"simplebar-wrapper"},[e._m(0),e._v(" "),n("div",{staticClass:"simplebar-mask"},[n("div",{staticClass:"simplebar-offset"},[n("div",{ref:"scrollElement",staticClass:"simplebar-content-wrapper"},[n("div",{ref:"contentElement",staticClass:"simplebar-content"},[e._t("default")],2)])])]),e._v(" "),n("div",{staticClass:"simplebar-placeholder"})]),e._v(" "),e._m(1),e._v(" "),e._m(2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simplebar-height-auto-observer-wrapper"},[t("div",{staticClass:"simplebar-height-auto-observer"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simplebar-track simplebar-horizontal"},[t("div",{staticClass:"simplebar-scrollbar"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simplebar-track simplebar-vertical"},[t("div",{staticClass:"simplebar-scrollbar"})])}],!1,null,null,null).exports,Us=n(11),Ks=n.n(Us),Vs={components:{NodeView:Ba,Simplebar:Fs},props:["pnode","view","getPos","config"],data:function(){return{mathString:"",katexHTML:"",viewConfig:{canEdit:!0,center:!0}}},created:function(){this.node=this.pnode;var e=this.node.attrs.mathString;"string"==typeof e&&0!==e.length||(e="katex\\_no\\_found"),this.mathString=e},mounted:function(){var e=Ks.a.renderToString(this.mathString,{throwOnError:!1,displayMode:!0});e=e.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,""),this.katexHTML=e},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},Ws=n(61),Gs=Pa(Vs,(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("div",{class:this.$style.main,attrs:{"data-type-katexblock":""}},[t("Simplebar",{ref:"simplebar",class:this.$style.contentWrapScroller},[t("div",{class:this.$style.content,domProps:{innerHTML:this._s(this.katexHTML)}})])],1)])}),[],!1,(function(e){this.$style=Ws.default.locals||Ws.default}),null,null).exports;function qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Js=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new Aa.a({el:o,render:function(e){return e(Gs,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&qs(t.prototype,n),r&&qs(t,r),e}(),Xs={props:["getInfo","conf"],data:function(){return{status:"blur",config:{canEdit:!1},id:""}},computed:{focusClass:function(){return"focus"===this.status?this.$style.on:""}},created:function(){this.config=Object.assign({},this.config,this.conf||{})},mounted:function(){var e=this.getInfo();this.id=e.node.type.name+e.nodePos+String((new Date).getTime()).slice(-4)},methods:{focus:function(){this.status="focus"},blur:function(){this.status="blur"},edit:function(){var e=this.getInfo();e.config.editNode&&e.config.editNode(e.node.type.name,this.id,e.node.attrs,Ke)},remove:function(){var e=this.getInfo(),t=ne(e.view),n=e.view.state,r=e.nodePos,i=e.node;t(Hn(0,n.tr,r,r+i.nodeSize))}}},Zs=n(62),Qs={components:{InlineNodeView:Pa(Xs,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:[e.$style.main,e.focusClass],attrs:{"data-id":e.id,"data-inline-view":""},on:{mousedown:function(e){e.preventDefault()}}},[n("span",{class:e.$style.btns,attrs:{"data-view-btns":""}},[e.config.canEdit?n("span",{class:[e.$style.btn],attrs:{"data-view-btn":""},on:{click:function(t){return e.edit()}}},[e._v("编辑")]):e._e(),e._v(" "),n("span",{class:[e.$style.btn],attrs:{"data-view-btn":""},on:{click:function(t){return e.remove()}}},[e._v("删除")])]),e._t("default")],2)}),[],!1,(function(e){this.$style=Zs.default.locals||Zs.default}),null,null).exports},props:["pnode","view","getPos","config"],data:function(){return{viewConfig:{canEdit:!0},katexHTML:""}},created:function(){this.node=this.pnode;var e=this.node.attrs.mathString;"string"==typeof e&&0!==e.length||(e="katex\\_no\\_found"),this.mathString=e},mounted:function(){var e=Ks.a.renderToString(this.mathString,{throwOnError:!1,displayMode:!1});e=e.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,""),this.katexHTML=e},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},Ys=n(63),ec=Pa(Qs,(function(){var e=this.$createElement,t=this._self._c||e;return t("InlineNodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("span",{class:this.$style.main,attrs:{"data-type-katexinline":""},domProps:{innerHTML:this._s(this.katexHTML)}})])}),[],!1,(function(e){this.$style=Ys.default.locals||Ys.default}),null,null).exports;function tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nc=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("span");var o=document.createElement("span");this.dom.appendChild(o),this.vueNode=new Aa.a({el:o,render:function(e){return e(ec,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return!1}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&tc(t.prototype,n),r&&tc(t,r),e}();function rc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ic=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("span"),this.dom.innerText="‍",this.dom.setAttribute("data-type","zerowidth")}var t,n,r;return t=e,(n=[{key:"stopEvent",value:function(){return!0}}])&&rc(t.prototype,n),r&&rc(t,r),e}(),oc={components:{NodeView:Ba,Simplebar:Fs},props:["pnode","view","getPos","config"],data:function(){return{mathString:"",katexHTML:"",viewConfig:{canEdit:!0,center:!0}}},created:function(){this.node=this.pnode;var e=this.node.attrs.mathString;"string"==typeof e&&0!==e.length||(e="katex\\_no\\_found"),this.mathString=e},mounted:function(){var e=Ks.a.renderToString(this.mathString,{throwOnError:!1,displayMode:!0});e=e.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,""),this.katexHTML=e},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},ac=n(64),sc=Pa(oc,(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("Simplebar",{ref:"simplebar",class:this.$style.contentWrapScroller},[t("table",{class:this.$style.main,attrs:{"data-type-katexblock":""}},[t("colgroup"),this._v(" "),t("tbody")])])],1)}),[],!1,(function(e){this.$style=ac.default.locals||ac.default}),null,null).exports;function cc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var lc=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div");var r=document.createElement("div");this.dom.appendChild(r),this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),uc(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody")),this.vueNode=new Aa.a({el:r,render:function(e){return e(sc,{ref:"main",props:{pnode:t,view:view,getPos:getPos,config:config}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return e.type===this.node.type&&(this.node=e,uc(e,this.colgroup,this.table,this.cellMinWidth),!0)}},{key:"ignoreMutation",value:function(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}}])&&cc(t.prototype,n),r&&cc(t,r),e}();function uc(e,t,n,r,i,o){for(var a=0,s=!0,c=t.firstChild,l=e.firstChild,u=0,f=0;u<l.childCount;u++)for(var d=l.child(u).attrs,h=d.colspan,p=d.colwidth,v=0;v<h;v++,f++){var m=i==f?o:p&&p[v],g=m?m+"px":"";a+=m||r,m||(s=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=g}for(;c;){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}s?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}function fc(e){return function(e){if(Array.isArray(e))return dc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return dc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hc=/^(#{1,5})\s/,pc=/^&gt;\s/,vc=/^[-+*•]\s/,mc=/^(\d{1,3})\.\s/,gc=/^\s*[\-\*\_]{3}\s*$/,yc=/!\[([^\[\]]*)\]\(([^\(\)]+)\)/,bc=/\[([^\[\]]+)\]\(([^\(\)]+)\)/g,wc=/"[^\"]+"/,kc=function(e){return document.createElement(e)};function xc(e,t,n){n&&(kc=n);for(var r=kc("div"),i=(t=t.trim()).split(/(?:\r\n?|\n)/),o=i.length,a=0;a<o;){var s=i[a];if(/^```\s*[a-z\+\-\#]{0,20}\s*$/i.test(s)){for(var c=s.match(/^```\s*([a-z\+\-\#]{0,20})\s*$/)[1],l="",u=!1,f=a,d=a+1;d<o;d++){if(/^```\s*$/i.test(i[d])){var h=kc("pre");h.textContent=l.replace(/\n$/,""),h.setAttribute("lang",c),r.appendChild(h),a=d+1,u=!0;break}l+=i[d]+"\n"}if(u)continue;a=f}r.appendChild(kc("p")).textContent=s,a++}var v=[];return function(e){return Array.prototype.slice.call(e.childNodes)}(r).forEach((function(e){if("p"===e.nodeName.toLowerCase()){var t=function e(t){var n=t.innerHTML;if(yc.test(n)){var r=0,i=[];if(n.replace(yc,(function(t,o,a,s){if(r<s){var c=kc("p"),l=n.substring(r,s);0===r?(c.innerHTML=l,i=i.concat(e(c))):(c.innerHTML=Ec(l),i.push(c))}r=s+t.length;var u=kc("img"),f=a.split(/\s+/);if(o){var d=o.substring(0,100);u.setAttribute("alt",d)}if(f[0]){var h=f[0].substring(0,300);u.src=h}var p=a.replace(f[0],"");if(wc.test(p)){var v=p.match(wc)[0].replace(/"/g,"").substring(0,100);u.setAttribute("title",v)}i.push(u)})),r<n.length){var o=kc("p"),a=n.substring(r,n.length);o.innerHTML=Ec(a),i.push(o)}return i}if(hc.test(n)){var s=n.match(hc)[1].length,c=kc("h".concat(s));return c.innerHTML=Ec(n.replace(hc,""),p.HEADING),[c]}if(pc.test(n)){var l=kc("p"),u=kc("blockquote");return l.innerHTML=Ec(n.replace(pc,"")),u.appendChild(l),[u]}if(vc.test(n)){var f=kc("p"),d=kc("li"),h=kc("ul");return f.innerHTML=Ec(n.replace(vc,"")),d.appendChild(f),h.appendChild(d),[h]}if(mc.test(n)){var v=n.match(mc)[1],m=kc("p"),g=kc("li"),y=kc("ol");return y.setAttribute("start",v),m.innerHTML=Ec(n.replace(mc,"")),g.appendChild(m),y.appendChild(g),[y]}return gc.test(n)?[kc("hr")]:(t.innerHTML=Ec(n),[t])}(e);v=v.concat(t)}else v.push(e)})),r.innerHTML="",r.append.apply(r,fc(v)),J.a.fromSchema(e).parseSlice(r,{preserveWhitespace:!0})}function Ec(e,t){bc.test(e)&&(e=e.replace(bc,(function(e,t,n){var r=kc("a"),i=n.split(/\s+/);if(r.innerHTML=t,i[0]){var o=i[0].substring(0,300);r.setAttribute("href",o)}var a="",s=n.replace(i[0],"");return wc.test(s)&&(a=s.match(wc)[0].replace(/"/g,"").substring(0,100)),r.setAttribute("title",a),r.outerHTML})));var n=[];return t!==p.HEADING&&(e=(e=(e=e.replace(/\`([^\`\<\>]+)\`/g,(function(e,t,r){var i="<code>".concat(t,"</code>");return n.push({start:r,end:r+i.length}),i}))).replace(/\*\*([^\*\<\>]+)\*\*/g,Oc("b",n))).replace(/\_\_([^\_\<\>]+)\_\_/g,Oc("b",n))),(e=(e=e.replace(/\*([^\*\<\>]+)\*/g,Oc("i",n))).replace(/\_([^\_\<\>]+)\_/g,Oc("i",n))).replace(/\~\~([^\~\<\>]+)\~\~/g,Oc("s",n))}function Oc(e,t){return function(n,r,i){if(function(e,t){var n=!1;return e.forEach((function(e){e.start<t&&e.end>t&&(n=!0)})),n}(t,i))return n;var o="<".concat(e,">").concat(r,"</").concat(e,">");return t.push({start:i,end:i+o.length}),o}}function _c(e){var t=e.selection;if(t.empty){var n=t.$from.depth,r=t.$from.parent;if(r.type.name===p.PARAGRAPH&&/^\s{0,3}$/.test(r.textContent)&&1===n)return!0}return!1}function Sc(e){return function(e){if(Array.isArray(e))return Mc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cc(e,t,n,r){var i,o=!1,a=new _a(e,{state:t,dispatchTransaction:n,nodeViews:(i={},Nc(i,p.HORIZONTAL_RULE,(function(e,t,n){return new fs(e,t,n,r)})),Nc(i,p.VIDEO,(function(e,t,n){return new ks(e,t,n,r)})),Nc(i,p.EMBED_COMPONENT,(function(e,t,n){return new Os(e,t,n,r)})),Nc(i,p.IMAGE,(function(e,t,n){return new ms(e,t,n,r)})),Nc(i,p.CODE_BLOCK,(function(e,t,n){return new cs(e,t,n,r)})),Nc(i,p.KATEX_BLOCK,(function(e,t,n){return new Js(e,t,n,r)})),Nc(i,p.KATEX_INLINE,(function(e,t,n){return new nc(e,t,n,r)})),Nc(i,p.ZERO_WIDTH,(function(e,t,n){return new ic(e,t,n,r)})),Nc(i,p.TABLE,(function(e,t,n){return new lc(e,t,n,r)})),i),handlePaste:function(e,t,n){var r=_c(e.state),i=t.clipboardData.files,o=t.clipboardData.types;return i.length>0&&!/html/i.test(o.join(","))?(He(e,i),!0):r?(function(e,t){var n=e.state,r=n.tr;te(e,r=X(n,r,t))}(e,n),!0):void 0},transformPastedHTML:function(e){/(<p|<div|<section|<pre)/i.test(e)||(e="<p>"+e+"</p>");var t=Dc(e=h(e));"span"===t.firstChild.nodeName.toLowerCase()&&t.firstChild.getAttribute("data-shimo-docs")&&(t.innerHTML=t.firstChild.innerHTML);for(var n=document.createElement("body"),r=t.childNodes.length,i=0;i<r;i++){var o=Lc(t.childNodes[i].cloneNode(!0));n.append.apply(n,Sc(o)),Ic(t.childNodes[i])&&i!==r-1&&n.appendChild(document.createElement("p"))}var a=n.innerHTML,s=(t=Dc(a=function e(t){var n=document.createElement("body");n.innerHTML=t;var r=n.querySelectorAll("img");if(!r.length)return t;for(var i,o=[],a=0;!o.length&&(i=r[a]);)o=Rc(i),a++;if(!o.length)return t;var s=o[o.length-1].outerHTML,c=function(e,t){for(var n="",r="",i=e.length,o=0;o<i;o++)n+="</",n+=e[o].nodeName.toLowerCase(),n+=">";for(var a=i-1;a>=0;a--)r+=e[a].outerHTML.match(/<[^>]+>/)[0];return n+t+r}(o,i.outerHTML),l=s.replace(i.outerHTML,c);return e(t.replace(s,l))}(a))).querySelectorAll("pre");if(s&&s[0]&&"pm_code_preview"===s[0].getAttribute("data-origin"))for(var c=0;c<s.length;c++){for(var l=[],u=s[c],f=0;f<u.children.length;f++){var d=u.children[f].innerText.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");l.push(d)}a=a.replace(u.outerHTML,'<pre lang="'.concat(u.getAttribute("lang"),'">').concat(l.join("\n"),"</pre>"))}t=Dc(a);for(var p=0;p<t.children.length;p++){var v=[],m=t.children[p],g=m.getAttribute("style");if(g&&g.indexOf("white-space: pre;")>-1){for(var y=0;y<m.children.length;y++){var b=m.children[y].innerText.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");v.push(b)}a=a.replace(m.outerHTML,"<pre>".concat(v.join("\n"),"</pre>"))}}return a},transformPastedText:function(e){return o=!1,e},clipboardTextParser:function(e){return!!_c(a.state)&&(o=!0,xc(a.state.schema,e))},transformPasted:function(e){var t=_c(a.state),n=J.c.empty,r=!1;if(t&&!o?e.content.forEach((function(e){e.type.name!==p.PARAGRAPH?r=!0:e.descendants((function(e){r||([p.LINK,p.CODE_INLINE].indexOf(e.type.name)>-1&&(r=!0),e.isText&&e.marks&&e.marks[0]&&(r=!0))}))})):r=!0,e.content.forEach((function(t,r,i){if(t.type.name===p.IMAGE&&(t.attrs.fromPaste=!0),t.type.name===p.PARAGRAPH&&"br"===t.attrs.origin){var o=i-1,a=null;if(o>=0&&(a=e.content.child(o)),a&&"br"!==a.attrs.origin)return}n=n.append(J.c.from(t))})),!r){var i="";n.forEach((function(e){i+=e.textContent+"\n"}));var s=xc(a.state.schema,i);(n=s.content).forEach((function(e){e.type.name===p.IMAGE&&(e.attrs.fromPaste=!0)}))}if(t)return new J.i(n,0,0);if(e.openStart>1&&e.openEnd===e.openStart&&1===n.childCount&&1===n.firstChild.childCount&&n.firstChild.firstChild.isInline){var c=e.openStart-1;return new J.i(n,c,c)}return new J.i(n,e.openStart,e.openEnd)}});return a}var Tc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ac=null;function Dc(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n=(Ac||(Ac=document.implementation.createHTMLDocument("title"))).createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=r,o=0;i&&Tc[r[1].toLowerCase()]&&(e=i.map((function(e){return"<"+e+">"})).join("")+e+i.map((function(e){return"</"+e+">"})).reverse().join(""),o=i.length),n.innerHTML=e;for(var a=0;a<o;a++)n=n.firstChild;return n}function Ic(e){if(!e||!e.style||!e.style.marginBottom)return!1;var t=e.style.marginBottom;if(/\d+/.test(t)){if(/px/.test(t)&&(t=Number(t.match(/\d+/)[0]))>15)return!0;if(/em/.test(t)&&(t=Number(t.match(/[\.\d]+/)[0]))>.7)return!0}return!1}function Lc(e){var t=e&&e.outerHTML;if(!t||!/<br[^>]*>/i.test(t))return[e];var n=!1;if(e.childNodes&&e.childNodes[0]&&((n=Array.prototype.some.call(e.childNodes,(function(e){return"br"===e.nodeName.toLowerCase()})))&&"br"===e.lastChild.nodeName.toLowerCase()&&e.childNodes.length>1&&(e.removeChild(e.lastChild),t=e.outerHTML),n&&1===e.childNodes.length))return[document.createElement("p")];if(n){var r=e.nodeName.toLowerCase();t=t.replace(/<br[^>]*>/gi,"</".concat(r,"><").concat(r,">"));var i=document.createElement("div");return i.innerHTML=t,Array.prototype.slice.call(i.childNodes)}if(e.childNodes&&e.childNodes[0]){var o=[];return e.childNodes.forEach((function(e){o=o.concat(Lc(e))})),o}return[e]}function Rc(e){for(var t=[];e;){var n=e.parentNode;if(!(n&&["body","html","#document"].indexOf(n.nodeName.toLowerCase())<0))break;t.push(n),e=n}return t}var Pc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Bc=null;function zc(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(Bc||(Bc=document.implementation.createHTMLDocument("title"))).createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&Pc[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length),r.innerHTML=e;for(var a=0;a<o;a++)r=r.firstChild;return r}function $c(e){return 55296<=e&&e<=56319}function jc(e){return 56320<=e&&e<=57343}function Hc(e){if("string"!=typeof e)return 0;var t=0,n=/[\u0000-\u007E]/g,r=/[\uFF00-\uFFFF\u4E00-\u9FA5\u3000-\u3012]/g,i=e.match(n)||[],o=e.match(r)||[];return function(e,t){for(var n,r,i=e.length,o=[],a=0;a<i;){if($c(n=e.charCodeAt(a++))){if(a===i){t("invalid",n);continue}if(!jc(r=e.charCodeAt(a++))){a-=1;continue}n=r-56320+(n-55296<<10)+65536}var s=[];n<128?s.push(n):n<2048?(s.push(192|n>>6),s.push(128|63&n)):n<65536?(s.push(224|n>>12),s.push(128|n>>6&63),s.push(128|63&n)):(s.push(240|n>>18),s.push(128|n>>12&63),s.push(128|n>>6&63),s.push(128|63&n)),o=o.concat(s),t("valid",s)}}(e=(e=e.replace(n,"")).replace(r,""),(function(e,n){"valid"===e&&n&&n.length>1?t+=1:t+=.5})),Math.ceil(t+i.length/2+o.length)}function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){Kc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wc=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mounted=r||function(){},this.menuStatusUpdateHandles=[],this.dom=t,this.$node=n,this.editor=null,this.config={collab:null,disabledDragging:!1,editNode:function(){},nodeViews:{},postMessage:function(){},update:function(){}}}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t=this;this.config=Object.assign(this.config,e),e=Object.assign({},this.config),this.config.collab?this.editor=new yr(Uc(Uc({},this.config.collab),{},{dom:this.dom,update:this._update.bind(this)}),(function(t,n,r){return Cc(t,n,r,e)}),(function(){t.mounted()})):this.editor=new xr({doc:this.config.doc,dom:this.dom,update:this._update.bind(this)},(function(t,n,r){return Cc(t,n,r,e)}),(function(){t.mounted()}))}},{key:"setDoc",value:function(e){this.config.collab||this.editor.setDoc(e)}},{key:"getDoc",value:function(){return this.editor.view.state.doc.toJSON()}},{key:"getCollabDoc",value:function(){if(this.config.collab)return this.editor.getDoc()}},{key:"hasUnconfirmedSteps",value:function(){if(this.config.collab)return this.editor.hasUnconfirmedSteps()}},{key:"addCollabAllSavedHandle",value:function(e){this.config.collab&&"function"==typeof e&&(this.hasUnconfirmedSteps()?this.editor.addAllSavedHandle(e):e())}},{key:"hasContent",value:function(){var e=this.getTextString();if((e=e.replace(/[\s\u3000]/g,"")).length>0)return!0;var t=!1;return this.editor.view.state.doc.descendants((function(e){[p.IMAGE,p.VIDEO].indexOf(e.type.name)>-1&&(t=!0)})),t}},{key:"getTextContentLength",value:function(){return Hc(this.getTextString())}},{key:"getTextString",value:function(){var e="";return this.editor.view.state.doc.descendants((function(t){t.type.name===p.TEXT&&(e+=t.text),t.type.name!==p.KATEX_BLOCK&&t.type.name!==p.KATEX_INLINE||(e+=t.attrs.mathString)})),e}},{key:"getAllImages",value:function(){var e=this,t=[];return this.editor.view.state.doc.forEach((function(n,r){if(n.type.name===p.IMAGE){var i=e.editor.view.domAtPos(r);if(i&&i.node){var o=i.node.children[i.offset];o=o.querySelector("[data-block-view]"),t.push({pos:o.getAttribute("data-id"),attrs:n.attrs})}}})),t}},{key:"getTextContent",value:function(){var e=[];return this.editor.view.state.doc.descendants((function(t){t.type.name!==p.HEADING&&t.type.name!==p.PARAGRAPH||e.push({type:t.type.name,text:t.textContent||""})})),e}},{key:"insertNode",value:function(e){var t=this.editor.view.state;if(t.schema.nodes[e.type].isBlock){var n=q(t,t.tr,e.type,e.attrs);te(this.editor.view,n)}if(t.schema.nodes[e.type].isInline){var r=ee(t,t.tr,e.type,e.attrs);te(this.editor.view,r)}}},{key:"insertBlocks",value:function(e){var t=this.editor.view.state;if(e&&e[0]){var n=[];e.forEach((function(e){var r=t.schema.nodes[e.type];r&&r.isBlock&&n.push(t.schema.nodes[e.type].create(e.attrs))}));var r=new J.i(J.c.fromArray(n),0,0),i=X(t,t.tr,r,t.tr.curSelection.to);te(this.editor.view,i)}}},{key:"updateNode",value:function(e){var t=document.querySelector("[data-id=".concat(e.pos,"]"));if(t){var n=this.editor.view.posAtDOM(t,0);n&&(e.type===p.LINK&&(n-=1),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.state,o=i.selection,a=i.tr;a=a.setNodeMarkup(t,null,r),o.node&&o.from===t&&o.node.isInline&&(a=a.setSelection(Q.c.create(a.doc,t))),te(e,a)}(this.editor.view,n,e.type,e.attrs))}}},{key:"deleteNode",value:function(e){var t=document.querySelector("[data-id=".concat(e.pos,"]"));if(t){var n=this.editor.view.posAtDOM(t,0);n&&(e.type===p.LINK&&(n-=1),function(e,t){var n=e.state,r=n.tr;te(e,r=Le(n,r,t))}(this.editor.view,n))}}},{key:"focus",value:function(){this.editor.view.focus()}},{key:"focusHead",value:function(){!function(e){var t,n=e.state,r=n.tr,i=n.doc.nodeSize-2;i>10&&(i=10),n.doc.nodesBetween(0,i,(function(e,n){!e.isTextblock||e.textContent||t||(t=n+1),e.isText&&!t&&(t=n)})),te(e,r=r.setSelection(Q.g.create(n.doc,t))),e.focus()}(this.editor.view)}},{key:"focusFoot",value:function(){!function(e){var t,n=e.state,r=n.tr,i=n.doc.nodeSize;n.doc.nodesBetween(i-10,i-2,(function(e,n){e.isText&&(t=n+e.text.length),e.isTextblock&&!e.textContent&&(t=n+1)})),te(e,r=r.setSelection(Q.g.create(n.doc,t))),e.focus()}(this.editor.view)}},{key:"getSchemaTypes",value:function(){return p}},{key:"getErrorStatus",value:function(){return Fe}},{key:"getNormalStatus",value:function(){return Ue}},{key:"getHeadingList",value:function(){var e=[];return this.editor.view.state.doc.descendants((function(t,n){t.type.name===p.HEADING&&e.push({pos:n,text:t.textContent,level:t.attrs.level})})),e}},{key:"scrollToNode",value:function(e){this.$node.scrollToNode(e)}},{key:"getDomByPos",value:function(e){return this.$node.getDomByPos(e)}},{key:"toggelMenu",value:function(e){!function(e,t,n){Pe[t]&&Pe[t](e,t,n)}(this.editor.view,e.type,e.attrs)}},{key:"addMenuStatusUpdateHandle",value:function(e){"function"==typeof e&&this.menuStatusUpdateHandles.push(e)}},{key:"parseHTML",value:function(e){return function(e){var t=Object(Bt.a)(),n=zc(e);return J.a.fromSchema(t).parse(n)}(e)}},{key:"_update",value:function(){this.editor.view&&(this.config.update&&this.config.update(this.editor.view),this._triggerMenuStatusUpdateListener())}},{key:"_triggerMenuStatusUpdateListener",value:function(){var e=be(this.editor.view.state,this.editor.view),t=e.menuStatus;this.menuStatusUpdateHandles.forEach((function(n){n((function(n){return{bottomBlock:e.bottomBlock,bottomBlocks:e.bottomBlocks,marks:e.marks,isActive:"a"===t[n],isDisabled:"d"===t[n]}}))}))}}])&&Vc(t.prototype,n),r&&Vc(t,r),e}();function Gc(e){for(var t={left:e.offsetLeft||0,top:e.offsetTop||0},n=e.offsetParent;n;)t.left+=n.offsetLeft,t.top+=n.offsetTop,n=n.offsetParent;return t.right=t.left+e.clientWidth,t.bottom=t.top+e.clientHeight,t}var qc={data:function(){return{menuParams:{},menuStyle:{},menuList:[]}},mounted:function(){this.init(),document.addEventListener("dragover",this.handlerFunction.bind(this),!1),document.addEventListener("drop",this.handlerFunction.bind(this),!1)},destroyed:function(){document.removeEventListener("dragover",this.handlerFunction),document.removeEventListener("drop",this.handlerFunction)},methods:{init:function(){var e=this;this.editorAPI=new Wc(this.$refs.editor,this,(function(){e.editorAPI._update();var t=e.$refs.editor.querySelector(".ProseMirror");t.onblur=function(){e.editorAPI._update()},t.onfocus=function(){e.editorAPI._update()}})),this.$emit("inited",this.editorAPI)},scrollHandle:function(){},nodeMouseoutHandle:function(e){e.target.getAttribute("data-type")===p.LINK&&this.hideInlineMenu()},nodeMouseoverHandle:function(e){var t=e.target;if(t.getAttribute("data-type")===p.LINK){var n=this.editorAPI.editor.view.posAtDOM(t,0);if(!n)return;n-=1;var r=this.editorAPI.editor.view.state.doc.nodeAt(n),i=t.getAttribute("data-id");this.setInlineMenu(i,r,t,n),this.showInlineMenu(t)}},menuMouseoverHandle:function(){this.hideInlineMenuTime&&clearTimeout(this.hideInlineMenuTime)},menuMouseoutHandle:function(){this.hideInlineMenu()},clickHandle:function(){},setInlineMenu:function(e,t,n,r){var i=this;this.menuParams={id:e,node:t,dom:n,pos:r},t.type.name===p.LINK&&(this.menuList=[{index:1,text:"取消链接",fn:function(){i.menuParams.pos&&je(i.editorAPI.editor.view,i.menuParams.pos),i.clearMenu()}},{index:2,text:"访问链接",fn:function(){window.open(i.menuParams.node.attrs.href),i.clearMenu()}}])},showInlineMenu:function(e){this.hideInlineMenuTime&&clearTimeout(this.hideInlineMenuTime);var t=Gc(this.$refs.main),n=Gc(e),r=n.top-t.top-30,i=n.left-t.left-0;this.menuStyle={top:r+"px",left:i+"px"}},hideInlineMenu:function(){var e=this;this.hideInlineMenuTime&&clearTimeout(this.hideInlineMenuTime),this.hideInlineMenuTime=setTimeout((function(){e.clearMenu()}),300)},clearMenu:function(){this.menuParams={},this.menuStyle={top:"0px",left:"-3000px"}},menuEdit:function(){this.editorAPI.config.editNode&&this.menuParams.id&&(this.editorAPI.config.editNode(this.menuParams.node.type.name,this.menuParams.id,this.menuParams.node.attrs,Ke),this.clearMenu())},scrollToNode:function(e){var t=function(e){for(var t=e.offsetTop||0,n=e.offsetParent;n;)t+=n.offsetTop,n=n.offsetParent;return t}(this.getDomByPos(e)),n=window.innerHeight/2;this.scrollTop(t-n)},getDomByPos:function(e){var t=this.editorAPI.editor.view.state.doc.resolve(e);return t.depth>0?e=t.before():t.nodeAfter||(e=this.editorAPI.editor.view.state.doc.resolve(e-1).before()),this.editorAPI.editor.view.nodeDOM(e)},scrollTop:function(e){setTimeout((function(){document.documentElement.scrollTop=document.body.scrollTop=e}),100)},handlerFunction:function(e){if(!this.editorAPI.config.disabledDragging&&(e.preventDefault(),"drop"===e.type)){var t=e.dataTransfer.files;if(t&&t[0]){var n,r=this.editorAPI.editor.view,i=r.posAtCoords({left:(n=e).clientX,top:n.clientY}),o=r.state.doc;if(i&&i.pos!==o.nodeSize-2&&o.resolve(i.pos))return void He(r,t,i.pos);if(o.lastChild.type.name===p.PARAGRAPH||o.lastChild.type.name===p.HEADING){var a=o.nodeSize-3;He(r,t,a),this.scrollToNode(a)}}}}}},Jc=n(65),Xc=Pa(qc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"main",class:e.$style.main},[n("div",{ref:"editor",class:e.$style.editor,on:{mouseover:e.nodeMouseoverHandle,mouseout:e.nodeMouseoutHandle,click:e.clickHandle}}),e._v(" "),n("div",{ref:"menu",class:e.$style.menu,style:e.menuStyle,on:{mouseover:e.menuMouseoverHandle,mouseout:e.menuMouseoutHandle}},[n("div",{class:[e.$style.btn],on:{click:function(t){return e.menuEdit()}}},[e._v("编辑")]),e._v(" "),e._l(e.menuList,(function(t){return n("div",{key:t.index,class:[e.$style.btn],on:{click:function(e){return t.fn()}}},[e._v(e._s(t.text))])}))],2)])}),[],!1,(function(e){this.$style=Jc.default.locals||Jc.default}),null,null).exports,Zc=Pa({components:{Simplebar:Fs},props:["pnode","view","getPos","config","contentDOM"],data:function(){return{numbers:[]}},created:function(){this.numbers=new Array(this.pnode.childCount).fill().map((function(e,t){return t+1}))},mounted:function(){var e=this;this.$refs.codes&&this.$refs.codes.appendChild(this.contentDOM),this.$nextTick((function(){e.$refs.simpleBar&&e.$refs.simpleBar.recalculate()}))},methods:{copyCode:function(){var e=new Ua,t="";this.pnode.forEach((function(e,n){0!==n&&(t+="\n"),t+=e.textContent}));var n=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");n='<pre lang="'.concat(this.lang,'">').concat(n,"</pre>"),e.setData("text/plain",t),e.setData("text/html",n),qa(e),this.postMessage({type:"toastCreate",attrs:{text:"复制成功"}})},postMessage:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{"data-codeblock-wrap":""}},[t("div",{attrs:{"data-codeblock-codes":""}},[t("Simplebar",{ref:"simpleBar"},[t("div",{ref:"codes"})])],1),this._v(" "),t("div",{attrs:{"data-codeblock-copy":""},on:{click:this.copyCode}},[this._v("复制代码")]),this._v(" "),t("div",{attrs:{"data-codeblock-index":""}},this._l(this.numbers,(function(e){return t("div",{key:e,attrs:{"data-codeblock-number":e}})})),0)])}),[],!1,null,null,null).exports,Qc=function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.config=i,this.contentDOM=document.createElement("pre"),this.contentDOM.setAttribute("data-origin","pm_code_preview"),this.contentDOM.setAttribute("data-lang",t.attrs.lang);var a=document.createElement("div");this.dom=document.createElement("div"),this.dom.setAttribute("data-type",p.CODE_BLOCK),this.dom.appendChild(a),this.vueNode=new Aa.a({el:a,render:function(e){return e(Zc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i,contentDOM:o.contentDOM}})}})},Yc=Pa({props:["pnode","view","getPos","config"],data:function(){return{node:null,href:null,src:null,title:null,attrs:[]}},created:function(){this.node=this.pnode,this.src=this.node.attrs.src,this.title=this.node.attrs.title||null,this.href=this.node.attrs.href||null;var e=[],t=this.node.attrs.style;t&&t[0]&&t.forEach((function(t){var n,r,i;t&&"string"==typeof t.key&&t.value&&e.push((n={},r="data-style-".concat(t.key),i=String(t.value),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n))})),this.attrs=e},methods:{clickHandler:function(){var e={src:this.src,dom:this.$refs.img};this.href&&(e.href=this.href),this.postMessage({type:this.href?"linkClick":"imageClick",attrs:e})},postMessage:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._b({attrs:{"data-content":""},on:{click:e.clickHandler,touchend:e.clickHandler}},"div",e.attrs,!1),[e.href?[n("a",{attrs:{href:e.href}},[n("img",{ref:"img",attrs:{src:e.src}})])]:[n("img",{ref:"img",attrs:{src:e.src}})],e._v(" "),e.title?n("div",{attrs:{"data-title":""}},[e._v(e._s(e.title))]):e._e()],2)}),[],!1,null,null,null).exports,el=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("div"),this.dom.setAttribute("data-type","image");var o=document.createElement("div");this.dom.appendChild(o),this.contentDOM=document.createElement("div"),this.vueNode=new Aa.a({el:o,render:function(e){return e(Yc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})};function tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nl=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("div"),this.dom.setAttribute("data-type",p.VIDEO);var r,i=t.attrs.videoHTML;r=(r=(r=i).replace(/<iframe/i,"")).replace(/<\/iframe/i,""),/</.test(r)?this.dom.innerHTML=i:this.dom.innerText=i,setTimeout((function(){!function(e){var t=e.offsetWidth,n=this.$refs.main.querySelector("iframe"),r=Math.floor(t/16*9),i=n.getAttribute("width"),o=n.getAttribute("height");if(/^\d+$/.test(i)&&/^\d+$/.test(o)){var a=Number(i),s=Number(o);r=Math.floor(t/a*s)}n.style.height=r+"px",n.style.width=t+"px"}(n.dom)}),100)}var t,n,r;return t=e,(n=[{key:"selectNode",value:function(){}},{key:"deselectNode",value:function(){}}])&&tl(t.prototype,n),r&&tl(t,r),e}();function rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var il=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.config=i,this.dom=document.createElement("div"),this.contentDOM=document.createElement("div"),this.dom.setAttribute("data-type",p.EMBED_COMPONENT);var o=document.createElement("div");this.dom.appendChild(o),this.postMessage({dom:o,type:"componentCreate",attrs:this.node.attrs})}var t,n,r;return t=e,(n=[{key:"postMessage",value:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)}}])&&rl(t.prototype,n),r&&rl(t,r),e}(),ol=Pa({components:{Simplebar:Fs},props:["pnode"],data:function(){return{katexHTML:""}},created:function(){var e=this.pnode.attrs.mathString;if("string"==typeof e&&0!==e.length){var t=Ks.a.renderToString(e,{throwOnError:!1,displayMode:!0});this.katexHTML=t.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,"")}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("Simplebar",{ref:"simplebar"},[t("div",{attrs:{"data-content":""},domProps:{innerHTML:this._s(this.katexHTML)}})])}),[],!1,null,null,null).exports,al=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("div"),this.dom.setAttribute("data-math",t.attrs.mathString),this.dom.setAttribute("data-type",p.KATEX_BLOCK);var o=document.createElement("div");this.dom.appendChild(o),this.contentDOM=document.createElement("div"),this.vueNode=new Aa.a({el:o,render:function(e){return e(ol,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})};function sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cl,ll,ul=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.attrs.mathString;if(this.curAttrs={},this.node=t,this.dom=document.createElement("span"),this.dom.setAttribute("data-type","katexinline"),this.dom.setAttribute("data-math",r),"string"==typeof r&&0!==r.length){var i=Ks.a.renderToString(r,{throwOnError:!1,displayMode:!1});this.dom.innerHTML=i.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,""),n&&n[0]&&this.addDecoration(n)}}var t,n,r;return t=e,(n=[{key:"update",value:function(e,t){return e.type!==this.node.type||t&&t[0]&&this.addDecoration(t),!1}},{key:"ignoreMutation",value:function(){return!0}},{key:"clearDecoration",value:function(){for(var e in this.curAttrs)"class"!==e&&"style"!==e&&"nodeName"!==e&&this.dom.removeAttribute(e);this.curAttrs={}}},{key:"addDecoration",value:function(e){for(var t=0;t<e.length;t++){var n=e[0].type.attrs;for(var r in n){var i=n[r];i&&("class"===r?this.curAttrs.class=(this.curAttrs.class?this.curAttrs.class+" ":"")+i:"nodeName"!==r&&(this.curAttrs[r]=i))}}for(var o in this.curAttrs)"class"!==o&&"style"!==o&&"nodeName"!==o&&this.dom.addAttribute(o,this.curAttrs[o]),"class"===o&&(this.dom.className=this.curAttrs[o])}}])&&sl(t.prototype,n),r&&sl(t,r),e}();function fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hl=(dl(cl={},p.DOC,{content:"block+"}),dl(cl,p.PARAGRAPH,{content:"inline*",group:"block",attrs:{indent:{default:0},number:{default:0},align:{default:null}},isBase:!0,toDOM:function(e){var t=e.attrs,n=t.indent,r=t.number,i=t.align,o={};return"number"==typeof n&&n>0&&n<9&&(o["data-indent-".concat(n)]=""),"number"==typeof r&&r>0&&(o["data-number"]=r),["center","right"].indexOf(i)>-1&&(o["data-align-".concat(i)]=""),o["data-type"]=p.PARAGRAPH,["p",o,0]}}),dl(cl,p.BLOCK_QUOTE,{content:"block+",group:"block",toDOM:function(){var e={};return e["data-type"]=p.BLOCK_QUOTE,["blockquote",e,0]}}),dl(cl,p.HORIZONTAL_RULE,{group:"block",toDOM:function(){var e={};return e["data-type"]=p.HORIZONTAL_RULE,["hr",e,0]}}),dl(cl,p.HEADING,{attrs:{align:{default:null},level:{default:1}},content:"inline*",group:"block",toDOM:function(e){var t={},n=e.attrs.align,r=e.attrs.level;return[1,2,3,4,5].indexOf(r)<0&&(r=5),["center","right"].indexOf(n)>-1&&(t["data-align-".concat(n)]=""),t["data-type"]=p.HEADING,["h"+r,t,0]}}),dl(cl,p.CODE_BLOCK,{attrs:{lang:{default:"text"}},content:"text*",group:"block",toDOM:function(){return["pre",["code",0]]}}),dl(cl,p.CODE_BLOCK_PREVIEW,{attrs:{lang:{default:"text"}},content:"block+",group:"block",draggable:!1,selectable:!1,toDOM:function(){return["pre",["code",0]]}}),dl(cl,p.CODE_BLOCK_PREVIEW_LINE,{content:"text*",group:"block",toDOM:function(){var e={};return e["data-type"]=p.CODE_BLOCK_PREVIEW_LINE,["div",e,0]}}),dl(cl,p.KATEX_BLOCK,{attrs:{mathString:{default:null}},group:"block",draggable:!1,selectable:!1,toDOM:function(){return["div",0]}}),dl(cl,p.KATEX_INLINE,{attrs:{mathString:{default:null}},content:"text*",group:"inline",draggable:!1,selectable:!1,inline:!0,toDOM:function(){return["span"]}}),dl(cl,p.TEXT,{group:"inline"}),dl(cl,p.IMAGE,{attrs:{src:{default:null},alt:{default:null},title:{default:null},style:{default:null},href:{default:null}},draggable:!1,selectable:!1,group:"block",toDOM:function(e){var t={};return t.src=e.attrs.src,["img",t]}}),dl(cl,p.VIDEO,{attrs:{videoHTML:{default:null}},group:"block",toDOM:function(){return["div"]}}),dl(cl,p.EMBED_COMPONENT,{attrs:{type:{default:""},data:{default:null}},group:"block",atom:!0,draggable:!1,selectable:!1,toDOM:function(){return["div"]}}),dl(cl,p.LINK,{inline:!0,content:"text*",group:"inline",attrs:{href:{},title:{default:""}},toDOM:function(e){var t={};return t.href=e.attrs.href,t.title=e.attrs.title||"",t["data-type"]=p.LINK,["a",t,0]}}),dl(cl,p.CODE_INLINE,{inline:!0,content:"text*",group:"inline",toDOM:function(){var e={};return e["data-type"]=p.CODE_INLINE,["code",e,0]}}),dl(cl,p.SUP,{inline:!0,content:"text*",group:"inline",toDOM:function(){var e={};return e["data-type"]=p.SUP,["sup",e,0]}}),dl(cl,p.SUB,{inline:!0,content:"text*",group:"inline",toDOM:function(){var e={};return e["data-type"]=p.SUB,["sub",e,0]}}),cl),pl=(dl(ll={},p.MARK_CLASS,{attrs:{className:{}},toDOM:function(e){var t={};return t["data-type"]=p.MARK_CLASS,t.class=e.attrs.className,["span",t,0]}}),dl(ll,p.ITALIC,{toDOM:function(){var e={};return e["data-type"]=p.ITALIC,["i",e,0]}}),dl(ll,p.DEL,{toDOM:function(){var e={};return e["data-type"]=p.DEL,["s",e,0]}}),dl(ll,p.UNDERLINE,{toDOM:function(){var e={};return e["data-type"]=p.UNDERLINE,["u",e,0]}}),dl(ll,p.SIZE,{attrs:{size:{}},toDOM:function(e){var t={},n=e.attrs.size;return"number"==typeof n&&n>8&&n<99&&(t["data-size"]=n),t["data-type"]=p.SIZE,["span",t,0]}}),dl(ll,p.COLOR,{attrs:{color:{},name:{}},toDOM:function(e){var t={},n=e.attrs.color,r=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(n)&&/^[a-z_]{1,20}$/i.test(r)&&(t["data-name"]=r,t.style="color: ".concat(n)),t["data-type"]=p.COLOR,["span",t,0]}}),dl(ll,p.BG_COLOR,{attrs:{color:{},name:{}},toDOM:function(e){var t={},n=e.attrs.color,r=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(n)&&/^[a-z_]{1,20}$/i.test(r)&&(t["data-name"]=r,t.style="background: ".concat(n)),t["data-type"]=p.BG_COLOR,["span",t,0]}}),dl(ll,p.STRONG,{toDOM:function(){var e={};return e["data-type"]=p.STRONG,["strong",e,0]}}),ll);function vl(e){return function(e){if(Array.isArray(e))return ml(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ml(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ml(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hl[p.NUMBERED_LIST]={content:"".concat(p.LIST_ITEM,"+"),group:"block",attrs:{start:{default:1},normalizeStart:{default:1}},toDOM:function(e){var t=e.attrs.start,n={};return"number"==typeof t&&t>1&&(n.start=t),n["data-type"]=p.NUMBERED_LIST,["ol",n,0]}},hl[p.BULLETED_LIST]={content:"".concat(p.LIST_ITEM,"+"),group:"block",toDOM:function(){var e={};return e["data-type"]=p.BULLETED_LIST,["ul",e,0]}},hl[p.LIST_ITEM]={content:"".concat(p.PARAGRAPH," ").concat(p.IMAGE),group:"block",attrs:{listStyle:{default:null}},toDOM:function(){return p.LIST_ITEM,["li",0]}};var gl=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g;function yl(e){e.forEach((function(e){var t,n=function(e){var t=[];return e.replace(gl,(function(e){t.push({text:e,offset:arguments[arguments.length-2]})})),t}(e.text);if(n[0]){var r=0,i=[];e.nodes.forEach((function(e){var t=function(e,t,n){var r=t.text.length,i=t.text,o=e+r,a=[],s=e;if(n.forEach((function(n){var r=n.offset,c=r+n.text.length;if(s<r){var l=Math.min(o,r),u=i.substring(s-e,l-e);a.push(bl(t,u)),s=l}if(s>=r&&s<c){var f=Math.min(o,c),d=i.substring(s-e,f-e);a.push(function(e,t){return{type:p.LINK,attrs:{href:e.text,title:""},content:[t]}}(n,bl(t,d))),s=f}})),s<o){var c=o,l=i.substring(s-e,c-e);a.push(bl(t,l))}return a}(r,e,n);i=i.concat(t),r+=e.text.length}));var o=e.parent.content.length-e.rightStart,a=o-e.nodes.length;(t=e.parent.content).splice.apply(t,[a,o].concat(vl(i)))}}))}function bl(e,t){var n={type:"text",text:t};return e.marks&&(n.marks=e.marks),n}function wl(e){var t=[],n=null;e.content.forEach((function(e){!function(e){if(!e)return!1;if([p.PARAGRAPH,p.HEADING].indexOf(e.type)<0)return!1;var t=function e(t){var n="";return t.content&&t.content[0]?(t.content.forEach((function(t){"text"===t.type?n+=t.text:n+=e(t)})),n):n}(e);return!!/^\s{0,5}$/.test(t)}(e)?(n=kl(n,null),t.push(e)):(n||t.push(e),n=kl(n,e))})),e.content=t}function kl(e,t){return t?e&&e.type===t.type?{type:e.type,num:e.num+1}:{type:t.type,num:1}:null}function xl(e){return yl(function(e){var t=[];return e.content.forEach((function(e){El.indexOf(e.type)>-1&&(t=t.concat(function(e){var t=[];if(e.content&&e.content[0]){var n={text:"",nodes:[]},r=e.content.length;e.content.forEach((function(i,o){"text"===i.type?(n.nodes.push(i),n.text+=i.text,n.rightStart=r-o-1,n.parent=e):(n.text&&t.push(n),n={text:"",nodes:[]})})),n.text&&t.push(n)}return t}(e)))})),t}(e)),wl(e),e}var El=[p.PARAGRAPH];function Ol(e){return function e(t){var n=[];return t.content.forEach((function(t){t.type===p.KATEX_INLINE&&n.push(t),t.content&&t.content[0]&&(n=n.concat(e(t)))})),n}(e).forEach((function(e){!function(e){var t=e.attrs.mathString;e.content=[{type:"text",text:t}]}(e)})),e}var _l=[],Sl=Object.keys,Ml={},Nl={},Cl=/^(no-?highlight|plain|text)$/i,Tl=/\blang(?:uage)?-([\w-]+)\b/i,Al=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,Dl={classPrefix:"",tabReplace:null,useBR:!1,languages:void 0};function Il(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ll(e){return e.nodeName.toLowerCase()}function Rl(e,t){var n=e&&e.exec(t);return n&&0===n.index}function Pl(e){return Cl.test(e)}function Bl(e){var t,n={},r=Array.prototype.slice.call(arguments,1);for(t in e)n[t]=e[t];return r.forEach((function(e){for(t in e)n[t]=e[t]})),n}function zl(e){var t=[];return function e(n,r){for(var i=n.firstChild;i;i=i.nextSibling)3===i.nodeType?r+=i.nodeValue.length:1===i.nodeType&&(t.push({event:"start",offset:r,node:i}),r=e(i,r),Ll(i).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:i}));return r}(e,0),t}function $l(e){function t(e){return e&&e.source||e}function n(n,r){return new RegExp(t(n),"m"+(e.case_insensitive?"i":"")+(r?"g":""))}!function r(i,o){if(!i.compiled){if(i.compiled=!0,i.keywords=i.keywords||i.beginKeywords,i.keywords){var a={},s=function(t,n){e.case_insensitive&&(n=n.toLowerCase()),n.split(" ").forEach((function(e){var n=e.split("|");a[n[0]]=[t,n[1]?Number(n[1]):1]}))};"string"==typeof i.keywords?s("keyword",i.keywords):Sl(i.keywords).forEach((function(e){s(e,i.keywords[e])})),i.keywords=a}i.lexemesRe=n(i.lexemes||/\w+/,!0),o&&(i.beginKeywords&&(i.begin="\\b("+i.beginKeywords.split(" ").join("|")+")\\b"),i.begin||(i.begin=/\B|\b/),i.beginRe=n(i.begin),i.endSameAsBegin&&(i.end=i.begin),i.end||i.endsWithParent||(i.end=/\B|\b/),i.end&&(i.endRe=n(i.end)),i.terminator_end=t(i.end)||"",i.endsWithParent&&o.terminator_end&&(i.terminator_end+=(i.end?"|":"")+o.terminator_end)),i.illegal&&(i.illegalRe=n(i.illegal)),null==i.relevance&&(i.relevance=1),i.contains||(i.contains=[]),i.contains=Array.prototype.concat.apply([],i.contains.map((function(e){return function(e){return e.variants&&!e.cached_variants&&(e.cached_variants=e.variants.map((function(t){return Bl(e,{variants:null},t)}))),e.cached_variants||e.endsWithParent&&[Bl(e)]||[e]}("self"===e?i:e)}))),i.contains.forEach((function(e){r(e,i)})),i.starts&&r(i.starts,o);var c=i.contains.map((function(e){return e.beginKeywords?"\\.?(?:"+e.begin+")\\.?":e.begin})).concat([i.terminator_end,i.illegal]).map(t).filter(Boolean);i.terminators=c.length?n(function(e,n){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,i=0,o="",a=0;a<e.length;a++){var s=i,c=t(e[a]);for(a>0&&(o+=n);c.length>0;){var l=r.exec(c);if(null==l){o+=c;break}o+=c.substring(0,l.index),c=c.substring(l.index+l[0].length),"\\"==l[0][0]&&l[1]?o+="\\"+String(Number(l[1])+s):(o+=l[0],"("==l[0]&&i++)}}return o}(c,"|"),!0):{exec:function(){return null}}}}(e)}function jl(e,t,n,r){function i(e){return new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function o(e,t){var n=u.case_insensitive?t[0].toLowerCase():t[0];return e.keywords.hasOwnProperty(n)&&e.keywords[n]}function a(e,t,n,r){var i='<span class="'+(r?"":Dl.classPrefix);return e?(i+=e+'">')+t+(n?"":"</span>"):t}function s(){p+=null!=d.subLanguage?function(){var e="string"==typeof d.subLanguage;if(e&&!Ml[d.subLanguage])return Il(v);var t=e?jl(d.subLanguage,v,!0,h[d.subLanguage]):Hl(v,d.subLanguage.length?d.subLanguage:void 0);return d.relevance>0&&(m+=t.relevance),e&&(h[d.subLanguage]=t.top),a(t.language,t.value,!1,!0)}():function(){var e,t,n,r;if(!d.keywords)return Il(v);for(r="",t=0,d.lexemesRe.lastIndex=0,n=d.lexemesRe.exec(v);n;)r+=Il(v.substring(t,n.index)),(e=o(d,n))?(m+=e[1],r+=a(e[0],Il(n[0]))):r+=Il(n[0]),t=d.lexemesRe.lastIndex,n=d.lexemesRe.exec(v);return r+Il(v.substr(t))}(),v=""}function c(e){p+=e.className?a(e.className,"",!0):"",d=Object.create(e,{parent:{value:d}})}function l(e,t){if(v+=e,null==t)return s(),0;var r=function(e,t){var n,r;for(n=0,r=t.contains.length;n<r;n++)if(Rl(t.contains[n].beginRe,e))return t.contains[n].endSameAsBegin&&(t.contains[n].endRe=i(t.contains[n].beginRe.exec(e)[0])),t.contains[n]}(t,d);if(r)return r.skip?v+=t:(r.excludeBegin&&(v+=t),s(),r.returnBegin||r.excludeBegin||(v=t)),c(r),r.returnBegin?0:t.length;var o=function e(t,n){if(Rl(t.endRe,n)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return e(t.parent,n)}(d,t);if(o){var a=d;a.skip?v+=t:(a.returnEnd||a.excludeEnd||(v+=t),s(),a.excludeEnd&&(v=t));do{d.className&&(p+="</span>"),d.skip||d.subLanguage||(m+=d.relevance),d=d.parent}while(d!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),c(o.starts)),a.returnEnd?0:t.length}if(function(e,t){return!n&&Rl(t.illegalRe,e)}(t,d))throw new Error('Illegal lexeme "'+t+'" for mode "'+(d.className||"<unnamed>")+'"');return v+=t,t.length||1}var u=Vl(e);if(!u)throw new Error('Unknown language: "'+e+'"');$l(u);var f,d=r||u,h={},p="";for(f=d;f!==u;f=f.parent)f.className&&(p=a(f.className,"",!0)+p);var v="",m=0;try{for(var g,y,b=0;d.terminators.lastIndex=b,g=d.terminators.exec(t);)y=l(t.substring(b,g.index),g[0]),b=g.index+y;for(l(t.substr(b)),f=d;f.parent;f=f.parent)f.className&&(p+="</span>");return{relevance:m,value:p,language:e,top:d}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{relevance:0,value:Il(t)};throw e}}function Hl(e,t){t=t||Dl.languages||Sl(Ml);var n={relevance:0,value:Il(e)},r=n;return t.filter(Vl).filter(Wl).forEach((function(t){var i=jl(t,e,!1);i.language=t,i.relevance>r.relevance&&(r=i),i.relevance>n.relevance&&(r=n,n=i)})),r.language&&(n.second_best=r),n}function Fl(e){return Dl.tabReplace||Dl.useBR?e.replace(Al,(function(e,t){return Dl.useBR&&"\n"===e?"<br>":Dl.tabReplace?t.replace(/\t/g,Dl.tabReplace):""})):e}function Ul(e){var t,n,r,i,o,a=function(e){var t,n,r,i,o=e.className+" ";if(o+=e.parentNode?e.parentNode.className:"",n=Tl.exec(o))return Vl(n[1])?n[1]:"no-highlight";for(t=0,r=(o=o.split(/\s+/)).length;t<r;t++)if(Pl(i=o[t])||Vl(i))return i}(e);Pl(a)||(Dl.useBR?(t=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):t=e,o=t.textContent,r=a?jl(a,o,!0):Hl(o),(n=zl(t)).length&&((i=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=r.value,r.value=function(e,t,n){var r=0,i="",o=[];function a(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function s(e){i+="<"+Ll(e)+_l.map.call(e.attributes,(function(e){return" "+e.nodeName+'="'+Il(e.value).replace('"',"&quot;")+'"'})).join("")+">"}function c(e){i+="</"+Ll(e)+">"}function l(e){("start"===e.event?s:c)(e.node)}for(;e.length||t.length;){var u=a();if(i+=Il(n.substring(r,u[0].offset)),r=u[0].offset,u===e){o.reverse().forEach(c);do{l(u.splice(0,1)[0]),u=a()}while(u===e&&u.length&&u[0].offset===r);o.reverse().forEach(s)}else"start"===u[0].event?o.push(u[0].node):o.pop(),l(u.splice(0,1)[0])}return i+Il(n.substr(r))}(n,zl(i),o)),r.value=Fl(r.value),e.innerHTML=r.value,e.className=function(e,t,n){var r=t?Nl[t]:n,i=[e.trim()];return e.match(/\bhljs\b/)||i.push("hljs"),-1===e.indexOf(r)&&i.push(r),i.join(" ").trim()}(e.className,a,r.language),e.result={language:r.language,re:r.relevance},r.second_best&&(e.second_best={language:r.second_best.language,re:r.second_best.relevance}))}function Kl(){if(!Kl.called){Kl.called=!0;var e=document.querySelectorAll("pre code");_l.forEach.call(e,Ul)}}function Vl(e){return e=(e||"").toLowerCase(),Ml[e]||Ml[Nl[e]]}function Wl(e){var t=Vl(e);return t&&!t.disableAutodetect}var Gl={};Gl.highlight=jl,Gl.highlightAuto=Hl,Gl.fixMarkup=Fl,Gl.highlightBlock=Ul,Gl.configure=function(e){Dl=Bl(Dl,e)},Gl.initHighlighting=Kl,Gl.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",Kl,!1),addEventListener("load",Kl,!1)},Gl.registerLanguage=function(e,t){var n=Ml[e]=t(Gl);n.aliases&&n.aliases.forEach((function(t){Nl[t]=e}))},Gl.listLanguages=function(){return Sl(Ml)},Gl.getLanguage=Vl,Gl.autoDetection=Wl,Gl.inherit=Bl,Gl.IDENT_RE="[a-zA-Z]\\w*",Gl.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",Gl.NUMBER_RE="\\b\\d+(\\.\\d+)?",Gl.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Gl.BINARY_NUMBER_RE="\\b(0b[01]+)",Gl.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Gl.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},Gl.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[Gl.BACKSLASH_ESCAPE]},Gl.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[Gl.BACKSLASH_ESCAPE]},Gl.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Gl.COMMENT=function(e,t,n){var r=Gl.inherit({className:"comment",begin:e,end:t,contains:[]},n||{});return r.contains.push(Gl.PHRASAL_WORDS_MODE),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),r},Gl.C_LINE_COMMENT_MODE=Gl.COMMENT("//","$"),Gl.C_BLOCK_COMMENT_MODE=Gl.COMMENT("/\\*","\\*/"),Gl.HASH_COMMENT_MODE=Gl.COMMENT("#","$"),Gl.NUMBER_MODE={className:"number",begin:Gl.NUMBER_RE,relevance:0},Gl.C_NUMBER_MODE={className:"number",begin:Gl.C_NUMBER_RE,relevance:0},Gl.BINARY_NUMBER_MODE={className:"number",begin:Gl.BINARY_NUMBER_RE,relevance:0},Gl.CSS_NUMBER_MODE={className:"number",begin:Gl.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},Gl.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Gl.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[Gl.BACKSLASH_ESCAPE]}]},Gl.TITLE_MODE={className:"title",begin:Gl.IDENT_RE,relevance:0},Gl.UNDERSCORE_TITLE_MODE={className:"title",begin:Gl.UNDERSCORE_IDENT_RE,relevance:0},Gl.METHOD_GUARD={begin:"\\.\\s*"+Gl.UNDERSCORE_IDENT_RE,relevance:0};var ql=Gl,Jl={javascript:function(e){var t="[A-Za-z$_][0-9A-Za-z$_]*",n={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},r={className:"number",variants:[{begin:"\\b(0[bB][01]+)"},{begin:"\\b(0[oO][0-7]+)"},{begin:e.C_NUMBER_RE}],relevance:0},i={className:"subst",begin:"\\$\\{",end:"\\}",keywords:n,contains:[]},o={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,i]};i.contains=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,o,r,e.REGEXP_MODE];var a=i.contains.concat([e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx"],keywords:n,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,o,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,r,{begin:/[{,]\s*/,relevance:0,contains:[{begin:t+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:t,relevance:0}]}]},{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+t+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:n,contains:a}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{begin:/</,end:/(\/[A-Za-z0-9\\._:-]+|[A-Za-z0-9\\._:-]+\/)>/,subLanguage:"xml",contains:[{begin:/<[A-Za-z0-9\\._:-]+\s*\/>/,skip:!0},{begin:/<[A-Za-z0-9\\._:-]+/,end:/(\/[A-Za-z0-9\\._:-]+|[A-Za-z0-9\\._:-]+\/)>/,skip:!0,contains:[{begin:/<[A-Za-z0-9\\._:-]+\s*\/>/,skip:!0},"self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[e.inherit(e.TITLE_MODE,{begin:t}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:a}],illegal:/\[|%/},{begin:/\$[(.]/},e.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}},python:function(e){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},n={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:t,illegal:/#/},i={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,n],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,n],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,n,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,n,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,r]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},o={className:"number",relevance:0,variants:[{begin:e.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:e.C_NUMBER_RE+"[lLjJ]?"}]},a={className:"params",begin:/\(/,end:/\)/,contains:["self",n,o,i]};return r.contains=[i,o,n],{aliases:["py","gyp","ipython"],keywords:t,illegal:/(<\/|->|\?)|=>/,contains:[n,o,i,e.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[e.UNDERSCORE_TITLE_MODE,a,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}},java:function(e){var t="false synchronized int abstract float private char boolean var static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private module requires exports do",n={className:"number",begin:"\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",relevance:0};return{aliases:["jsp"],keywords:t,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"class",beginKeywords:"class interface",end:/[{;=]/,excludeEnd:!0,keywords:"class interface",illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"new throw return else",relevance:0},{className:"function",begin:"([À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*(<[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*(\\s*,\\s*[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*)*>)?\\s+)+"+e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:t,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"params",begin:/\(/,end:/\)/,keywords:t,relevance:0,contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},n,{className:"meta",begin:"@[A-Za-z]+"}]}},sql:function(e){var t=e.COMMENT("--","$");return{case_insensitive:!0,illegal:/[<>{}*]/,contains:[{beginKeywords:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke comment values with",end:/;/,endsWithParent:!0,lexemes:/[\w\.]+/,keywords:{keyword:"as abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias all allocate allow alter always analyze ancillary and anti any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound bucket buffer_cache buffer_pool build bulk by byte byteordermark bytes cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain explode export export_set extended extent external external_1 external_2 externally extract failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force foreign form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour hours http id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists keep keep_duplicates key keys kill language large last last_day last_insert_id last_value lateral lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minutes minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notnull notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second seconds section securefile security seed segment select self semi sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime table tables tablespace tablesample tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unnest unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace window with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null unknown",built_in:"array bigint binary bit blob bool boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text time timestamp tinyint varchar varying void"},contains:[{className:"string",begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE,{begin:"''"}]},{className:"string",begin:'"',end:'"',contains:[e.BACKSLASH_ESCAPE,{begin:'""'}]},{className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t,e.HASH_COMMENT_MODE]},e.C_BLOCK_COMMENT_MODE,t,e.HASH_COMMENT_MODE]}},cpp:function(e){var t={className:"keyword",begin:"\\b[a-z\\d_]*_t\\b"},n={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\((?:.|\n)*?\)\1"/},{begin:"'\\\\?.",end:"'",illegal:"."}]},r={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},i={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{"meta-keyword":"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(n,{className:"meta-string"}),{className:"meta-string",begin:/<[^\n>]*>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},o=e.IDENT_RE+"\\s*\\(",a={keyword:"int float while private char catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and or not",built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr",literal:"true false nullptr NULL"},s=[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,r,n];return{aliases:["c","cc","h","c++","h++","hpp","hh","hxx","cxx"],keywords:a,illegal:"</",contains:s.concat([i,{begin:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",end:">",keywords:a,contains:["self",t]},{begin:e.IDENT_RE+"::",keywords:a},{variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:a,contains:s.concat([{begin:/\(/,end:/\)/,keywords:a,contains:s.concat(["self"]),relevance:0}]),relevance:0},{className:"function",begin:"("+e.IDENT_RE+"[\\*&\\s]+)+"+o,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:a,illegal:/[^\w\s\*&]/,contains:[{begin:o,returnBegin:!0,contains:[e.TITLE_MODE],relevance:0},{className:"params",begin:/\(/,end:/\)/,keywords:a,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,n,r,t,{begin:/\(/,end:/\)/,keywords:a,relevance:0,contains:["self",e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,n,r,t]}]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,i]},{className:"class",beginKeywords:"class struct",end:/[{;:]/,contains:[{begin:/</,end:/>/,contains:["self"]},e.TITLE_MODE]}]),exports:{preprocessor:i,strings:n,keywords:a}}},shell:function(e){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}},typescript:function(e){var t={keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class public private protected get set super static implements enum export import declare type namespace abstract as from extends async await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document any number boolean string void Promise"},n={className:"meta",begin:"@[A-Za-z$_][0-9A-Za-z$_]*"},r={begin:"\\(",end:/\)/,keywords:t,contains:["self",e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.NUMBER_MODE]},i={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,n,r]};return{aliases:["ts"],keywords:t,contains:[{className:"meta",begin:/^\s*['"]use strict['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,{className:"subst",begin:"\\$\\{",end:"\\}"}]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"number",variants:[{begin:"\\b(0[bB][01]+)"},{begin:"\\b(0[oO][0-7]+)"},{begin:e.C_NUMBER_RE}],relevance:0},{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+e.IDENT_RE+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.IDENT_RE},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,contains:["self",e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]}]}]}],relevance:0},{className:"function",begin:"function",end:/[\{;]/,excludeEnd:!0,keywords:t,contains:["self",e.inherit(e.TITLE_MODE,{begin:"[A-Za-z$_][0-9A-Za-z$_]*"}),i],illegal:/%/,relevance:0},{beginKeywords:"constructor",end:/\{/,excludeEnd:!0,contains:["self",i]},{begin:/module\./,keywords:{built_in:"module"},relevance:0},{beginKeywords:"module",end:/\{/,excludeEnd:!0},{beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:"interface extends"},{begin:/\$[(.]/},{begin:"\\."+e.IDENT_RE,relevance:0},n,r]}},objectivec:function(e){var t=/[a-zA-Z@][a-zA-Z0-9_]*/,n="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],keywords:{keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required @encode @package @import @defs @compatibility_alias __bridge __bridge_transfer __bridge_retained __bridge_retain __covariant __contravariant __kindof _Nonnull _Nullable _Null_unspecified __FUNCTION__ __PRETTY_FUNCTION__ __attribute__ getter setter retain unsafe_unretained nonnull nullable null_unspecified null_resettable class instancetype NS_DESIGNATED_INITIALIZER NS_UNAVAILABLE NS_REQUIRES_SUPER NS_RETURNS_INNER_POINTER NS_INLINE NS_AVAILABLE NS_DEPRECATED NS_ENUM NS_OPTIONS NS_SWIFT_UNAVAILABLE NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_REFINED_FOR_SWIFT NS_SWIFT_NAME NS_SWIFT_NOTHROW NS_DURING NS_HANDLER NS_ENDHANDLER NS_VALUERETURN NS_VOIDRETURN",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},lexemes:t,illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"'",end:"[^\\\\]'",illegal:"[^\\\\][^']"}]},{className:"meta",begin:"#",end:"$",contains:[{className:"meta-string",variants:[{begin:'"',end:'"'},{begin:"<",end:">"}]}]},{className:"class",begin:"("+n.split(" ").join("|")+")\\b",end:"({|$)",excludeEnd:!0,keywords:n,lexemes:t,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}},go:function(e){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,{begin:"'",end:"[^\\\\]'"},{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:/\s*\{/,excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:t,illegal:/["']/}]}]}}};Object.keys(Jl).forEach((function(e){ql.registerLanguage(e,Jl[e])}));var Xl=function(e){return ql.highlightAuto(e)},Zl=function(e,t){return ql.highlight(e,t)};function Ql(e){return function(e){var t=[];return e.content.forEach((function(e){e.type===p.CODE_BLOCK&&t.push(e)})),t}(e).forEach((function(e){!function(e){var t=e.content[0].text,n=e.attrs.lang;if("text"!==n)if(e.type=p.CODE_BLOCK_PREVIEW,Jl[n]){var r=Zl(n,t,!0);e.content=Yl(r)}else{var i=Xl(t);e.content=Yl(i),e.attrs.lang=i.language}}(e)})),e}function Yl(e){var t=e.value.split("\n"),n=[];return t.forEach((function(e){var t=document.createElement("div");t.innerHTML=e;var r=function e(t){var n=[];return function(e,t){Array.prototype.forEach.call(e,t)}(t.childNodes,(function(t){3===t.nodeType?n.push(t):t.childNodes&&t.childNodes.length>0&&(n=n.concat(e(t)))})),n}(t),i=[];r.forEach((function(e){var t=function(e){var t=[];return e.forEach((function(e){t.push({type:p.MARK_CLASS,attrs:{className:"hljs-"+e.getAttribute("class")}})})),t}(function(e){for(var t=[],n=e.parentNode;"span"===n.nodeName.toLowerCase();)t.push(n),n=n.parentNode;return t}(e));i.push({type:p.TEXT,text:e.textContent,marks:t})})),n.push({type:p.CODE_BLOCK_PREVIEW_LINE,attrs:{},content:i})})),n}function eu(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function tu(e,t,n,r,i,o){return eu((a=eu(eu(t,e),eu(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function nu(e,t,n,r,i,o,a){return tu(t&n|~t&r,e,t,i,o,a)}function ru(e,t,n,r,i,o,a){return tu(t&r|n&~r,e,t,i,o,a)}function iu(e,t,n,r,i,o,a){return tu(t^n^r,e,t,i,o,a)}function ou(e,t,n,r,i,o,a){return tu(n^(t|~r),e,t,i,o,a)}function au(e,t){var n,r,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,l=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)r=s,i=c,o=l,a=u,s=nu(s,c,l,u,e[n],7,-680876936),u=nu(u,s,c,l,e[n+1],12,-389564586),l=nu(l,u,s,c,e[n+2],17,606105819),c=nu(c,l,u,s,e[n+3],22,-1044525330),s=nu(s,c,l,u,e[n+4],7,-176418897),u=nu(u,s,c,l,e[n+5],12,1200080426),l=nu(l,u,s,c,e[n+6],17,-1473231341),c=nu(c,l,u,s,e[n+7],22,-45705983),s=nu(s,c,l,u,e[n+8],7,1770035416),u=nu(u,s,c,l,e[n+9],12,-1958414417),l=nu(l,u,s,c,e[n+10],17,-42063),c=nu(c,l,u,s,e[n+11],22,-1990404162),s=nu(s,c,l,u,e[n+12],7,1804603682),u=nu(u,s,c,l,e[n+13],12,-40341101),l=nu(l,u,s,c,e[n+14],17,-1502002290),s=ru(s,c=nu(c,l,u,s,e[n+15],22,1236535329),l,u,e[n+1],5,-165796510),u=ru(u,s,c,l,e[n+6],9,-1069501632),l=ru(l,u,s,c,e[n+11],14,643717713),c=ru(c,l,u,s,e[n],20,-373897302),s=ru(s,c,l,u,e[n+5],5,-701558691),u=ru(u,s,c,l,e[n+10],9,38016083),l=ru(l,u,s,c,e[n+15],14,-660478335),c=ru(c,l,u,s,e[n+4],20,-405537848),s=ru(s,c,l,u,e[n+9],5,568446438),u=ru(u,s,c,l,e[n+14],9,-1019803690),l=ru(l,u,s,c,e[n+3],14,-187363961),c=ru(c,l,u,s,e[n+8],20,1163531501),s=ru(s,c,l,u,e[n+13],5,-1444681467),u=ru(u,s,c,l,e[n+2],9,-51403784),l=ru(l,u,s,c,e[n+7],14,1735328473),s=iu(s,c=ru(c,l,u,s,e[n+12],20,-1926607734),l,u,e[n+5],4,-378558),u=iu(u,s,c,l,e[n+8],11,-2022574463),l=iu(l,u,s,c,e[n+11],16,1839030562),c=iu(c,l,u,s,e[n+14],23,-35309556),s=iu(s,c,l,u,e[n+1],4,-1530992060),u=iu(u,s,c,l,e[n+4],11,1272893353),l=iu(l,u,s,c,e[n+7],16,-155497632),c=iu(c,l,u,s,e[n+10],23,-1094730640),s=iu(s,c,l,u,e[n+13],4,681279174),u=iu(u,s,c,l,e[n],11,-358537222),l=iu(l,u,s,c,e[n+3],16,-722521979),c=iu(c,l,u,s,e[n+6],23,76029189),s=iu(s,c,l,u,e[n+9],4,-640364487),u=iu(u,s,c,l,e[n+12],11,-421815835),l=iu(l,u,s,c,e[n+15],16,530742520),s=ou(s,c=iu(c,l,u,s,e[n+2],23,-995338651),l,u,e[n],6,-198630844),u=ou(u,s,c,l,e[n+7],10,1126891415),l=ou(l,u,s,c,e[n+14],15,-1416354905),c=ou(c,l,u,s,e[n+5],21,-57434055),s=ou(s,c,l,u,e[n+12],6,1700485571),u=ou(u,s,c,l,e[n+3],10,-1894986606),l=ou(l,u,s,c,e[n+10],15,-1051523),c=ou(c,l,u,s,e[n+1],21,-2054922799),s=ou(s,c,l,u,e[n+8],6,1873313359),u=ou(u,s,c,l,e[n+15],10,-30611744),l=ou(l,u,s,c,e[n+6],15,-1560198380),c=ou(c,l,u,s,e[n+13],21,1309151649),s=ou(s,c,l,u,e[n+4],6,-145523070),u=ou(u,s,c,l,e[n+11],10,-1120210379),l=ou(l,u,s,c,e[n+2],15,718787259),c=ou(c,l,u,s,e[n+9],21,-343485551),s=eu(s,r),c=eu(c,i),l=eu(l,o),u=eu(u,a);return[s,c,l,u]}function su(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function cu(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function lu(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function uu(e){return unescape(encodeURIComponent(e))}function fu(e){return function(e){return su(au(cu(e),8*e.length))}(uu(e))}function du(e,t){return function(e,t){var n,r,i=cu(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=au(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=au(o.concat(cu(t)),512+8*t.length),su(au(a.concat(r),640))}(uu(e),uu(t))}function hu(e,t,n){return t?n?du(t,e):function(e,t){return lu(du(e,t))}(t,e):n?fu(e):function(e){return lu(fu(e))}(e)}function pu(e,t){var n=e.state.doc,r=n.resolve(t);return function e(t,n,r){if(!n)return r;var i=n.pos,o=n.nodeBefore;return o?(o.isText?(r=o.text+r,n.parent.isInline?i=i-o.nodeSize-1:i-=o.nodeSize):o.isInline&&(r=o.textContent+r,i-=o.nodeSize),i===n.pos?r:(n=t.resolve(i),e(t,n,r))):n.parent.isInline?(n=t.resolve(n.pos-1),e(t,n,r)):r}(n,r,"").length}function vu(e,t){var n=e.pos,r=null,i=0;return e.node.descendants((function(e,o){if(e.isText&&"number"!=typeof r){var a=e.text.length;t<=i+a?r=n+o+(t-i)+1:i+=a}})),r}function mu(e,t,n,r,i){i=String(i);var o=[];return n.forEach((function(n){var a=function(e,t,n,r,i){var o=t[n.blockIndex];if(n.isMarkedAllBlock){var a=o.node.textContent;if(bu(a,n.originMarkContent)/a.length>=.85)return function(e,t,n,r){return gu(e,r,t.pos,t.pos+t.node.nodeSize,n)}(e,o,r,i)}var s=wu(o,n);return s<.85&&(o=t[n.blockIndex-1],(s=wu(o,n))<.85&&(o=t[n.blockIndex+1],(s=wu(o,n))<.85&&(o=t[n.blockIndex-2],(s=wu(o,n))<.85&&(o=t[n.blockIndex+2],s=wu(o,n))))),s>=.85?function(e,t,n,r,i){var o=vu(t,n.startInBlock),a=vu(t,n.endInBlock);return gu(e,i,o,a,r)}(e,o,n,r,i):[]}(e,t,n,r,i);o=o.concat(a)})),o}function gu(e,t,n,r,i){var o=[];return e.state.doc.nodesBetween(n,r,(function(e,a){e.isText&&o.push(yu(t,Math.max(n,a),Math.min(r,a+e.text.length),i)),e.type.name===p.KATEX_INLINE&&o.push(yu(t,a,a+e.nodeSize,i,!0))})),o}function yu(e,t,n,r,i){return{id:e,attrs:(o={class:"".concat(e),"data-deco":""},a="data-deco-".concat(r),s="",a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o),from:t,to:n,type:i?"node":"inline"};var o,a,s}function bu(e,t){var n=0;return e=e.split(""),t.split("").forEach((function(t){var r=e.indexOf(t);r>-1&&(n+=1,e.splice(r,1))})),n}function wu(e,t){if(!e.node.textContent)return 0;var n=t.originMarkContent,r=bu(e.node.textContent.substring(t.startInBlock,t.endInBlock),n),i=1;return n.length>8&&(i=1.3),r/n.length*i}var ku=new Q.e("decoration");function xu(e,t){var n=[],r=e.state;t.forEach((function(e){"node"===e.type?n.push(la.node(e.from,e.to,e.attrs)):n.push(la.inline(e.from,e.to,e.attrs))}));var i=da.create(r.doc,n),o=r.tr.setMeta(ku,{decorationSet:i});e.dispatch(o)}var Eu=null;function Ou(e,t,n){if(0===t.length)return[];var r=t.filter((function(e){return e.id!==n}));return r.length!==t.length&&xu(e,t=r),t}function _u(e,t){var n=function(e,t){for(3===e.nodeType&&(e=e.parentNode);e&&e.getAttribute;){var n=e.getAttribute(t);if(n)return{dom:e,attrVal:n};e=e.parentNode}return null}(e,"data-type");if(n.dom&&n.attrVal===p.KATEX_INLINE)return"start"===t?{container:n.dom,offset:0}:{container:n.dom,offset:n.dom.childNodes.length}}function Su(e){return 3===e.nodeType&&(e=e.parentNode),e.closest('[data-type="doc"]')}function Mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nu=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=t,this.view=n,this.index=0,this.allLeafBlocks=function(e){var t=[];return e.state.doc.descendants((function(e,n,r){if(p.LEAF_BLOCK_TYPES.indexOf(e.type.name)>-1){var i=t.length;t.push({node:e,pos:n,parent:r,index:i})}})),t}(n),this.currentDecorations=[],this._insertDomInfoToDoc()}var t,n,r;return t=e,(n=[{key:"getClickDoms",value:function(e){var t=e.target,n=Au(t,p.D_MARK),r=Au(t,p.D_NOTE),i=function(e,t,n){for(var r=null;t&&t.getAttribute&&!r;){if(t.getAttribute("data-type")===n)for(var i=e.posAtDOM(focus.dom,0),o=e.state.doc.resolve(i),a=o.depth;a&&a>0&&!r;){var s=o.node(a);s&&s.type===n&&(r=s),a--}t=t.parentNode}return r}(this.view,t,p.LINK);return{markDoms:Du(n),noteDoms:Du(r),link:i}}},{key:"getBlockRangeList",value:function(e){if(!this.checkRange(e))return null;if(!(e=function(e){var t=e.endContainer,n=e.startContainer;if(!Su(t)||!Su(n))return null;var r=_u(n,"start"),i=_u(t,"end");return r&&e.setStart(r.container,r.offset),i&&e.setEnd(i.container,i.offset),e}(e)))return null;var t=e,n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,a=this.view.posAtDOM(n,r),s=this.view.posAtDOM(i,o);return function(e,t,n,r){var i=[],o=function(e,t,n){var r=[];return e.state.doc.nodesBetween(t,n,(function(e,t,n){p.LEAF_BLOCK_TYPES.indexOf(e.type.name)>-1&&r.push({node:e,pos:t,parent:n})})),r}(e,n,r),a=o.length;return o.forEach((function(o,s){var c=o.node.textContent.length,l=t.find((function(e){return e.pos===o.pos})).index,u=0,f=0;if(0===s||s===a-1?1===a?(u=pu(e,n),f=pu(e,r)):0===s?(u=pu(e,n),f=c):(u=0,f=pu(e,r)):(u=0,f=c),f>u){var d=f-u===c,h=o.node.textContent,p=h.substring(u,f);i.push(function(e,t,n,r,i,o,a){return{blockIndex:o,blockLength:e,blockContent:t,blockContentMD5:hu((s=t,c=Qt(s).filter((function(e){if(Cu.test(e)||Tu.test(e))return!0;try{encodeURIComponent(e)}catch(e){return!1}return!0})).join(""),c)).substring(0,8),startInBlock:r,endInBlock:i,isMarkedAllBlock:a?1:0,originMarkContent:n};var s,c}(c,h,p,u,f,l,d))}})),i}(this.view,this.allLeafBlocks,a,s)}},{key:"findSimilarMarkIds",value:function(e){if(!this.checkRange(e))return[];var t=e.endContainer,n=e.startContainer;return Iu(Au(t,p.D_MARK),Au(n,p.D_MARK))}},{key:"findSimilarNoteIds",value:function(e){if(!this.checkRange(e))return[];var t=e.endContainer,n=e.startContainer;return Iu(Au(t,p.D_NOTE),Au(n,p.D_NOTE))}},{key:"showMark",value:function(e,t){this.showDecorations(e,p.D_MARK,t)}},{key:"showNote",value:function(e,t){this.showDecorations(e,p.D_NOTE,t)}},{key:"showPublic",value:function(e,t){this.showDecorations(e,p.D_PUBLIC,t)}},{key:"showDecorations",value:function(e,t,n){var r=mu(this.view,this.allLeafBlocks,e,t,n);this.currentDecorations=function(e,t,n){if(n&&n[0]){var r=n.filter((function(e){return!t.find((function(t){return t.id===e.id}))}));t=t.concat(r),Eu&&clearTimeout(Eu),Eu=setTimeout((function(){xu(e,t)}),10)}return t}(this.view,this.currentDecorations,r)}},{key:"removeMarkById",value:function(e){this.currentDecorations=Ou(this.view,this.currentDecorations,e)}},{key:"removeNoteById",value:function(e){this.currentDecorations=Ou(this.view,this.currentDecorations,e)}},{key:"checkRange",value:function(e){return e&&e.startContainer}},{key:"getHeadingList",value:function(){var e=[];return this.doc.content.forEach((function(t){if(t.type===p.HEADING){var n=t.content&&t.content[0]&&t.content.reduce((function(e,t){return e+t.text}),"");n&&e.push({id:t.attrs.id,text:n,level:t.attrs.level})}})),e}},{key:"_insertDomInfoToDoc",value:function(){var e=this;this.doc.content.forEach((function(t){t.type===p.HEADING&&(t.attrs.id=p.HEADING+e.index,e.index++)}))}}])&&Mu(t.prototype,n),r&&Mu(t,r),e}(),Cu=/[\u0000-\u007E]/g,Tu=/[\uFF00-\uFFFF\u4E00-\u9FA5\u3000-\u3012]/g;function Au(e,t){var n=[];for(3===e.nodeType&&(e=e.parentNode);e&&e.getAttribute&&"doc"!==e.getAttribute("data-type");){if(e.getAttribute("data-type")===t){var r=e.getAttribute("data-id");r&&n.push(r)}e=e.parentNode}return n}function Du(e){return e.map((function(e){return{doms:document.querySelectorAll('[data-attr-id="'.concat(e,'"]')),id:e}}))}function Iu(e,t){var n=[];return e.forEach((function(e){t.indexOf(e)>-1&&n.push(e)})),n}var Lu,Ru=Pa({props:["content"],mounted:function(){this.init()},methods:{init:function(){this.content&&(this.createEditorView(),this.previewAPI=new Nu(this.content,this.view),this.$emit("inited",this.previewAPI))},createEditorView:function(){var e=this,t=this.createEditorState(),n={postMessage:function(t){e.$emit("postMessage",t)}};this.view=function(e,t,n,r){var i;return new _a(e,{state:t,dispatchTransaction:n,nodeViews:(i={},fl(i,p.VIDEO,(function(e,t,n){return new nl(e,t,n,r)})),fl(i,p.EMBED_COMPONENT,(function(e,t,n){return new il(e,t,n,r)})),fl(i,p.IMAGE,(function(e,t,n){return new el(e,t,n,r)})),fl(i,p.CODE_BLOCK_PREVIEW,(function(e,t,n){return new Qc(e,t,n,r)})),fl(i,p.KATEX_BLOCK,(function(e,t,n){return new al(e,t,n,r)})),fl(i,p.KATEX_INLINE,(function(e,t,n,r){return new ul(e,r)})),i),editable:function(){return!1},handleDOMEvents:{dragstart:function(){return!0},mouseup:function(){return!0}}})}(this.$refs.editor,t,(function(t){e.view.updateState(e.view.state.apply(t)),e.view.domObserver.stop()}),n)},createEditorState:function(){var e={type:p.DOC,content:[{type:p.PARAGRAPH,nodes:[]}]};this.schemaForPreview=new J.h({nodes:hl,marks:pl});var t=this.content||e;ir(t),xl(t),Ql(t),Ol(t);var n,r=J.f.fromJSON(this.schemaForPreview,t);return Q.b.create({doc:r,plugins:[(n=new Q.d({key:ku,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(ku);return n&&n.decorationSet?n.decorationSet:t}},props:{decorations:function(e){return n.getState(e)}}}),n)]})}}},(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"editor",attrs:{"data-type":"doc"}})}),[],!1,null,null,null).exports;function Pu(e){return(Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $u=(zu(Lu={defaultNode:{toDOM:function(e){return["div",{"data-type":e.type,"data-attrs":JSON.stringify(e.attrs)},0]}},defaultMark:{toDOM:function(e){return["span",{"data-type":e.type,"data-attrs":JSON.stringify(e.attrs)},0]}}},p.PARAGRAPH,{toDOM:function(e){var t=e.attrs,n=t.indent,r=t.number,i=t.align,o={};return"number"==typeof n&&n>0&&n<9&&(o["data-indent-".concat(n)]=""),"number"==typeof r&&r>0&&(o["data-number"]=r),["center","right"].indexOf(i)>-1&&(o["data-align-".concat(i)]=""),["p",o,0]}}),zu(Lu,p.BLOCK_QUOTE,{toDOM:function(){return["blockquote",0]}}),zu(Lu,p.HORIZONTAL_RULE,{toDOM:function(){return["hr"]}}),zu(Lu,p.HEADING,{toDOM:function(e){var t={},n=e.attrs.align,r=e.attrs.level;return[1,2,3,4,5].indexOf(r)<0&&(r=5),["center","right"].indexOf(n)>-1&&(t["data-align-".concat(n)]=""),["h"+r,t,0]}}),zu(Lu,p.CODE_BLOCK,{toDOM:function(){return["pre",["code",0]]}}),zu(Lu,p.KATEX_BLOCK,{toDOM:function(){return["div",0]}}),zu(Lu,p.KATEX_INLINE,{toDOM:function(){return["span",0]}}),zu(Lu,p.IMAGE,{toDOM:function(e){var t=e.attrs,n=t.src,r=t.alt;return["img",{src:n,alt:void 0===r?"":r}]}}),zu(Lu,p.LINK,{toDOM:function(e){var t=e.attrs;return["a",{href:t.href,title:t.title},0]}}),zu(Lu,p.CODE_INLINE,{toDOM:function(){return["code",0]}}),zu(Lu,p.SUP,{toDOM:function(){return["sup",0]}}),zu(Lu,p.SUB,{toDOM:function(){return["sub",0]}}),zu(Lu,p.NUMBERED_LIST,{toDOM:function(e){var t=e.attrs.start,n={};return"number"==typeof t&&t>1&&(n.start=t),["ol",n,0]}}),zu(Lu,p.BULLETED_LIST,{toDOM:function(){return["ul",0]}}),zu(Lu,p.LIST_ITEM,{toDOM:function(){return["li",0]}}),zu(Lu,p.ITALIC,{toDOM:function(){return["i",0]}}),zu(Lu,p.DEL,{toDOM:function(){return["s",0]}}),zu(Lu,p.UNDERLINE,{toDOM:function(){return["u",0]}}),zu(Lu,p.SIZE,{toDOM:function(e){var t=e.attrs.size;return"number"==typeof t&&t>8&&t<99?["span",{style:"font-size: ".concat(t,"px")},0]:["span",0]}}),zu(Lu,p.COLOR,{toDOM:function(e){var t=e.attrs.color;return/^#[a-f0-9]{6}$/i.test(t)?["span",{style:"color: ".concat(t)},0]:["span",0]}}),zu(Lu,p.BG_COLOR,{toDOM:function(e){var t=e.attrs.color;return/^#[a-f0-9]{6}$/i.test(t)?["span",{style:"background: ".concat(t)},0]:["span",0]}}),zu(Lu,p.STRONG,{toDOM:function(){return["strong",0]}}),Lu),ju=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serializeConfig=Object.assign({},$u,t||{})}var t,n,r;return t=e,(n=[{key:"toHTML",value:function(e){return this.convertNodes(e.content)}},{key:"convertNodes",value:function(e){var t=this,n="";return(e=e||[]).forEach((function(e){n+=t.convertNode(e)})),n}},{key:"convertNode",value:function(e){if(e.attrs||(e.attrs={}),"text"===e.type)return e.marks&&e.marks.length>0?this.convertMarks(e.marks,e.text):e.text;var t=this.serializeConfig[e.type],n=this.convertNodes(e.content);if(!t){var r=this.serializeConfig.defaultNode;return r.toHTML?r.toHTML(e,n):r.toDOM?Hu(r.toDOM(e),n):""}return t.toHTML?t.toHTML(e,n):t.toDOM?Hu(t.toDOM(e),n):void 0}},{key:"convertMarks",value:function(e,t){var n=this,r=t;return e.forEach((function(e){r=n.convertMark(e,r)})),r}},{key:"convertMark",value:function(e,t){e.attrs||(e.attrs={});var n=this.serializeConfig[e.type];if(!n){var r=this.serializeConfig.defaultMark;return r.toHTML?r.toHTML(e,t):r.toDOM?Hu(r.toDOM(e),t):""}return n.toHTML?n.toHTML(e,t):n.toDOM?Hu(n.toDOM(e),t):void 0}}])&&Bu(t.prototype,n),r&&Bu(t,r),e}();function Hu(e,t){var n=!1,r=e[0],i=e[e.length-1],o={};return 0===i&&(n=!0),Array.isArray(i)&&(n=!0,t=Hu(e[1],t)),Array.isArray(e[1])||"object"!==Pu(e[1])||(o=e[1]),n?"<$tag$attrs>$children</$tag>".replace(/\$tag/g,r).replace("$attrs",Fu(o)).replace("$children",t):"<$tag$attrs/>".replace(/\$tag/g,r).replace("$attrs",Fu(o))}function Fu(e){var t="";return Object.keys(e).forEach((function(n){var r=e[n];t+=r?" ".concat(n,'="').concat(r,'"'):" ".concat(n," ")})),t}function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"SchemaType",(function(){return Vu})),n.d(t,"html2json",(function(){return Wu})),n.d(t,"Editor",(function(){return Xc})),n.d(t,"Preview",(function(){return Ru})),n.d(t,"Serializer",(function(){return ju}));var Vu=p;function Wu(e){var t=new f(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach((function(t){Ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},w));return e=h(function(e){return function(e){return e.replace(/<p><\/p>/g,"")}(e=function(e){return e.replace(/<object>/g,"&lt;object&gt;")}(e=function(e){return e.replace(/(\<strong[^\>]*\>)((.|\n)*?)(\<\/strong\>)/g,(function(e,t,n){return n.replace(/\<br[^\>]*\>/g,"<br>"),(n=n.split("<br>")).map((function(e){return"<strong>".concat(e,"</strong>")})).join("<br>")}))}(e=function(e){return(e=(e=e.replace(/(\<code[^\>]*\>)((.|\n)*?)(\<\/code\>)/g,(function(e,t,n){return t+(n=(n=(n=(n=n.replace(/\t/g,"  ")).replace(/\<a href="(.+?)"\>.*?\<\/a\>/g,(function(e,t){return"[](".concat(t,")")}))).replace(/\n/g,"<br/>")).replace(/ /g,"&nbsp;"))+"</code>"}))).replace(/(\<pre[^\>]*\>)((.|\n)*?)(\<\/pre\>)/g,(function(e,t,n){return e.indexOf("<code")>-1?e:t+(n=(n=(n=(n=n.replace(/\t/g,"  ")).replace(/\<a href="(.+?)"\>.*?\<\/a\>/g,(function(e,t){return"[](".concat(t,")")}))).replace(/\n/g,"<br/>")).replace(/ /g,"&nbsp;"))+"</pre>"}))).replace("<pre><br/>","<pre>")}(e=function(e){return e.replace(/\$\$[^\$]+\$\$/g,(function(e){return e.replace(/\\?\<br[^\>]*\>/g,"&br;").replace(/&amp;/g,"&")}))}(e=function(e){return(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")}(e=function(e){return e.replace("\x3c!-- [[[read_end]]] --\x3e","")}(e)))))))}(e)),{type:"doc",content:t.deserialize(e)}}}])}))}}]);